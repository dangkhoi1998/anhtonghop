!function(e){function t(t){for(var n,o,u=t[0],i=t[1],d=t[2],l=t[3]||[],f=0,b=[];f<u.length;f++)o=u[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&b.push(a[o][0]),a[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(p&&p(t),s.push.apply(s,l);b.length;)b.shift()();return c.push.apply(c,d||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,i=1;i<r.length;i++){var d=r[i];0!==a[d]&&(n=!1)}n&&(c.splice(t--,1),e=u(u.s=r[0]))}return 0===c.length&&(s.forEach((function(e){if(void 0===a[e]){a[e]=null;var t=document.createElement("link");u.nc&&t.setAttribute("nonce",u.nc),t.rel="prefetch",t.as="script",t.href=o(e),document.head.appendChild(t)}})),s.length=0),e}var n={},a={8:0},c=[],s=[];function o(e){return u.p+""+({6:"details.31ecd969",10:"uploader.253ae210",11:"uploader.70aabc29"}[e]||e)+"."+{6:"f452f1a6b95c84d49948",10:"7bbff5bf0205bbe91a1a",11:"9c9e7ad770f077322020"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var c,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=o(e);var i=new Error;c=function(t){s.onerror=s.onload=null,clearTimeout(d);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+c+")",i.name="ChunkLoadError",i.type=n,i.request=c,r[1](i)}a[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:s})}),12e4);s.onerror=s.onload=c,document.head.appendChild(s)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="https://deo.shopeemobile.com/shopee/shopee-seller-live-vn/chateasy/",u.oe=function(e){throw console.error(e),e};var i=window.miniJsonp=window.miniJsonp||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var p=d,f=(c.push([4,4,3,9,1,2,0,5,7]),r());t([[],{},0,[4,3,1,2,0,5,6,10,11]])}({"1o5h":function(e,t,r){"use strict";r.d(t,"c",(function(){return I})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return k})),r.d(t,"h",(function(){return x})),r.d(t,"b",(function(){return C})),r.d(t,"e",(function(){return A})),r.d(t,"d",(function(){return N})),r.d(t,"i",(function(){return U}));r("RW0V"),r("ioFf"),r("mYba"),r("jm62"),r("WLL4"),r("HAE/");var n,a=r("RIqP"),c=r.n(a),s=r("lSNA"),o=r.n(s),u=r("o0o1"),i=r.n(u),d=(r("Btvt"),r("VRzm"),r("L9s1"),r("Z2Ku"),r("Vd3H"),r("bWfx"),r("8+KV"),r("dZ+Y"),r("9AAn"),r("XfO3"),r("yt8O"),r("rGqo"),r("DNiP"),r("0l/t"),r("FH7K")),l=r("5rFJ"),p=r("tvxL"),f=r("SmG+"),b=r("XnKn"),h=i.a.mark(T),O=i.a.mark(M),v=i.a.mark(D),E=i.a.mark(P),S=i.a.mark(A),m=i.a.mark(N),g=i.a.mark(U);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=Object(d.a)({FETCH_MESSAGES_REQUESTED:function(e){return{conversation:e.conversation,reset:e.reset,direction:e.direction,messageId:e.messageId,cachedLatestId:e.cachedLatestId,cachedOldestId:e.cachedOldestId,source:e.source,isPreload:e.isPreload,messageList:e.messageList}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds,direction:e.direction,reset:e.reset,cachedOldestId:e.cachedOldestId}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_PRELOADED_MESSAGES:function(e){return{conversationId:e.conversationId,key:e.key,payload:e.payload}},DELETE_PRELOADED_MESSAGES:function(e){return{conversationId:e.conversationId,key:e.key}}}),I=y.fetchMessagesRequested,w=y.fetchMessagesSucceeded,k=y.updateFetchMessagesRequestedStatus,x=y.updatePreloadedMessages,C=y.deletePreloadedMessages,R=function(e){var t=e.conversationId,r=e.shopId,n=e.offset,a=e.limit,c=void 0===a?20:a,s=e.direction,o=void 0===s?"older":s,u=(e.source,{shop_id:r,offset:n,limit:"around"===o?Math.ceil(c/2):c,direction:o});return new Promise((function(e,r){Object(p.fetch)({parent:"conversations",parentId:t,resource:"messages",params:u}).then((function(t){var r=t.messages;e({messages:void 0===r?[]:r,limit:c})})).catch((function(e){r(e)}))}))};function T(e){var t,r,n,a;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(l.call)(N,{payload:j(j({},t),{},{isPreload:!0,reset:!1,direction:"older"})});case 3:if(!(r=c.sent)){c.next=11;break}return n=t.conversation.id,c.next=8,Object(l.call)(M,n);case 8:return a=c.sent,c.next=11,Object(l.put)(x({conversationId:n,key:a,payload:r}));case 11:case"end":return c.stop()}}),h)}function M(e){var t,r,n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.select)((function(e){return e.messageReducer}));case 2:return t=a.sent,r=t.messageIdsHash,n=r[e]||{},a.abrupt("return",n.oldestMessageId);case 6:case"end":return a.stop()}}),O)}function D(e){var t,r,n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.select)((function(e){return e.messageReducer}));case 2:return t=a.sent,r=t.messageIdsHash,n=r[e]||{},a.abrupt("return",n.preloaded||{});case 6:case"end":return a.stop()}}),v)}function P(e){var t,r,n,a;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!e.reset||"around"===e.direction){c.next=8;break}return c.next=3,Object(l.select)((function(e){return e.messageReducer}));case 3:return t=c.sent,r=t.messageIdsHash,n=e.conversation.id,a=r[n]||{},c.abrupt("return",0===(a.all||[]).length);case 8:return c.abrupt("return","older"===e.direction);case 9:case"end":return c.stop()}}),E)}function A(e){var t,r,n,a,c;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.next=3,P(t);case 3:if(!s.sent){s.next=31;break}return r=null,n=t.conversation.id,s.next=9,Object(l.call)(M,n);case 9:if(!(a=s.sent)){s.next=15;break}return s.next=13,Object(l.call)(D,n);case 13:c=s.sent,r=c[a];case 15:if(!r){s.next=22;break}return s.next=18,Object(l.put)(w(r));case 18:return s.next=20,Object(l.put)(C({conversationId:n,key:a}));case 20:s.next=27;break;case 22:return s.next=24,Object(l.call)(N,{payload:t});case 24:if(s.sent){s.next=27;break}return s.abrupt("return");case 27:return s.next=29,Object(l.fork)(T,{payload:t});case 29:s.next=33;break;case 31:return s.next=33,Object(l.call)(N,{payload:t});case 33:case"end":return s.stop()}}),S)}function N(e){var t,r,n,a,s,o,u,d,h,O,v,E,S,g,_,j,y,x,C,T,M,D,P,A,N,U,F,L,q,G,H,W,V,Q;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.conversation,n=t.reset,a=t.direction,s=t.messageId,o=t.cachedOldestId,u=t.cachedLatestId,d=t.source,h=t.isPreload,O=t.isPopulateSync,v=t.messageList,i.prev=1,i.next=4,Object(l.select)((function(e){return e.conversationReducer}));case 4:return E=i.sent,S=E.persist,i.next=8,Object(l.select)(p.currentUserShopIdSelector);case 8:return g=i.sent,i.next=11,Object(l.select)(p.isSubAccountSelector);case 11:return _=i.sent,j=r.id,y=r.shop_id,i.next=15,Object(l.select)((function(e){return e.messageReducer}));case 15:if(x=i.sent,C=x.messageIdsHash,T=C[j]||{},!n||"around"===a){i.next=25;break}M=0,a="older",D=!0,o=T.oldestMessageId,i.next=38;break;case 25:i.t0=a,i.next="older"===i.t0?28:"latest"===i.t0?31:"around"===i.t0?34:37;break;case 28:return M=T.oldestMessageId,D=T.hasMoreOlderMessage,i.abrupt("break",38);case 31:return M=T.latestMessageId,D=T.hasMoreLatestMessage,i.abrupt("break",38);case 34:return M=s,D=!0,i.abrupt("break",38);case 37:return i.abrupt("break",38);case 38:if(D){i.next=46;break}return i.next=41,Object(l.select)(p.messageHttpStatusSelector);case 41:if(!i.sent.includes("failed")){i.next=45;break}return i.next=45,Object(l.put)(k({status:b.DataFetchStatus.SUCCEED}));case 45:return i.abrupt("return");case 46:if(h){i.next=49;break}return i.next=49,Object(l.put)(k({status:n||"around"===a?b.DataFetchStatus.INIT_PENDING:b.DataFetchStatus.PENDING}));case 49:if(!v||!v.length){i.next=54;break}P=v,A=20,i.next=59;break;case 54:return i.next=56,Object(l.call)(R,{conversationId:j,shopId:y,offset:M,direction:a,source:d});case 56:N=i.sent,P=N.messages,A=N.limit;case 59:return P.sort((function(e,t){return t.id-e.id})),U=P.map((function(e){return e.id})),F=c()(P),P.forEach((function(e){var t=e.quoted_msg;if(t){if(F.some((function(e){return e.id===t.id})))return;F=[].concat(c()(F),[t])}})),i.next=65,Object(l.call)(f.g,F,g,_,O);case 65:return i.next=67,Object(l.select)(p.messagesWithSourceSelector);case 67:return L=i.sent,i.next=70,Object(l.call)(p.updateOrReplaceAction,L,P,"messages",["content"]);case 70:if(q=new Map,G=P.reduce((function(e,t){var r=t.request_id,n=t.id;return e.has(r)||e.set(r,n),e}),q),H={reset:n,limit:A,direction:a,messageIds:U,conversationId:j,persist:S,status:b.DataFetchStatus.SUCCEED,messageRequestIds:G},W=!1,(V=u||(T.all||[])[0])&&(n||u)&&(Q=U[U.length-1]||M,V&&Object(b.greaterThan)(Q,V)?(W=!0,u=u||V):H.cachedOldestId=o),h){i.next=79;break}return i.next=79,Object(l.put)(w(H));case 79:if(!W){i.next=82;break}return i.next=82,Object(l.put)(I({direction:"older",conversation:r,cachedLatestId:u,cachedOldestId:o||0}));case 82:return("around"===a||v&&v.length)&&s&&p.EventBus.emit("scrollToMessage",s),i.abrupt("return",H);case 86:if(i.prev=86,i.t1=i.catch(1),h){i.next=91;break}return i.next=91,Object(l.put)(k({status:n?b.DataFetchStatus.INIT_FAILED:b.DataFetchStatus.FAILED}));case 91:case"end":return i.stop()}}),m,null,[[1,86]])}function U(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(I,A);case 2:case"end":return e.stop()}}),g)}t.a=(n={},o()(n,w,(function(e,t){var r=t.payload,n=r.limit,a=r.status,c=r.conversationId,s=r.messageIds,u=r.persist,i=r.messageRequestIds,d=r.direction,l=r.reset,p=r.cachedOldestId,b=e.messageIdsHash,h=b[c]||{},O={};switch(d){case"older":O.oldestMessageId=p||s[s.length-1],O.hasMoreOlderMessage=s.length>=n;break;case"latest":O.latestMessageId=s[0],O.hasMoreLatestMessage=s.length>=n;break;case"around":O.oldestMessageId=s[s.length-1],O.latestMessageId=s[0],O.hasMoreOlderMessage=!0,O.hasMoreLatestMessage=!0,h={}}l&&"around"!==d&&(O.hasMoreLatestMessage=!1);var v=(h.all||[]).map((function(e){return i.has(e)?i.get(e):e})),E=h.failed||[];return j(j({},e),{},{status:a,messageIdsHash:j(j({},b),{},o()({},c,j(j({},h),{},{all:Object(f.e)(v,s,l,d),failed:E.filter((function(e){return!i.has(e)}))},O))),persist:u})})),o()(n,k,(function(e,t){var r=t.payload.status;return j(j({},e),{},{status:r})})),o()(n,x,(function(e,t){var r=t.payload,n=r.conversationId,a=r.key,c=r.payload,s=e.messageIdsHash,u=s[n]||{},i=u.preloaded||{};return j(j({},e),{},{messageIdsHash:j(j({},s),{},o()({},n,j(j({},u),{},{preloaded:j(j({},i),{},o()({},a,c))})))})})),o()(n,C,(function(e,t){var r=t.payload,n=r.conversationId,a=r.key,c=e.messageIdsHash,s=c[n]||{},u=s.preloaded||{};return u[a]?j(j({},e),{},{messageIdsHash:j(j({},c),{},o()({},n,j(j({},s),{},{preloaded:j(j({},u),{},o()({},a,null))})))}):e})),n)},"2YZa":function(e,t,r){"use strict";r.r(t);r("BKBi"),r("L9s1"),r("Z2Ku");var n=r("XnKn");Object(n.init)("VN","live","6.2.8"),r.p="https://".concat(location.host.includes("cn")?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee/shopee-seller-").concat("live","-").concat("VN".toLowerCase(),"/chateasy/");var a=r("q1tI"),c=r.n(a),s=r("i8i4"),o=r.n(s),u=r("/MKj"),i=r("0cfB"),d=r("Ogvq"),l=r("W2jc"),p=r("tvxL"),f={updateGuideRequested:p.updateGuideRequested,updateChatWindowStatus:p.updateChatWindowStatus},b=Object(u.connect)((function(e){return{newbie:Object(p.newbieSelector)(e),isScChat:Object(p.isScChatSelector)(e),showEntry:Object(p.showEntrySelector)(e),currentUser:Object(p.currentUserSelector)(e)||{},isSubAccount:Object(p.isSubAccountSelector)(e),loginSuccess:Object(p.loginSuccessSelector)(e),socketSuccess:Object(p.socketSuccessSelector)(e),showChatWindow:Object(p.showChatWindowSelector)(e),totalUnreadCount:Object(p.totalUnreadConversationsCountSelector)(e),showConversationDetail:Object(p.showConversationDetailSelector)(e)}}),f)((function(e){return c.a.createElement(l.a,e)})),h=(r("p2bk"),Object(n.getChatSource)()),O=function(e){return{position:"fixed",right:h?"16px":"8px",bottom:h?"".concat((e?64:0)+16,"px"):"0",zIndex:"99999"}},v={create:function(e){var t,r,n=document.getElementById(e);if(h&&(t=(((r=(window.SellerFramework?window.SellerFramework.app:window.dev)||{}).componentData||{}).FixBottomCard||{}).isFixed,r.on&&r.on("FixBottomCardChange",(function(e){var t,r=O(e);for(t in r)n.style[t]=r[t]}))),!n){(n=document.createElement("div")).setAttribute("id",e);var a,s=O(t);for(a in s)n.style[a]=s[a];document.body.appendChild(n)}window.miniChatContainerId=e,function(e,t){o.a.render(c.a.createElement(i.AppContainer,null,c.a.createElement(u.Provider,{store:d.store},c.a.createElement(e,null))),document.getElementById(t))}(b,e)},startOrderChat:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};h&&!n.entryPoint&&(n.entryPoint=7),d.store.dispatch(Object(p.redirectConversationRequested)({userId:t,shopId:e,orderId:r,entryPointType:n.entryPoint}))},startChatWithText:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d.store.dispatch(Object(p.redirectConversationRequested)({userId:e,message:t,entryPointType:r.entryPoint}))},startChat:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d.store.dispatch(Object(p.redirectConversationRequested)({userId:t,shopId:e,productId:r,entryPointType:n.entryPoint}))},minimizeChatWindow:function(){d.store.dispatch(Object(p.updateChatWindowStatus)({shouldShowWindow:!1}))},inNewBie:function(){var e=(d.store.getState().userReducer||{}).newbie,t=void 0===e?[]:e;return Object(n.checkEntryGuide)(t)},updateLoginStatus:function(){d.store.dispatch(Object(p.loginRequested)())},logout:function(){d.store.dispatch(Object(p.forceLogoutRequested)())},locateMessage:function(e,t){e&&t&&(d.store.dispatch(Object(p.updateChatWindowStatus)({shouldShowWindow:!0})),d.store.dispatch(Object(p.locationMessage)({msgId:e,shopId:t})))}};window.ChatEasy=v,"function"==typeof window.chatReady&&window.chatReady(),v.create("shopee-mini-chat-embedded")},"4l3w":function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.DELETE_CONVERSATION_MESSAGE_HASH="DELETE_CONVERSATION_MESSAGE_HASH",e.SET_ENTRY_POINT="SET_ENTRY_POINT",e.EVALUATION_REQUESTED="EVALUATION_REQUESTED",e.FETCH_FAQ_MESSAGES_REQUESTED="FETCH_FAQ_MESSAGES_REQUESTED",e.FETCH_FAQ_MESSAGES_SUCCEEDED="FETCH_FAQ_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS",e.UPDATE_CURRENT_FAQ_ID="UPDATE_CURRENT_FAQ_ID",e.SHOW_FAQ_HISTORY_MODAL="SHOW_FAQ_HISTORY_MODAL",e.FETCH_MESSAGES_REQUESTED="FETCH_MESSAGES_REQUESTED",e.FETCH_MESSAGES_SUCCEEDED="FETCH_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_MESSAGES_REQUESTED_STATUS",e.UPDATE_PRELOADED_MESSAGES="UPDATE_PRELOADED_MESSAGES",e.DELETE_PRELOADED_MESSAGES="DELETE_PRELOADED_MESSAGES",e.HANDLE_SENSITIVE_URL="HANDLE_SENSITIVE_URL",e.SEND_MESSAGES_FAILED_BY_OFFLINE="SEND_MESSAGES_FAILED_BY_OFFLINE",e.RESET_MESSAGES_FAILED_BY_OFFLINE="RESET_MESSAGES_FAILED_BY_OFFLINE",e.RESEND_OFFLINE_MESSAGES_ONCE="RESEND_OFFLINE_MESSAGES_ONCE",e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED="RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED",e.POPULATE_MESSAGE_REQUESTED="POPULATE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_REQUESTED="RECEIVE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_SUCCEEDED="RECEIVE_MESSAGE_SUCCEEDED",e.RESET_NEW_CONVERSATION_QUEUE="RESET_NEW_CONVERSATION_QUEUE",e.RESET_OLD_CONVERSATION_QUEUE="RESET_OLD_CONVERSATION_QUEUE",e.RESET_CONVERSATION_QUEUE="RESET_CONVERSATION_QUEUE",e.RESEND_MESSAGE_REQUESTED="RESEND_MESSAGE_REQUESTED",e.SEND_MESSAGES_REQUESTED="SEND_MESSAGES_REQUESTED",e.SEND_MESSAGES_SUCCEEDED="SEND_MESSAGES_SUCCEEDED",e.SENDING_MESSAGES="SENDING_MESSAGES",e.SEND_MESSAGES_TO_PENDING="SEND_MESSAGES_TO_PENDING",e.SEND_MESSAGES_FAILED="SEND_MESSAGES_FAILED",e.ABORT_ALL_SENDING_MESSAGES="ABORT_ALL_SENDING_MESSAGES",e.CANCEL_SENDING_MESSAGE_REQUESTED="CANCEL_SENDING_MESSAGE_REQUESTED",e.CANCEL_SENDING_MESSAGE_SUCCEEDED="CANCEL_SENDING_MESSAGE_SUCCEEDED",e.SEND_VIDEO_MESSAGE_REQUESTED="SEND_VIDEO_MESSAGE_REQUESTED",e.SEND_PRODUCTS_MESSAGE_REQUESTED="SEND_PRODUCTS_MESSAGE_REQUESTED",e.TRANSLATE_MESSAGES_REQUESTED="TRANSLATE_MESSAGES_REQUESTED",e.CHANGE_TRANSLATE_STATUS="CHANGE_TRANSLATE_STATUS",e.UPDATE_VIDEO_INFO="UPDATE_VIDEO_INFO",e.DELETE_VIDEO_INFO="DELETE_VIDEO_INFO",e.MESSAGE_SYNC_UPDATE="MESSAGE_SYNC_UPDATE",e.MESSAGE_UPDATE_TIME_NOW="MESSAGE_UPDATE_TIME_NOW"}(n||(n={}))},"5mRn":function(e,t,r){"use strict";r.d(t,"e",(function(){return k})),r.d(t,"d",(function(){return x})),r.d(t,"b",(function(){return C})),r.d(t,"c",(function(){return R})),r.d(t,"f",(function(){return M})),r.d(t,"g",(function(){return D}));r("I78e"),r("f3/d"),r("ioFf"),r("HEwt"),r("LK8F"),r("RW0V"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/");var n,a,c=r("RIqP"),s=r.n(c),o=r("J4zp"),u=r.n(o),i=r("lSNA"),d=r.n(i),l=r("o0o1"),p=r.n(l),f=(r("/8Fb"),r("rGqo"),r("0l/t"),r("bWfx"),r("T39b"),r("XfO3"),r("Btvt"),r("yt8O"),r("L9s1"),r("Z2Ku"),r("FH7K")),b=r("5rFJ"),h=r("Ogvq"),O=r("oIQF"),v=r("tvxL"),E=r("4l3w");function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=p.a.mark(T),_=p.a.mark(M),j=p.a.mark(D);function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw c}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=Object(f.a)((n={},d()(n,E.a.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}})),d()(n,E.a.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(){return{}})),d()(n,E.a.RESEND_OFFLINE_MESSAGES_ONCE,(function(){return{}})),d()(n,E.a.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}})),n)),k=w.sendMessagesFailedByOffline,x=w.resetMessagesFailedByOffline,C=w.resendOfflineMessagesOnce,R=w.resendOfflineMessagesOnceSucceed;function T(){var e,t,r,n,a,c,s,o,i;return p.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(b.select)(v.offlineMessagesSelector);case 2:e=d.sent,t=Object.entries(e),r=[],n=p.a.mark((function e(){var t,n,s,o,i,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c[a],n=u()(t,2),s=n[0],o=n[1],e.next=4,Object(b.select)(Object(v.getMessagesSelector)(o));case 4:i=e.sent,d=o.map((function(e,t){return{conversationId:s,requestIds:[e],messages:[i[t]]}})).filter((function(e){return e.messages[0]})),r=r.concat(d);case 7:case"end":return e.stop()}}),e)})),a=0,c=t;case 7:if(!(a<c.length)){d.next=12;break}return d.delegateYield(n(),"t0",9);case 9:a++,d.next=7;break;case 12:s=y(r),d.prev=13,s.s();case 15:if((o=s.n()).done){d.next=23;break}return i=o.value,d.next=19,Object(O.f)(i);case 19:return d.next=21,Object(b.delay)(400);case 21:d.next=15;break;case 23:d.next=28;break;case 25:d.prev=25,d.t1=d.catch(13),s.e(d.t1);case 28:return d.prev=28,s.f(),d.finish(28);case 31:return d.next=33,Object(b.put)(x());case 33:case"end":return d.stop()}}),g,null,[[13,25,28,31]])}function M(e){var t,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.conversationId,r=e.messageIds,n.next=3,Object(b.put)(R({conversationId:t,messageIds:r}));case 3:case"end":return n.stop()}}),_)}function D(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(C,T);case 2:case"end":return e.stop()}}),j)}window.addEventListener("judge-online",(function(){h.store.dispatch(C())})),t.a=(a={},d()(a,E.a.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e,t){var r=t.payload,n=r.conversationId,a=r.requestIds,c=e.offlineMessages,o=(c[n]||[]).concat(a);return m(m({},e),{},{offlineMessages:m(m({},c),{},d()({},n,s()(new Set(o))))})})),d()(a,E.a.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(e){return m(m({},e),{},{offlineMessages:{}})})),d()(a,E.a.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e,t){var r=t.payload,n=r.conversationId,a=r.messageIds,c=e.messageIdsHash,s=c[n]||{},o=(s.all||[]).filter((function(e){return!a.includes(e)})),u=(s.failed||[]).filter((function(e){return!a.includes(e)})),i=(s.sending||[]).filter((function(e){return!a.includes(e)}));return m(m({},e),{},{messageIdsHash:m(m({},c),{},d()({},n,m(m({},s),{},{all:o,failed:u,sending:i})))})})),a)},"7i0w":function(e,t,r){"use strict";r.r(t),r.d(t,"on",(function(){return _})),r.d(t,"register",(function(){return j})),r.d(t,"remove",(function(){return y})),r.d(t,"dispatch",(function(){return w})),r.d(t,"watchModuleCenterChannel",(function(){return C}));var n=r("yXPU"),a=r.n(n),c=r("o0o1"),s=r.n(c),o=(r("8+KV"),r("Btvt"),r("VRzm"),r("xk4V")),u=r.n(o),i=r("Ogvq"),d=r("rRWa"),l=r("5rFJ"),p=s.a.mark(x),f=s.a.mark(C),b={},h={},O={},v={},E=new MessageChannel,S=E.port1,m=E.port2,g=function(e,t){S.postMessage(JSON.stringify({moduleId:e,action:t}))},_=function(e,t){O[e]||(O[e]=t)},j=function(e){if(!b[e]){b[e]=!0;var t=h[e];t&&t.length&&t.forEach((function(t){g(e,t)}))}},y=function(e){b[e]=!1,h[e]=null},I=function(e,t){return new Promise(function(){var n=a()(s.a.mark((function n(a,c){var o,d,l,p,f,O,E,S;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=u()(),d=t.effect,l=t.actionName,p=t.actionPayload,f=t.couldDelay,O=void 0!==f&&f,E={uuid:o},v[o]={actionName:l,effect:d,resolve:a,reject:c,actionPayload:p},!b[e]){n.next=8;break}g(e,E),n.next=20;break;case 8:if(h[e]||(h[e]=[]),h[e].push(E),O){n.next=20;break}S=null,n.t0=e,n.next="conversationDetail"===n.t0?15:19;break;case 15:return n.next=17,Promise.all([r.e(4),r.e(3),r.e(1),r.e(2),r.e(0),r.e(5),r.e(6)]).then(r.bind(null,"Lzd8"));case 17:return S=n.sent,n.abrupt("break",19);case 19:S&&i.store.addModule(S.getModule());case 20:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},w={put:function(e,t){return t.effect="put",I(e,t)},call:function(e,t){return t.effect="call",I(e,t)}};function k(){return Object(d.eventChannel)((function(e){return m.onmessage=function(t){e(JSON.parse(t.data))},function(){}}))}function x(e){var t,r,n,a,c,o,u,i,d,f;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=e.moduleId,r=e.action,n=v[r.uuid],a=n.effect,c=n.actionName,o=n.actionPayload,u=n.resolve,i=n.reject,d=O[t][c],s.prev=4,s.t0=a,s.next="put"===s.t0?8:"call"===s.t0?12:17;break;case 8:return s.next=10,Object(l.put)(d(o));case 10:return u(),s.abrupt("break",17);case 12:return s.next=14,Object(l.call)(d,o);case 14:return f=s.sent,u(f),s.abrupt("break",17);case 17:s.next=22;break;case 19:s.prev=19,s.t1=s.catch(4),i();case 22:case"end":return s.stop()}}),p,null,[[4,19]])}function C(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.call)(k);case 2:return e=t.sent,t.next=5,Object(l.takeEvery)(e,x);case 5:case"end":return t.stop()}}),f)}},"9n0i":function(e,t,r){"use strict";var n=r("XiPH"),a=r("peh1"),c=r("tvxL"),s={currentPage:0,perPage:20,total:0,hasMore:!0},o=function(e){return e.orderReducer.status},u=function(e){return e.orderReducer.fetchMyOrdersStatus},i=function(e){return e.orderReducer.fetchHisOrdersStatus},d=function(e){return e.orderReducer.fetchResult},l=function(e,t){return Object(a.createSelector)(d,(function(r){var n=r["".concat(e,"_").concat(t)];return n||{pagination:s,result:[]}}))},p=Object(a.createSelector)(d,c.currentShopIdSelector,c.currentBuyerIdSelector,c.entitiesSelector,(function(e,t,r,a){var s=e["".concat(t,"_").concat(r)];if(!s)return[];var o=s.result||[];return Object(n.denormalize)(o,[c.orderSchema],a)})),f=Object(a.createSelector)(d,c.currentBuyerShopIdSelector,c.currentBuyerIdSelector,c.entitiesSelector,(function(e,t,r,a){var s=e["".concat(t,"_").concat(r)];if(!s)return[];var o=s.result||[];return Object(n.denormalize)(o,[c.orderSchema],a)})),b={currentPage:0,perPage:20,total:0,hasMore:!0},h=function(e){return e.productReducer.myShopSearchStatus},O=function(e){return e.productReducer.otherShopSearchStatus},v=function(e){return e.productReducer.selectedProductTab},E=function(e){return e.productReducer.allShopSearchStatus},S=function(e){return e.productReducer.fetchResult},m=function(e){return e.productReducer.myShopSearchKeyword},g=function(e){return e.productReducer.otherShopSearchKeyword},_=function(e){return Object(a.createSelector)(S,(function(t){var r=t[e];return r||{pagination:b,result:[]}}))},j=Object(a.createSelector)(S,c.currentBuyerShopIdSelector,c.entitiesSelector,(function(e,t,r){var a=e[t];if(!a)return[];var s=a.result||[];return Object(n.denormalize)(s,[c.productSchema],r)})),y=Object(a.createSelector)(S,c.currentShopIdSelector,c.entitiesSelector,(function(e,t,r){var a=e[t];if(!a)return[];var s=a.result||[];return Object(n.denormalize)(s,[c.productSchema],r)})),I=(Object(a.createSelector)(S,c.currentShopIdSelector,(function(e,t){var r=e[t];return r?r.pagination.total:0})),Object(a.createSelector)((function(e){return e.stickerReducer}),c.currentConversationShopSelectors,(function(e,t){var r=t.country;return e[r=(r||"").toLowerCase()]||{}}))),w=Object(a.createSelector)(I,(function(e){return e.stickers||{}})),k=Object(a.createSelector)(I,(function(e){return e.packs||[]})),x=Object(a.createSelector)(I,(function(e){return e.currentSticker||""})),C=Object(a.createSelector)(I,(function(e){return e.currentStickerPage||1})),R=Object(a.createSelector)(I,(function(e){return e.packHttpStatus||""})),T=Object(a.createSelector)(c.entitiesSelector,w,x,(function(e,t,r){if(!r)return[];var a=(t[r]||{}).stickerIds,s=void 0===a?[]:a;return Object(n.denormalize)(s,[c.stickerSchema],e)})),M=Object(a.createSelector)(w,x,(function(e,t){if(!t)return"";var r=(e[t]||{}).status;return void 0===r?"":r}));r.d(t,"h",(function(){return o})),r.d(t,"g",(function(){return u})),r.d(t,"f",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"j",(function(){return p})),r.d(t,"i",(function(){return f})),r.d(t,"m",(function(){return h})),r.d(t,"p",(function(){return O})),r.d(t,"s",(function(){return v})),r.d(t,"a",(function(){return E})),r.d(t,"l",(function(){return m})),r.d(t,"o",(function(){return g})),r.d(t,"b",(function(){return _})),r.d(t,"n",(function(){return j})),r.d(t,"k",(function(){return y})),r.d(t,"r",(function(){return k})),r.d(t,"e",(function(){return x})),r.d(t,"d",(function(){return C})),r.d(t,"q",(function(){return R})),r.d(t,"u",(function(){return T})),r.d(t,"t",(function(){return M}))},BKBi:function(e,t){performance&&performance.mark&&performance.mark("STATIC_LOADED")},FL2V:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),c=r("VLYj"),s=r("/MKj"),o=r("tvxL"),u={updateLocationMode:o.updateLocationMode,operationRequest:o.conversationOperateRequested,showModal:o.showModal,closeModal:o.closeModal};t.a=Object(s.connect)((function(e,t){return{lastMessage:Object(o.conversationLastMessageSelector)(t.conversation.id)(e),inlocation:Object(o.inlocationSelector)(e)}}),u)((function(e){return a.a.createElement(c.a,e)}))},FZfk:function(e,t,r){"use strict";(function(e){r("I5cv");var n=r("pVnL"),a=r.n(n),c=r("lwsE"),s=r.n(c),o=r("W8MJ"),u=r.n(o),i=r("PJYZ"),d=r.n(i),l=r("7W2i"),p=r.n(l),f=r("a1gu"),b=r.n(f),h=r("Nsbk"),O=r.n(h),v=(r("2Spj"),r("q1tI")),E=r.n(v),S=r("17x9"),m=r.n(S),g=r("gSTE"),_=r("b7p5"),j=r("XnKn"),y=r("+nW5"),I=r("LI8N"),w=r.n(I);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var a=O()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return b()(this,r)}}var x=function(t){p()(n,t);var r=k(n);function n(e){var t;return s()(this,n),(t=r.call(this,e)).handleCloseAlertTip=t.handleCloseAlertTip.bind(d()(t)),t.handleCloseStatusTip=t.handleCloseStatusTip.bind(d()(t)),t.state={shouldShowStatusTip:null},t}return u()(n,[{key:"handleCloseAlertTip",value:function(){try{window.localStorage.setItem("mini-should-show-alert",JSON.stringify(!1))}catch(e){}this.forceUpdate()}},{key:"handleCloseStatusTip",value:function(){var e=this.state.shouldShowStatusTip;this.setState({shouldShowStatusTip:!e})}},{key:"mounted",value:function(){this.props.fetchDegradeConversationsDetail({})}},{key:"render",value:function(){var t=this.state.shouldShowStatusTip,r=this.props,n=r.keyword,c=r.socketFeedback,s=r.networkStatus,o=r.currentUser,u=r.isScChat,i=o.type,d=o.distribution_status,l=!1;try{l=JSON.parse(window.localStorage.getItem("mini-should-show-alert"))}catch(e){l=!1}var p="online"===s,f=i===j.AccountType.SUBACCOUNT&&"hang_up"===d&&!0!==t,b=p?c&&c.network?{type:c.status,message:c.content}:null:{type:"error",message:e("common.network_offline")};return E.a.createElement("div",{className:w.a.root},E.a.createElement(g.a,this.props),b&&E.a.createElement(y.a,{type:b.type,showIcon:!0,message:b.message}),l&&!u&&E.a.createElement(y.a,{type:"warn",showIcon:!0,closeable:!0,message:e("common.alert"),onClose:this.handleCloseAlertTip}),f&&E.a.createElement(y.a,{type:"warn",showIcon:!0,closeable:!0,message:e("common.hangup_tips"),onClose:this.handleCloseStatusTip}),E.a.createElement("div",{className:w.a.conversationLists},E.a.createElement(_.a,a()({isInSearch:!!n},this.props))))}}]),n}(E.a.PureComponent);x.propTypes={isScChat:m.a.bool,keyword:m.a.string,feedback:m.a.object,currentUser:m.a.object,networkStatus:m.a.string,socketFeedback:m.a.object,totalUnreadConversationsCount:m.a.number,fetchDegradeConversationsDetail:m.a.func},t.a=x}).call(this,r("iMMW").t)},Hdln:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),c=r("/MKj"),s=r("imT4"),o=r("tvxL"),u={connectSocket:o.connectSocket,updateOpenedMenu:o.updateOpenedMenu,updateUserRequested:o.updateUserRequested,setToastInformation:o.setToastInformation,updateGuideRequested:o.updateGuideRequested,updateChatWindowStatus:o.updateChatWindowStatus,updateConversationDetailStatus:o.updateConversationDetailStatus,changeConversationStatusRequested:o.changeConversationStatusRequested};t.a=Object(c.connect)((function(e){return{newbie:Object(o.newbieSelector)(e),toast:Object(o.toastSelector)(e),isScChat:Object(o.isScChatSelector)(e),openedMenu:Object(o.openedMenuSelector)(e),currentUser:Object(o.currentUserSelector)(e)||{},currentBuyer:Object(o.currentBuyerSelector)(e)||{},isSubAccount:Object(o.isSubAccountSelector)(e),loginSuccess:Object(o.loginSuccessSelector)(e),socketSuccess:Object(o.socketSuccessSelector)(e),totalUnreadCount:Object(o.totalUnreadConversationsCountSelector)(e),currentConversation:Object(o.currentConversationSelector)(e),currentConversationId:Object(o.currentConversationIdSelector)(e),showConversationDetail:Object(o.showConversationDetailSelector)(e),filter:Object(o.filterSelector)(e)}}),u)((function(e){return a.a.createElement(s.a,e)}))},N20w:function(e,t,r){"use strict";r.r(t);var n,a=r("RIqP"),c=r.n(a),s=(r("RW0V"),r("ioFf"),r("0l/t"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/"),r("lSNA")),o=r.n(s),u=r("e7SQ"),i=(r("T39b"),r("XfO3"),r("Btvt"),r("yt8O"),r("rGqo"),r("o0o1")),d=r.n(i),l=r("FH7K"),p=r("5rFJ"),f=r("XnKn"),b=r("tvxL"),h=r("9n0i");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=d.a.mark(w),S=d.a.mark(k),m=d.a.mark(x),g=Object(l.a)({FETCH_ALL_ORDERS_REQUESTED:function(e){return{shopId:e.shopId,buyerShopId:e.buyerShopId,userId:e.userId}},FETCH_ORDERS_REQUESTED:function(e){var t=e.from;return{from:void 0===t?f.OrderListTabs.MINE:t,shopId:e.shopId,userId:e.userId,reset:e.reset,isFromAll:e.isFromAll}},FETCH_ORDERS_SUCCEED:function(e){var t=e.shopId,r=e.userId,n=e.pagination;return{shopId:t,userId:r,result:e.result,pagination:n}},UPDATE_FETCH_ORDERS_STATUS:function(e){return{type:e.type,status:e.status}}}),_=g.fetchAllOrdersRequested,j=g.fetchOrdersRequested,y=g.fetchOrdersSucceed,I=g.updateFetchOrdersStatus;function w(e){var t,r,n,a;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.shopId,n=t.buyerShopId,a=t.userId,c.next=3,Object(p.put)(I({status:f.DataFetchStatus.INIT_PENDING}));case 3:return c.prev=3,c.next=6,Object(p.all)([Object(p.call)(k,{payload:{shopId:r,userId:a,reset:!0,isFromAll:!0}}),Object(p.call)(k,{payload:{from:f.OrderListTabs.HIS,shopId:n,userId:a,reset:!0,isFromAll:!0}})]);case 6:return c.next=8,Object(p.put)(I({status:f.DataFetchStatus.SUCCEED}));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(3),c.next=14,Object(p.put)(I({status:f.DataFetchStatus.INIT_FAILED}));case 14:case"end":return c.stop()}}),E,null,[[3,10]])}function k(e){var t,r,n,a,s,o,u,i,l,O,v,E,m,g,_,j,w,k,x,C,R,T,M,D,P,A,N,U,F;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,r=t.from,n=t.shopId,a=t.userId,s=t.reset,o=t.isFromAll,u=void 0!==o&&o,d.prev=1,i=[],l={},s){d.next=10;break}return d.next=7,Object(p.select)(Object(h.c)(n,a));case 7:O=d.sent,i=O.result,l=O.pagination;case 10:if(E=(v=l).currentPage,m=void 0===E?0:E,g=v.perPage,_=void 0===g?10:g,j=v.hasMore,!(void 0===j||j)){d.next=45;break}if(w=f.DataFetchStatus.PENDING,!s){d.next=17;break}return d.next=16,Object(p.put)(y({shopId:n,userId:a,result:i,pagination:l}));case 16:w=f.DataFetchStatus.INIT_PENDING;case 17:return d.next=19,Object(p.put)(I({type:r,status:w}));case 19:return x={ssl:!0,suffix:"orders_by_buyer_id",resource:"orders",params:{shop_id:n,buyer_id:a,per_page:_,page:k=s?1:m+1}},r===f.OrderListTabs.HIS&&(delete x.params.buyer_id,x.suffix="purchased"),d.next=24,Object(p.call)(b.fetch,x);case 24:if(C=d.sent,R=C.total,T=C.orders,D=null,P=null,!(A=(M=void 0===T?[]:T).length)){d.next=39;break}return N=Object(b.normalize)("orders",M),U=N.entities,F=N.result,d.next=35,Object(p.put)(Object(b.updateEntities)({entities:U}));case 35:D={currentPage:k,perPage:_,total:R,hasMore:A>=_},P=s?F:c()(new Set(i.concat(F))),d.next=41;break;case 39:D={currentPage:k,perPage:_,total:R,hasMore:!1},P=i;case 41:return d.next=43,Object(p.put)(y({shopId:n,userId:a,result:P,pagination:D}));case 43:return d.next=45,Object(p.put)(I({type:r,status:f.DataFetchStatus.SUCCEED}));case 45:d.next=53;break;case 47:return d.prev=47,d.t0=d.catch(1),d.next=51,Object(p.put)(I({type:r,status:s?f.DataFetchStatus.INIT_FAILED:f.DataFetchStatus.FAILED}));case 51:if(!u){d.next=53;break}throw d.t0;case 53:case"end":return d.stop()}}),S,null,[[1,47]])}function x(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.takeEvery)(_,w);case 2:return e.next=4,Object(p.takeEvery)(j,k);case 4:case"end":return e.stop()}}),m)}var C=(n={},o()(n,y,(function(e,t){var r=t.payload,n=r.shopId,a=r.userId,c=r.pagination,s=r.result,u="".concat(n,"_").concat(a);return v(v({},e),{},{fetchResult:v(v({},e.fetchResult),{},o()({},u,{pagination:c,result:s}))})})),o()(n,I,(function(e,t){var r=t.payload,n=r.type,a=r.status;switch(n){case f.OrderListTabs.MINE:e.fetchMyOrdersStatus=a;break;case f.OrderListTabs.HIS:e.fetchHisOrdersStatus=a;break;default:e.status=a}return v({},e)})),n);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var T,M={watcher:[x],reducer:Object(u.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},C),{status:"succeed",fetchMyOrdersStatus:"succeed",fetchHisOrdersStatus:"succeed",fetchResult:{}})},D=(r("bWfx"),r("HEwt"),Object(l.a)({FETCH_OFFERS_REQUESTED:function(e){return{shopId:e.shopId,buyerId:e.buyerId,reset:e.reset}},FETCH_OFFERS_SUCCEED:function(e){var t=e.shopId,r=e.buyerId,n=e.pagination,a=e.result,c=e.status;return{shopId:t,buyerId:r,pagination:n,result:a,status:void 0===c?f.DataFetchStatus.SUCCEED:c}},UPDATE_FETCH_OFFERS_REQUESTED_STATUS:function(e){return{status:e.status}},GET_PENDING_OFFERS_COUNT_REQUESTED:function(e){return{shopId:e.shopId,buyerId:e.buyerId}},GET_PENDING_OFFERS_COUNT_SUCCEED:function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}},REPLY_OFFER_REQUESTED:function(e){return{offerId:e.offerId,shopId:e.shopId,isAccept:e.isAccept,messageId:e.messageId}}})),P=(D.fetchOffersRequested,D.fetchOffersSucceed),A=D.updateFetchOffersRequestedStatus,N=(D.getPendingOffersCountRequested,D.getPendingOffersCountSucceed),U=D.replyOfferRequested;function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}T={},o()(T,P,(function(e,t){var r=t.payload,n=r.shopId,a=r.buyerId,c=r.pagination,s=r.result,u=r.status,i="".concat(n,"_").concat(a);return L(L({},e),{},{status:u,fetchResult:L(L({},e.fetchResult),{},o()({},i,{pagination:c,result:s}))})})),o()(T,A,(function(e,t){var r=t.payload.status;return L(L({},e),{},{status:r})})),o()(T,N,(function(e,t){var r=t.payload,n=r.shopId,a=r.buyerId,c=r.count,s="".concat(n,"_").concat(a);return L(L({},e),{},{pendingOffersCount:L(L({},e.pendingOffersCount),{},o()({},s,c))})})),r("h7Nl"),r("a1Th");var q=d.a.mark(H),G=d.a.mark(W);function H(e){var t,r,n,a,c,s,o;return d.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.offerId,n=t.shopId,a=t.isAccept,c=t.messageId,u.prev=1,u.next=4,Object(p.select)(b.isScChatSelector);case 4:if(!u.sent){u.next=8;break}return u.next=8,Object(p.put)(Object(b.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 8:return u.next=10,Object(p.select)(b.currentConversationSelector);case 10:if(s=u.sent,"closed"===s.status){u.next=17;break}return o={status:a?f.OfferStatus.ACCEPTED:f.OfferStatus.REJECTED,shop_id:n},c&&(o.message_id=c),u.next=17,Object(p.call)(b.fetch,{method:"PUT",resource:"offers",id:r,suffix:"reply",payload:JSON.stringify(o)});case 17:u.next=23;break;case 19:return u.prev=19,u.t0=u.catch(1),u.next=23,Object(p.call)(b.setToastInformationSaga,Object(b.setToastInformation)({error:u.t0}));case 23:case"end":return u.stop()}}),q,null,[[1,19]])}function W(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.takeEvery)(U,H);case 2:case"end":return e.stop()}}),G)}var V,Q={watcher:[W]};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=d.a.mark(fe),J=d.a.mark(be),z=d.a.mark(he),X=10,Z=f.DataFetchStatus.INIT_PENDING,$=f.DataFetchStatus.INIT_FAILED,ee=f.DataFetchStatus.PENDING,te=f.DataFetchStatus.SUCCEED,re=f.DataFetchStatus.FAILED,ne=Object(l.a)({FETCH_PRODUCTS_REQUESTED:function(e){var t=e.shopId,r=e.keyword,n=void 0===r?"":r,a=e.reset;return{shopId:t,keyword:n,reset:void 0!==a&&a}},FETCH_PRODUCTS_SUCCEED:function(e){return{shopId:e.shopId,pagination:e.pagination,result:e.result}},UPDATE_MY_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_OTHER_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_ALL_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_MY_SHOP_SEARCH_KEYWORD:function(e){return{keyword:e.keyword}},UPDATE_OTHER_SHOP_SEARCH_KEYWORD:function(e){return{keyword:e.keyword}},UPDATE_SELECTED_PRODUCT_TAB:function(e){return{selectedTab:e}},FETCH_ALL_PRODUCTS_REQUESTED:function(e){return{myShopId:e.myShopId,otherShopId:e.otherShopId}}}),ae=ne.fetchProductsRequested,ce=(ne.fetchMyShopProducts,ne.fetchProductsSucceed),se=ne.updateMyShopProductsRequestedStatus,oe=ne.updateOtherShopProductsRequestedStatus,ue=ne.updateAllShopProductsRequestedStatus,ie=ne.updateMyShopSearchKeyword,de=ne.updateOtherShopSearchKeyword,le=ne.updateSelectedProductTab,pe=ne.fetchAllProductsRequested;function fe(e){var t,r,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.myShopId,n=t.otherShopId,a.next=3,Object(p.put)(ue({status:Z}));case 3:return a.prev=3,a.next=6,Object(p.all)([be({payload:{shopId:r,keyword:"",reset:!0,isFromAll:!0}}),be({payload:{shopId:n,keyword:"",reset:!0,isFromAll:!0}})]);case 6:return a.next=8,Object(p.put)(ue({status:te}));case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(3),a.next=14,Object(p.put)(ue({status:$}));case 14:case"end":return a.stop()}}),Y,null,[[3,10]])}function be(e){var t,r,n,a,c,s,o,u,i,l,f,O,v,E,S,m,g,_,j,y,I,w,k,x,C,R,T,M;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.shopId,n=t.keyword,a=t.reset,c=t.isFromAll,s=void 0!==c&&c,d.next=3,Object(p.select)(b.currentShopIdSelector);case 3:if(o=d.sent,u=o===r,d.prev=5,i={},l=[],a){d.next=16;break}return d.next=11,Object(p.select)(Object(h.b)(r));case 11:f=d.sent,i=f.pagination,l=f.result,d.next=23;break;case 16:if(!u){d.next=21;break}return d.next=19,Object(p.put)(ie({keyword:n}));case 19:d.next=23;break;case 21:return d.next=23,Object(p.put)(de({keyword:n}));case 23:if(v=(O=i).currentPage,E=void 0===v?0:v,S=O.perPage,m=void 0===S?X:S,g=O.hasMore,!(void 0===g||g)){d.next=61;break}if(j={shop_id:r,keyword:n,per_page:m,page:_=a?1:E+1,need_cache:1,cache_expires:600},!u){d.next=32;break}return d.next=30,Object(p.put)(se({status:a?Z:ee}));case 30:d.next=34;break;case 32:return d.next=34,Object(p.put)(oe({status:a?Z:ee}));case 34:return d.next=36,Object(p.call)(b.fetch,{ssl:!0,resource:"items",params:j,cleaner:b.productCleaner});case 36:if(y=d.sent,I=y.total,w=y.items,x=null,C=null,!(k=void 0===w?[]:w).length){d.next=50;break}return R=Object(b.normalize)("products",k),T=R.entities,M=R.result,d.next=46,Object(p.put)(Object(b.updateEntities)({entities:T}));case 46:x={currentPage:_,perPage:m,total:I,hasMore:k.length>=m},C=a?M:l.concat(M),d.next=52;break;case 50:x={currentPage:_,perPage:m,total:I,hasMore:!1},C=l;case 52:return d.next=54,Object(p.put)(ce({shopId:r,pagination:x,result:C}));case 54:if(!u){d.next=59;break}return d.next=57,Object(p.put)(se({status:te}));case 57:d.next=61;break;case 59:return d.next=61,Object(p.put)(oe({status:te}));case 61:d.next=77;break;case 63:if(d.prev=63,d.t0=d.catch(5),!a){d.next=68;break}return d.next=68,Object(p.put)(ce({shopId:r,pagination:{currentPage:0,perPage:X,hasMore:!0},result:[]}));case 68:if(!u){d.next=73;break}return d.next=71,Object(p.put)(se({status:a?$:re}));case 71:d.next=75;break;case 73:return d.next=75,Object(p.put)(oe({status:a?$:re}));case 75:if(!s){d.next=77;break}throw d.t0;case 77:case"end":return d.stop()}}),J,null,[[5,63]])}function he(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.takeEvery)(ae,be);case 2:return e.next=4,Object(p.takeEvery)(pe,fe);case 4:case"end":return e.stop()}}),z)}var Oe=(V={},o()(V,ce,(function(e,t){var r=t.payload,n=r.shopId,a=r.pagination,c=r.result;return B(B({},e),{},{fetchResult:B(B({},e.fetchResult),{},o()({},n,{pagination:a,result:c}))})})),o()(V,se,(function(e,t){var r=t.payload.status;return B(B({},e),{},{myShopSearchStatus:r})})),o()(V,oe,(function(e,t){var r=t.payload.status;return B(B({},e),{},{otherShopSearchStatus:r})})),o()(V,ue,(function(e,t){var r=t.payload.status;return B(B({},e),{},{allShopSearchStatus:r})})),o()(V,ie,(function(e,t){var r=t.payload.keyword;return B(B({},e),{},{myShopSearchKeyword:r})})),o()(V,de,(function(e,t){var r=t.payload.keyword;return B(B({},e),{},{otherShopSearchKeyword:r})})),o()(V,le,(function(e,t){var r=t.payload.selectedTab;return B(B({},e),{},{selectedProductTab:r})})),V);function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ee={watcher:[he],reducer:Object(u.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Oe),{myShopSearchStatus:"",otherShopSearchStatus:"",fetchResult:{},myShopSearchKeyword:"",otherShopSearchKeyword:"",selectedProductTab:"other",allShopSearchStatus:""})},Se=Object(l.a)({CLAIM_VOUCHER_REQUESTED:function(e){return{shopId:e.shopId,voucherId:e.voucherId,voucherCode:e.voucherCode,messageId:e.messageId,isWebview:e.isWebview,source:e.source}},FETCH_VOUCHERS_REQUESTED:function(e){var t=e.shopId,r=e.type,n=void 0===r?f.VoucherTab.ONGOING:r,a=e.reset;return{shopId:t,type:n,reset:void 0!==a&&a}},FETCH_VOUCHERS_SUCCEEDED:function(e){return{page:e.page,hasMore:e.hasMore,voucherIds:e.voucherIds,status:e.status}},UPDATE_FETCH_VOUCHERS_REQUESTED_STATUS:function(e){return{status:e.status}}}),me=Se.claimVoucherRequested,ge=(Se.fetchVouchersRequested,Se.fetchVouchersSucceeded,Se.updateFetchVouchersRequestedStatus,d.a.mark(Ie)),_e=d.a.mark(we);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(e){var t,r,n,a,c,s,o,u,i,l,f,h,O;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.shopId,n=t.voucherId,a=t.voucherCode,c=t.messageId,s=t.isWebview,o=t.source,d.next=3,Object(p.select)(Object(b.getMessageSelector)(c));case 3:return u=d.sent,i=u.textContent,d.prev=5,d.next=8,Object(p.call)(b.fetch,{method:"PUT",resource:"vouchers",suffix:"claim",payload:JSON.stringify({shop_id:r,voucher_code:a,source:o,id:n})});case 8:return d.next=10,Object(p.put)(Object(b.updateRecord)({name:"vouchers",id:n,record:{claimed:!0}}));case 10:if(s){d.next=13;break}return d.next=13,Object(p.put)(Object(b.updateRecord)({name:"messages",id:c,record:{textContent:ye(ye({},i),{},{claimed:!0})}}));case 13:return l=Object(b.getToastInformation)(!0,{type:"claim-voucher"}),d.next=16,Object(p.put)(Object(b.setToastInformation)({toast:l}));case 16:d.next=40;break;case 18:if(d.prev=18,d.t0=d.catch(5),!(f=d.t0.message&&d.t0.message.error_code)){d.next=37;break}d.t1=f,d.next="voucher_expired"===d.t1?25:"voucher_stock_out"===d.t1?27:"voucher_already_claimed"===d.t1?29:31;break;case 25:return h={status:"finished"},d.abrupt("break",31);case 27:return h={stock_out:!0},d.abrupt("break",31);case 29:return h={claimed:!0},d.abrupt("break",31);case 31:if(!h){d.next=37;break}return d.next=34,Object(p.put)(Object(b.updateRecord)({name:"vouchers",id:n,record:ye({},h)}));case 34:if(s){d.next=37;break}return d.next=37,Object(p.put)(Object(b.updateRecord)({name:"messages",id:c,record:{textContent:ye(ye({},i),h)}}));case 37:return O=Object(b.getToastInformation)(!1,{type:"claim-voucher"}),d.next=40,Object(p.call)(b.setToastInformationSaga,Object(b.setToastInformation)({toast:O}));case 40:case"end":return d.stop()}}),ge,null,[[5,18]])}function we(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.takeLatest)(me,Ie);case 2:case"end":return e.stop()}}),_e)}var ke,xe={watcher:[we]};r("DNiP"),r("L9s1"),r("Z2Ku"),r("V+eJ"),r("f3/d");function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Te=d.a.mark(Qe),Me=d.a.mark(Ke),De=d.a.mark(Be),Pe=d.a.mark(Ye),Ae=Object(l.a)({INIT_PACKS:function(e){return{region:e.region,packs:e.packs,status:e.status}},INIT_STICKERS:function(e){return{region:e.region,sticker:e.sticker,icon:e.icon}},SELECT_STICKER:function(e){return{sticker:e.sticker,page:e.page}},UPDATE_CURRENT_STICKER:function(e){return{region:e.region,sticker:e.sticker,page:e.page}},FETCH_SINGLE_STICKER_REQUESTED:function(e){return{sticker:e.sticker}},FETCH_SINGLE_STICKER_SUCCEEDED:function(e){return{region:e.region,sticker:e.sticker,stickerIds:e.stickerIds,status:e.status}},UPDATE_FETCH_PACKS_REQUESTED_STATUS:function(e){return{region:e.region,status:e.status}},UPDATE_FETCH_STICKERS_REQUESTED_STATUS:function(e){return{region:e.region,sticker:e.sticker,status:e.status}},FETCH_STICKERS_REQUESTED:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.region;return{region:t}}}),Ne=Ae.initPacks,Ue=Ae.initStickers,Fe=Ae.selectSticker,Le=Ae.updateCurrentSticker,qe=Ae.fetchSingleStickerRequested,Ge=Ae.fetchSingleStickerSucceeded,He=Ae.updateFetchPacksRequestedStatus,We=Ae.updateFetchStickersRequestedStatus,Ve=Ae.fetchStickersRequested;function Qe(e){var t,r,n,a,c,s,o,u,i,l,O;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,r=(t=void 0===t?{}:t).region,d.prev=3,r){d.next=11;break}return d.next=7,Object(p.select)(b.currentConversationShopSelectors);case 7:n=d.sent,a=n.country,r=(void 0===a?"sg":a).toLowerCase();case 11:return d.next=13,Object(p.select)(h.q);case 13:if((c=d.sent)!==f.DataFetchStatus.INIT_PENDING&&c!==f.DataFetchStatus.SUCCEED){d.next=16;break}return d.abrupt("return",null);case 16:return d.next=18,Object(p.put)(He({region:r,status:f.DataFetchStatus.INIT_PENDING}));case 18:return d.next=20,Object(p.call)(b.fetch,{server:Object(f.stickersURI)(r),namespace:"",version:"",credentials:"omit",resource:"manifest",extension:"json"});case 20:return s=d.sent,o=s.packs,u=o.reduce((function(e,t){return e.concat(t.reg.includes(r.toUpperCase())?t.pid:[])}),[]),i=u.map((function(e){return Object(p.put)(Ue({region:r,sticker:e}))})),d.next=26,Object(p.all)(i);case 26:return l=u.map((function(e){return{id:e,icon:"https://".concat(Object(f.stickersURI)(r),"/packs/").concat(e,"/icon@2x.png")}})),d.next=29,Object(p.put)(Ne({region:r,packs:l,status:f.DataFetchStatus.SUCCEED}));case 29:if(!(u.length>0)){d.next=33;break}return O=u[0],d.next=33,Object(p.put)(Fe({sticker:O}));case 33:d.next=39;break;case 35:return d.prev=35,d.t0=d.catch(3),d.next=39,Object(p.put)(He({region:r,status:f.DataFetchStatus.INIT_FAILED}));case 39:case"end":return d.stop()}}),Te,null,[[3,35]])}function Ke(e){var t,r,n,a,c,s,o,u,i,l;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload.sticker,d.next=3,Object(p.select)(b.currentConversationShopSelectors);case 3:return r=d.sent,n=r.country,a=(void 0===n?"sg":n).toLowerCase(),d.prev=7,d.next=10,Object(p.put)(We({region:a,sticker:t,status:f.DataFetchStatus.INIT_PENDING}));case 10:return d.next=12,Object(p.call)(b.fetch,{server:Object(f.stickersURI)(a),namespace:"",version:"",credentials:"omit",resource:"packs",id:"".concat(t,"/").concat(t),extension:"json"});case 12:return c=d.sent,d.next=15,Object(p.select)(b.currentUserSelector);case 15:return s=d.sent,o=s.locale,u=c.locales.indexOf(o),i=t,c.stickers.forEach((function(e){e.src="https://".concat(Object(f.stickersURI)(a),"/packs/").concat(i,"/").concat(e.sid,"@1x.").concat(e.ext),e.locale=e.name[u],e.pid=i,e.id="".concat(e.pid,"_").concat(e.sid)})),l=Object(b.normalize)("stickers",c.stickers),d.next=23,Object(p.put)(Object(b.updateEntities)({entities:l.entities}));case 23:return d.next=25,Object(p.put)(Ge({region:a,sticker:t,stickerIds:l.result,status:f.DataFetchStatus.SUCCEED}));case 25:d.next=32;break;case 27:return d.prev=27,d.t0=d.catch(7),console.error(d.t0),d.next=32,Object(p.put)(We({region:a,sticker:t,status:f.DataFetchStatus.INIT_FAILED}));case 32:case"end":return d.stop()}}),Me,null,[[7,27]])}function Be(e){var t,r,n,a,c,s,o;return d.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.sticker,n=t.page,u.prev=1,u.next=4,Object(p.select)(b.currentConversationShopSelectors);case 4:return a=u.sent,c=a.country,s=(void 0===c?"sg":c).toLowerCase(),u.next=10,Object(p.put)(Le({region:s,sticker:r,page:n}));case 10:return u.next=12,Object(p.select)(h.t);case 12:if((o=u.sent)!==f.DataFetchStatus.INIT_PENDING&&o!==f.DataFetchStatus.SUCCEED){u.next=15;break}return u.abrupt("return",null);case 15:return u.next=17,Object(p.put)(qe({sticker:r}));case 17:u.next=21;break;case 19:u.prev=19,u.t0=u.catch(1);case 21:case"end":return u.stop()}}),De,null,[[1,19]])}function Ye(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.takeEvery)(Ve,Qe);case 2:return e.next=4,Object(p.takeEvery)(qe,Ke);case 4:return e.next=6,Object(p.takeEvery)(Fe,Be);case 6:case"end":return e.stop()}}),Pe)}var Je=(ke={},o()(ke,Ue,(function(e,t){var r=t.payload,n=r.region,a=r.sticker,c=r.icon,s=e[n]||{},u=s.stickers||{};return Re(Re({},e),{},o()({},n,Re(Re({},s),{},{stickers:Re(Re({},u),{},o()({},a,{icon:c,stickerIds:[],status:f.DataFetchStatus.NORMAL}))})))})),o()(ke,Ge,(function(e,t){var r=t.payload,n=r.region,a=r.sticker,c=r.stickerIds,s=r.status,u=e[n]||{},i=u.stickers||{},d=i[a]||{};return Re(Re({},e),{},o()({},n,Re(Re({},u),{},{stickers:Re(Re({},i),{},o()({},a,Re(Re({},d),{},{stickerIds:c,status:s})))})))})),o()(ke,We,(function(e,t){var r=t.payload,n=r.region,a=r.sticker,c=r.status,s=e[n]||{},u=s.stickers||{},i=u[a]||{};return Re(Re({},e),{},o()({},n,Re(Re({},s),{},{stickers:Re(Re({},u),{},o()({},a,Re(Re({},i),{},{status:c})))})))})),o()(ke,Le,(function(e,t){var r=t.payload,n=r.region,a=r.sticker,c=r.page,s=void 0===c?1:c,u=e[n]||{};return Re(Re({},e),{},o()({},n,Re(Re({},u),{},{currentSticker:a,currentStickerPage:s})))})),o()(ke,Ne,(function(e,t){var r=t.payload,n=r.region,a=r.packs,c=void 0===a?[]:a,s=r.status,u=e[n]||{};return Re(Re({},e),{},o()({},n,Re(Re({},u),{},{packs:c,packHttpStatus:s})))})),o()(ke,He,(function(e,t){var r=t.payload,n=r.region,a=r.status,c=e[n]||{};return Re(Re({},e),{},o()({},n,Re(Re({},c),{},{packHttpStatus:a})))})),ke);function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Xe,Ze={watcher:[Ye],reducer:Object(u.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Je),{})},$e=r("TWnD"),et=(r("LK8F"),r("peh1"));function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nt,at=function(e){return e.mediaPreviewerReducer.mediaMap},ct=Object(et.createSelector)(b.currentConversationIdSelector,at,(function(e,t){return t[e]||[]})),st=Object(l.a)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),ot=st.addMediaFile,ut=st.deleteMediaFile,it=st.clearMediaFile,dt=(Xe={},o()(Xe,ot,(function(e,t){var r=t.payload,n=r.medias,a=r.conversationId,c=e.mediaMap,s=(c[a]||[]).concat(Array.isArray(n)?n:[n]);return rt(rt({},e),{},{mediaMap:rt(rt({},c),{},o()({},a,s))})})),o()(Xe,ut,(function(e,t){var r=t.payload,n=r.id,a=r.conversationId,s=e.mediaMap,u=c()(s[a])||[];return u.splice(n,1),rt(rt({},e),{},{mediaMap:rt(rt({},s),{},o()({},a,u))})})),o()(Xe,it,(function(e,t){var r=t.payload.conversationId,n=e.mediaMap;return rt(rt({},e),{},{mediaMap:rt(rt({},n),{},o()({},r,[]))})})),Xe),lt={reducer:Object(u.a)(rt({},dt),{mediaMap:{}})};function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ft,bt=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},ht=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},Ot=Object(l.a)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){}}),vt=Ot.showMediaPreviewModalRequested,Et=Ot.closeMediaPreviewModalRequested,St=(nt={},o()(nt,vt,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),o()(nt,Et,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),nt),mt={reducer:Object(u.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},St),{showMediaPreviewModal:!1,currentPreviewMediaId:null})};function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jt=d.a.mark(Tt),yt=d.a.mark(Mt),It=Object(l.a)({FETCH_MESSAGE_SHORTCUTS_GROUP_REQUESTED:function(e){var t=e.shopId,r=e.groupType;return{shopId:t,groupType:void 0===r?1:r}},UPDATE_FETCH_MESSAGE_SHORTCUTS_GROUP_STATUS:function(e){return{groupType:e.groupType,status:e.status}},FETCH_MESSAGE_SHORTCUTS_GROUP_SUCCEEDED:function(e){return{groupType:e.groupType,groups:e.groups,status:e.status}},SET_CURRENT_GROUP_TYPE:function(e){return{currentGroupType:e.currentGroupType}},SET_CURRENT_GROUP_ID:function(e){return{groupType:e.groupType,currentGroupId:e.currentGroupId}}}),wt=It.fetchMessageShortcutsGroupRequested,kt=It.updateFetchMessageShortcutsGroupStatus,xt=It.fetchMessageShortcutsGroupSucceeded,Ct=It.setCurrentGroupType,Rt=It.setCurrentGroupId;function Tt(e){var t,r,n,a,c,s,o;return d.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.shopId,n=t.groupType,u.prev=1,u.next=4,Object(p.put)(kt({groupType:n,status:f.DataFetchStatus.INIT_PENDING}));case 4:return u.next=6,Object(b.fetch)({parent:"message_shortcuts",resource:"groups",params:{shop_id:r,group_type:n}});case 6:return a=u.sent,c=a.groups,s=(void 0===c?[]:c).filter((function(e){return"enabled"===e.state})),u.next=12,Object(p.put)(xt({groupType:n,groups:s,status:f.DataFetchStatus.SUCCEED}));case 12:if(!(o=s?s[0]:null)){u.next=16;break}return u.next=16,Object(p.put)(Rt({groupType:n,currentGroupId:o.id}));case 16:u.next=22;break;case 18:return u.prev=18,u.t0=u.catch(1),u.next=22,Object(p.put)(kt({groupType:n,status:f.DataFetchStatus.INIT_FAILED}));case 22:case"end":return u.stop()}}),jt,null,[[1,18]])}function Mt(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.takeEvery)(wt,Tt);case 2:case"end":return e.stop()}}),yt)}var Dt={watcher:[Mt],reducer:Object(u.a)((ft={},o()(ft,xt,(function(e,t){var r=t.payload,n=r.groupType,a=r.groups,c=r.status;return _t(_t({},e),{},o()({},n,{groups:a,status:c}))})),o()(ft,kt,(function(e,t){var r=t.payload,n=r.groupType,a=r.status,c=e[n];return _t(_t({},e),{},o()({},n,_t(_t({},c),{},{status:a})))})),o()(ft,Ct,(function(e,t){var r=t.payload.currentGroupType;return _t(_t({},e),{},{currentGroupType:r})})),o()(ft,Rt,(function(e,t){var r=t.payload,n=r.groupType,a=r.currentGroupId,c=e[n];return _t(_t({},e),{},o()({},n,_t(_t({},c),{},{currentGroupId:a})))})),ft),{currentGroupType:1})};r.d(t,"reducerMap",(function(){return Pt})),r.d(t,"sagas",(function(){return At})),r.d(t,"fetchOrdersRequested",(function(){return j})),r.d(t,"fetchAllOrdersRequested",(function(){return _})),r.d(t,"replyOfferRequested",(function(){return U})),r.d(t,"selectSticker",(function(){return Fe})),r.d(t,"fetchStickersRequested",(function(){return Ve})),r.d(t,"fetchStickersRequestedSaga",(function(){return Qe})),r.d(t,"fetchProductsRequested",(function(){return ae})),r.d(t,"updateSelectedProductTab",(function(){return le})),r.d(t,"fetchAllProductsRequested",(function(){return pe})),r.d(t,"claimVoucherRequested",(function(){return me})),r.d(t,"handleSensitiveUrl",(function(){return $e.s})),r.d(t,"deleteConversationMessageHash",(function(){return $e.f})),r.d(t,"messageSyncUpdate",(function(){return $e.t})),r.d(t,"showMyRateCard",(function(){return $e.Y})),r.d(t,"showRateCard",(function(){return $e.Z})),r.d(t,"evaluationRequested",(function(){return $e.i})),r.d(t,"watchEvaluation",(function(){return $e.lb})),r.d(t,"sendMessagesFailedByOffline",(function(){return $e.M})),r.d(t,"resetMessagesFailedByOffline",(function(){return $e.D})),r.d(t,"resendOfflineMessagesOnce",(function(){return $e.z})),r.d(t,"resendOfflineMessagesOnceSucceed",(function(){return $e.A})),r.d(t,"updateResendConversationMessage",(function(){return $e.fb})),r.d(t,"watchOffline",(function(){return $e.pb})),r.d(t,"resendMessageRequested",(function(){return $e.y})),r.d(t,"watchResend",(function(){return $e.ub})),r.d(t,"sendMessagesRequested",(function(){return $e.N})),r.d(t,"sendMessagesSucceeded",(function(){return $e.O})),r.d(t,"sendingMessages",(function(){return $e.R})),r.d(t,"sendMessagesToPending",(function(){return $e.P})),r.d(t,"sendMessagesFailed",(function(){return $e.L})),r.d(t,"abortAllSendingMessages",(function(){return $e.a})),r.d(t,"cancelSendingMessageRequested",(function(){return $e.b})),r.d(t,"cancelSendingMessageSucceeded",(function(){return $e.c})),r.d(t,"sendVideoMessageRequested",(function(){return $e.Q})),r.d(t,"sendMessages",(function(){return $e.K})),r.d(t,"handleSendSucceededMessages",(function(){return $e.r})),r.d(t,"watchSendWithCancel",(function(){return $e.wb})),r.d(t,"watchSend",(function(){return $e.vb})),r.d(t,"populateMessageRequested",(function(){return $e.u})),r.d(t,"getPopulateContent",(function(){return $e.p})),r.d(t,"watchPopulate",(function(){return $e.rb})),r.d(t,"fetchMessagesRequested",(function(){return $e.l})),r.d(t,"fetchMessagesSucceeded",(function(){return $e.o})),r.d(t,"updateFetchMessagesRequestedStatus",(function(){return $e.db})),r.d(t,"updatePreloadedMessages",(function(){return $e.eb})),r.d(t,"deletePreloadedMessages",(function(){return $e.g})),r.d(t,"fetchMessagesRequestedWithPreloadSaga",(function(){return $e.n})),r.d(t,"fetchMessagesRequestedSaga",(function(){return $e.m})),r.d(t,"watchFetchMessage",(function(){return $e.nb})),r.d(t,"receiveMessageRequested",(function(){return $e.v})),r.d(t,"receiveMessageSucceeded",(function(){return $e.w})),r.d(t,"resetNewConversationQueue",(function(){return $e.E})),r.d(t,"resetOldConversationQueue",(function(){return $e.F})),r.d(t,"resetConversationQueue",(function(){return $e.B})),r.d(t,"watchNewConversationMessageQueue",(function(){return $e.ob})),r.d(t,"watchOldConversationMessageQueue",(function(){return $e.qb})),r.d(t,"handleCurrentConversationChange",(function(){return $e.q})),r.d(t,"watchReceive",(function(){return $e.sb})),r.d(t,"translateMessagesRequested",(function(){return $e.ab})),r.d(t,"changeTranslateStatus",(function(){return $e.d})),r.d(t,"watchTranslate",(function(){return $e.xb})),r.d(t,"replaceHttpLinkWithHttps",(function(){return $e.x})),r.d(t,"updateVideoInfo",(function(){return $e.gb})),r.d(t,"deleteVideoInfo",(function(){return $e.h})),r.d(t,"uploadMonitor",(function(){return $e.hb})),r.d(t,"uploadVideoGetToken",(function(){return $e.kb})),r.d(t,"uploadVideGetResult",(function(){return $e.ib})),r.d(t,"uploadVideo",(function(){return $e.jb})),r.d(t,"fetchFaqMessagesRequested",(function(){return $e.j})),r.d(t,"fetchFaqMessagesSucceeded",(function(){return $e.k})),r.d(t,"updateFetchFaqMessagesRequestedStatus",(function(){return $e.cb})),r.d(t,"updateCurrentFaqId",(function(){return $e.bb})),r.d(t,"showFaqHistoryModal",(function(){return $e.X})),r.d(t,"watchFaqHistorySagas",(function(){return $e.mb})),r.d(t,"setReplyToMessage",(function(){return $e.V})),r.d(t,"resetReplyToMessage",(function(){return $e.G})),r.d(t,"scrollToMessage",(function(){return $e.I})),r.d(t,"setScrollToMessageId",(function(){return $e.W})),r.d(t,"resetScrollToMessageId",(function(){return $e.H})),r.d(t,"setInScrollToMessage",(function(){return $e.U})),r.d(t,"setCurrentConversationReplyToMessage",(function(){return $e.S})),r.d(t,"resetCurrentConversationReplyToMessage",(function(){return $e.C})),r.d(t,"scrollToMessageSaga",(function(){return $e.J})),r.d(t,"watchReplySaga",(function(){return $e.tb})),r.d(t,"setEntryPoint",(function(){return $e.T})),r.d(t,"mediaMapSelector",(function(){return at})),r.d(t,"mediaListSelector",(function(){return ct})),r.d(t,"addMediaFile",(function(){return ot})),r.d(t,"deleteMediaFile",(function(){return ut})),r.d(t,"clearMediaFile",(function(){return it})),r.d(t,"showMediaPreviewModalSelector",(function(){return bt})),r.d(t,"currentPreviewMediaIdSelector",(function(){return ht})),r.d(t,"showMediaPreviewModalRequested",(function(){return vt})),r.d(t,"closeMediaPreviewModalRequested",(function(){return Et})),r.d(t,"fetchMessageShortcutsGroupRequested",(function(){return wt})),r.d(t,"updateFetchMessageShortcutsGroupStatus",(function(){return kt})),r.d(t,"fetchMessageShortcutsGroupSucceeded",(function(){return xt})),r.d(t,"setCurrentGroupType",(function(){return Ct})),r.d(t,"setCurrentGroupId",(function(){return Rt}));var Pt={orderReducer:M.reducer,productReducer:Ee.reducer,stickerReducer:Ze.reducer,messageReducer:$e.e.reducer,mediaPreviewerReducer:lt.reducer,mediaPreviewModalReducer:mt.reducer,messageShortcutGroupReducer:Dt.reducer},At=[].concat(c()(M.watcher),c()(Q.watcher),c()(Ze.watcher),c()(Ee.watcher),c()(xe.watcher),c()($e.e.watcher),c()(Dt.watcher))},O8oF:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),c=r("17x9"),s=r.n(c),o=r("SUBy"),u=r("WBRc"),i=r("AlKw"),d=r.n(i),l=r("tvxL"),p=function(e){var t=e.style,r=e.conversation,n=e.keyword,c=e.isSubAccount,s=e.onClick,i=e.shopFilter,p=r.avatar,f=r.avatar_hash,b=r.to_name,h=r.shop_name,O=r.id;return a.a.createElement("div",{style:t,className:d.a.root,onClick:function(){Object(l.clickTracker)({trackerName:"clickSearchNameResult",data:{conversation_id:O}}),s(r)}},a.a.createElement("div",{className:d.a.avatar},a.a.createElement(o.a,{avatar:p,avatarHash:f})),a.a.createElement("div",{className:d.a.wrapper},a.a.createElement("div",{className:d.a.username},a.a.createElement(u.a,{highlightClassName:d.a.keyword,searchWords:n,textToHighlight:b})),c&&!i&&a.a.createElement("div",{className:d.a.shop},a.a.createElement("div",{className:d.a.text,title:h},h))))};p.propTypes={style:s.a.object,conversation:s.a.object,keyword:s.a.string,shopFilter:s.a.object,isSubAccount:s.a.bool,onClick:s.a.func.isRequired},t.a=p},Ogvq:function(e,t,r){"use strict";r.r(t);var n=r("ANjH"),a=r("Nz8i"),c=r("5fBF"),s=r("rRWa"),o=r("RIqP"),u=r.n(o),i=(r("bWfx"),r("o0o1")),d=r.n(i),l=r("5rFJ"),p=r("tvxL"),f=(r("RW0V"),r("ioFf"),r("0l/t"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/"),r("lSNA")),b=r.n(f),h=r("J4zp"),O=r.n(h),v=(r("DNiP"),r("/8Fb"),r("L9s1"),r("Z2Ku"),r("FH7K"));function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=Object(v.a)({REDUX_RESET:function(){return{}}}).reduxReset,g=d.a.mark(j),_=d.a.mark(y);function j(e){var t;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload.resource,r.t0="login"===t,!r.t0){r.next=5;break}return r.next=5,Object(l.put)(Object(p.updateChatEntryStatus)({showEntry:!0}));case 5:return r.next=7,Object(l.put)(Object(p.updateLoginSuccessStatus)({loginSuccess:!1}));case 7:return r.next=9,Object(l.put)(Object(p.forceLogoutRequested)());case 9:case"end":return r.stop()}}),g)}function y(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(p.handle401ErrorRequested,j);case 2:case"end":return e.stop()}}),_)}var I=r("7i0w"),w=d.a.mark(C),k={blacklist:["modalReducer","userReducer"]},x={modalReducer:p.modalReducer,userReducer:p.userReducer,shopReducer:p.shopReducer,toastReducer:p.toastReducer,draftReducer:p.draftReducer,entityReducer:p.entityReducer,socketReducer:p.socketReducer,settingsReducer:p.settingsReducer,unreadCountReducer:p.unreadCountReducer,conversationReducer:p.conversationReducer,translatePreferenceReducer:p.translatePreferenceReducer,agentConversationReducer:p.agentConversationReducer,reportReducer:p.reportReducer};function C(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)("@@Internal/ModuleManager/ModuleAdded",d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.payload,Object(I.register)(r);case 2:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),w)}var R=d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.all)([C,y].concat(u()(p.watchUserSagas),u()(p.watchShopSagas),u()(p.watchToastSagas),u()(p.watchSocketSagas),u()(p.watchUnreadSagas),u()(p.watchTranslationSagas),u()(p.watchConversationSagas),u()(p.watchReportSagas),[I.watchModuleCenterChannel]).map(l.call));case 2:case"end":return e.stop()}}),e)})),T=r("XnKn"),M=d.a.mark(D);function D(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.put)(Object(p.setChatSource)({isScChat:Object(T.getChatSource)()}));case 3:return t.next=5,Object(l.call)(p.login);case 5:if(e=t.sent,e.user){t.next=11;break}return t.next=10,Object(l.put)(Object(p.updateLoginSuccessStatus)({loginSuccess:!1}));case 10:return t.abrupt("return");case 11:return t.next=13,Object(l.put)(Object(p.updateLoginSuccessStatus)({loginSuccess:!0}));case 13:return t.next=15,Object(l.call)(p.handleLoginSucceeded,e);case 15:return t.next=17,Object(l.put)(Object(p.updateUnreadCount)({type:p.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT,source:T.UnreadSource.PRELOAD}));case 17:return t.next=19,Object(l.spawn)(p.fetchConversationsRequestedSaga,{payload:{direction:"reset"}});case 19:t.next=26;break;case 21:return t.prev=21,t.t0=t.catch(0),console.error("[Load Chat Failed]\n",t.t0),t.next=26,Object(l.put)(Object(p.updateLoginSuccessStatus)({loginSuccess:!1}));case 26:case"end":return t.stop()}}),M,null,[[0,21]])}r.d(t,"store",(function(){return N})),Object(p.initMDAPSdk)();var P=Object(s.default)(),A=Object(n.applyMiddleware)(P),N=Object(a.createStore)({advancedCombineReducers:function(e){return Object(n.combineReducers)(function(e,t){return Object.entries(t).reduce((function(t,r){var n=O()(r,2),a=n[0],c=n[1];return S(S({},t),{},b()({},a,(function(t,r){return r.type!=="".concat(m)||e.blacklist.includes(a)||(t=void 0),c(t,r)})))}),{})}(k,e))},enhancers:[A],extensions:[Object(c.getSagaExtension)()]},{id:"root",reducerMap:x}),U=P.run(R);P.run(D);!function e(){U.toPromise().catch((function(t){U.cancel(),U=P.run(R),e()}))}()},"SmG+":function(e,t,r){"use strict";r.d(t,"e",(function(){return y})),r.d(t,"c",(function(){return I})),r.d(t,"g",(function(){return N})),r.d(t,"f",(function(){return F})),r.d(t,"a",(function(){return L})),r.d(t,"d",(function(){return q})),r.d(t,"b",(function(){return G}));r("mYba"),r("jm62"),r("WLL4"),r("HAE/");var n=r("RIqP"),a=r.n(n),c=r("J4zp"),s=r.n(c),o=r("lSNA"),u=r.n(o),i=r("o0o1"),d=r.n(i),l=(r("0l/t"),r("L9s1"),r("Z2Ku"),r("8+KV"),r("/8Fb"),r("LK8F"),r("T39b"),r("XfO3"),r("Btvt"),r("yt8O"),r("rGqo"),r("RW0V"),r("dRSK"),r("INYr"),r("bWfx"),r("ioFf"),r("HEwt"),r("dZ+Y"),r("KKXr"),r("eM6i"),r("YJVH"),r("5rFJ")),p=r("TWnD"),f=r("tvxL"),b=r("XnKn"),h=r("xk4V"),O=r.n(h),v=d.a.mark(w),E=d.a.mark(C),S=d.a.mark(R),m=d.a.mark(N);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=["product","order","offer","voucher","feed_story","unrated_order_reminder","bundle_message"],y=function(e,t,r,n){if(0===e.length)return t;if(r||"latest"===n)return e=e.filter((function(e){return!t.includes(e)})),t.concat(e);var a=t.filter((function(t){return!e.includes(t)}));return e.concat(a)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,a=t.updateMessageOption,c=void 0===a||a,s=e||{},o=s.created_timestamp,u=s.message_option,i=n?{max_general_option_hide_time:o}:{},d=c?{last_message_option:u}:{};return _(_({},i),d)};function w(e){var t,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],r=[],Object.entries(e).forEach((function(e){var t=s()(e,2),n=t[0],c=t[1];Array.isArray(c)?r.push(Object(l.call)(p.p,n,a()(new Set(c)))):Object.entries(c).forEach((function(e){var t=s()(e,2),c=t[0],o=t[1];r.push(Object(l.call)(p.p,n,{shopId:c,id:a()(new Set(o))}))}))})),n.next=5,Object(l.all)(r);case 5:return n.sent.forEach((function(e){var r=Object(f.normalize)("voucher_web"===e.type?"vouchers":Object(b.camelCase)(e.type),e.content);t.push(Object(l.put)(Object(f.updateEntities)({entities:r.entities})))})),n.next=9,Object(l.all)(t);case 9:case"end":return n.stop()}}),v)}function k(e,t,r,n){var c=[],o={sourceInfo:r,contentInfo:n},u=t.filter((function(e){return"shops"===e.type}));return Object.keys(o).forEach((function(r){Object.entries(o[r]).forEach((function(n){var a=s()(n,2),o=a[0],i=a[1];Object.entries(i).forEach((function(n){var a=s()(n,2),i=a[0],d=a[1];c=c.concat(d);var l=t.find((function(e){return e.type===o&&e.content&&parseInt(e.content.id+"")===parseInt(i)}));d.forEach((function(t){switch(r){case"sourceInfo":if(e[t].sourceContent=l,l){var n=u.findIndex((function(e){return[l.content.shop_id,l.content.id].includes(e.content.id)}));e[t].shopContent=-1!==n?u[n]:{}}else e[t].shopContent={};break;case"contentInfo":e[t].textContent=l&&l.content||{}}}))}))}))})),a()(new Set(c))}function x(e,t){var r={},n=[],c=[],s=[];return t.forEach((function(e){var t=e.content,a=t.id,c=t.result,s=t.fetchStatus;r[a]=c,"failed"===s&&n.push(a)})),e.forEach((function(e,t){"shopping_cart"===e.type&&r[e.id]&&(e.textContent=r[e.id],c.push(t)),n.includes(e.id)&&s.push(t)})),[a()(new Set(c)),a()(new Set(s))]}function C(e,t){var r,n,a,c,o,u;return d.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=[],Object.entries(t).forEach((function(e){var t=s()(e,2),n=t[0],a=t[1];r.push(Object(l.call)(p.p,"shopping_cart",{id:n,cartItems:a}))})),i.next=4,Object(l.all)(r);case 4:n=i.sent,a=x(e,n),c=s()(a,2),o=c[0],u=c[1],e.forEach((function(e,t){o.includes(t)&&(e.fetchStatus="done"),u.includes(t)&&(e.fetchStatus="failed")}));case 7:case"end":return i.stop()}}),E)}function R(e,t){var r,n,c,o,u,i,b,h,O,v,E,m;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(r=t.merge,n=t.source,c=t.content,o=t.sourceShops,u=t.webviews,i=t.cartReminders,d.t0=Object.keys(u).length,!d.t0){d.next=5;break}return d.next=5,Object(l.fork)(w,u);case 5:return b=[],Object.entries(r).forEach((function(e){var t,r=s()(e,2),n=r[0],c=r[1];(t=b).push.apply(t,a()(c.map((function(e){return Object(l.call)(p.p,n,e)}))))})),h=Array.from(new Set(o)).map((function(e){return Object(l.call)(p.p,"shops",e)})),b=b.concat(h),d.next=11,Object(l.all)(b);case 11:if(O=d.sent,v=k(e,O,n,c),e.filter((function(e,t){return v.includes(t)})).forEach((function(e){e.fetchStatus="done"})),d.t1=Object.keys(i).length,!d.t1){d.next=18;break}return d.next=18,Object(l.call)(C,e,i);case 18:return e[0]&&window.clickedConversationId===e[0].conversation_id&&(window.populateMessageConversationId=window.clickedConversationId),(E=a()(e)).forEach((function(t){var r=t.quoted_msg;if(r){var n=e.find((function(e){return e.id===r.id}));n&&(t.quoted_msg=n)}})),m=Object(f.normalize)("messages",E),d.next=24,Object(l.put)(Object(f.updateEntities)({name:"messages",entities:m.entities}));case 24:case"end":return d.stop()}}),S)}b.MessageTypes.MSG_TYPE_OFFER,b.MessageTypes.MSG_TYPE_ORDER;var T=b.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,M=b.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,D=function(e,t,r){return e.some((function(e){return e[t]===r}))},P=function(e,t,r,n){!e[t][r]&&(e[t][r]={}),!e[t][r][n]&&(e[t][r][n]=[]),!e.merge[r]&&(e.merge[r]=[])},A=function(e,t,r){var n={source:{},content:{},merge:{},sourceShops:[],webviews:{},cartReminders:{}};return t.forEach((function(t,a){var c=t.id,s=t.source_type,o=t.source_content,u=void 0===o?{}:o,i=t.type,d=t.content,l=void 0===d?{}:d,p=t.hasPopulated,f=!e[c]||!e[c].fetchStatus;if(s&&u){var h=u["".concat(s,"_id")];if(h&&![-1,0].includes(h)){var O=u.shop_id;P(n,"source",s,h),r&&n.sourceShops.push(O),n.source[s][h].push(a),f&&(t.fetchStatus="pendingSource"),D(n.merge[s],"id",h)||n.merge[s].push({id:h,shopId:O})}}if(j.includes(i)&&l){f&&(t.fetchStatus="pendingSource"===t.fetchStatus?"pendingCardAndSource":"pendingCard");var v=l.shop_id,E=function(e){var t=e.type,r=e.content,n=e.id;return t===T?r.order_id:t===M?n:r["".concat(t,"_id")]}(t),S=l.creator_id,m=l.messages;P(n,"content",i,E),n.content[i][E].push(a),D(n.merge[i],"id",E)||n.merge[i].push({id:E,shopId:v,creatorId:S,faqMessageIds:m})}else if("webview"===i){var g=l.url,y=void 0===g?"":g,I=y.split("/"),w=I[I.length-2],k="rate_cards"===(w="voucher"===w?"".concat(w,"_web"):w)?Object(b.getUrlParam)("id",y):parseInt(Object(b.getUrlParam)("id",y)),x=Object(b.getUrlParam)("shop_id",y);t.content=_(_({},l),{},{id:k,type:w}),p||(x&&(P(n,"webviews",w,x),n.webviews[w][x].push(k)),x||(P(n,"webviews",w,"0"),n.webviews[w][0].push(k)),t.content.fetchStatus="pendingCard")}else if("shopping_cart"===i){var C=t.content.cart_items,R=t.id;t.fetchStatus="pendingCard",n.cartReminders[R]=C}})),n};function N(e,t,r){var n,a,c,s,o=arguments;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>3&&void 0!==o[3]&&o[3],t.next=3,Object(l.select)((function(e){return e.entityReducer}));case 3:return a=t.sent,c=a.messages,t.next=7,Object(l.call)(A,c,e,r);case 7:if(s=t.sent,!n){t.next=13;break}return t.next=11,Object(l.call)(R,e,s);case 11:t.next=15;break;case 13:return t.next=15,Object(l.spawn)(R,e,s);case 15:case"end":return t.stop()}}),m)}var U={1:"product_entry_point",2:"order_entry_point",3:"shop_entry_point",8:"product_inactive_seller",10:"lowest_price_guaranteed",11:"poor_fulfilment"},F=function(e){var t=e.id,r=e.recipientID,n=e.message,a=e.isSubAccount,c=e.redirectInfo,s=e.conversationId,o=e.entryPoint,u=e.replyToMessageId,i=t||O()(),d=n.content,l=n.type,p=n.shopId,f={id:i,type:l,content:d,isFaking:n.isFaking,to_id:r,request_id:i,created_timestamp:Math.floor(Date.now()/1e3),chat_send_option:{force_send_cancel_order_warning:!1,comply_cancel_order_warning:!1}};if(u&&(f.content=_(_({},f.content),{},{quoted_msg_id:u})),a&&(f.shop_id=p),o&&o.type&&o.conversationId===s?f.entry_point=U[o.type]:f.entry_point="direct_chat_entry_point",c){var b=c.orderId,h=c.productId,v=c.conversationId,E=c.shopId;if(parseInt(s)===parseInt(v)){if(b){var S=parseInt(b);f=_(_({},f),{},{order_id:S,source_content:{order_id:S,shop_id:E},source_type:"order"})}if(h){var m=parseInt(h);f=_(_({},f),{},{product_id:m,source_content:{product_id:m,shop_id:E},source_type:"product"})}}}return f},L=function(e,t){return e.length===t.length&&e.every((function(e,r){var n=t[r];return JSON.stringify(e)===JSON.stringify(n)}))},q=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}},G=function(e,t){return e===t?0:Object(b.greaterThan)(e,t)?1:-1}},TWnD:function(e,t,r){"use strict";r("RW0V"),r("ioFf"),r("0l/t"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/");var n,a=r("lSNA"),c=r.n(a),s=r("e7SQ"),o=r("1o5h"),u=r("oIQF"),i=r("r9ex"),d=r("W7uR"),l=r("o0o1"),p=r.n(l),f=r("FH7K"),b=r("5rFJ"),h=r("XnKn"),O=r("tvxL"),v=r("4l3w"),E=p.a.mark(x),S=p.a.mark(C),m=p.a.mark(R),g=p.a.mark(T);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=Object(f.a)((n={},c()(n,v.a.TRANSLATE_MESSAGES_REQUESTED,(function(e){return{messageId:e.messageId,shopId:e.shopId,conversationId:e.conversationId,toggle:e.toggle,targetLang:e.targetLang}})),c()(n,v.a.CHANGE_TRANSLATE_STATUS,(function(e){return{messageId:e.messageId,status:e.status}})),n)),I=y.translateMessagesRequested,w=y.changeTranslateStatus,k=function(e,t){return Object(b.put)(Object(O.updateRecord)({name:"messages",id:e,record:t}))};function x(e,t,r,n,a,c,s){var o,u,i;return p.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return o=s?h.TranslationStatus.SUCCEED:h.TranslationStatus.FAILED,u=r?{toggleTranslateStatus:o}:{translateStatus:o},i=s?j(j({},s),{},{target_language:n}):{text:"",target_language:n},d.next=5,k(e,j(j({},u),{},{content:{text:t,translation:r?a:i,toggleTranslation:r?i:c}}));case 5:case"end":return d.stop()}}),E)}function C(e){var t,r,n,a,c,s,o,u,i,d,l,f,v,E,m,g,_,y,I,w,C,R,T;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.messageId,n=t.shopId,a=t.conversationId,c=t.toggle,s=t.targetLang,p.next=3,Object(b.select)(Object(O.getMessageSelector)(r));case 3:if(p.t0=p.sent,p.t0){p.next=6;break}p.t0={};case 6:return o=p.t0,u=o.content||{},i=u.text,d=u.translation,l=u.toggleTranslation,p.prev=8,f={},s&&c?f.toggleTranslateStatus=h.TranslationStatus.PENDING:f.translateStatus=h.TranslationStatus.PENDING,p.next=13,k(r,f);case 13:return p.next=15,Object(b.call)(O.fetch,{method:"POST",resource:"messages",suffix:"retry_translate",payload:JSON.stringify({shop_id:n,message_id:r,conversation_id:a})});case 15:if(v=p.sent,m=(E=v||{}).translated,g=E.middle_translated,_=(m||{}).translated_text,y=(g||{}).translated_text,I=c?j(j({},g),{},{text:y}):j(j({},m),{},{text:_}),w=c?!!y:!!_,!s){p.next=26;break}return p.next=24,x(r,i,c,s,d,l,w?I:void 0);case 24:p.next=31;break;case 26:return C=w?h.TranslationStatus.SUCCEED:h.TranslationStatus.FAILED,R={translateStatus:C},T=w?I:{text:"",source:""},p.next=31,k(r,j(j({},R),{},{content:{text:i,translation:T,toggleTranslation:l}}));case 31:p.next=37;break;case 33:return p.prev=33,p.t1=p.catch(8),p.next=37,x(r,i,c,s,d,l);case 37:case"end":return p.stop()}}),S,null,[[8,33]])}function R(e){var t,r,n,a;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.messageId,n=t.status,a={translateStatus:n},c.next=4,k(r,a);case 4:case"end":return c.stop()}}),m)}function T(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(I,C);case 2:return e.next=4,Object(b.takeEvery)(w,R);case 4:case"end":return e.stop()}}),g)}r("LK8F"),r("I78e"),r("eM6i");var M=p.a.mark(N),D=p.a.mark(U),P=p.a.mark(L),A=p.a.mark(q);function N(e,t){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(b.select)(Object(O.rateCardSelector)(e));case 3:if((r=n.sent)&&"failed"!==r.fetchStatus&&r.status!==h.EvaluationStatus.UNRATED){n.next=8;break}return n.next=7,Object(b.call)(O.fetch,{parent:"rating_cards",parentId:e,resource:"get",params:t});case 7:r=n.sent;case 8:return n.abrupt("return",r);case 11:return n.prev=11,n.t0=n.catch(0),n.abrupt("return",{id:e,status:"",fetchStatus:"failed"});case 14:case"end":return n.stop()}}),M,null,[[0,11]])}function U(e){var t,r,n,a,c,s,o,u,i;return p.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.ids,r=e.shopId,n=Array.isArray(t)?t:[t],a={},"0"!==r&&(a.shop_id=r),d.next=6,Object(b.select)(O.isSubAccountSelector);case 6:return c=d.sent,d.next=9,Object(b.select)(O.currentUserShopIdSelector);case 9:if(d.sent===parseInt(r)||c){d.next=19;break}return s=[],n.forEach((function(e){return s.push(Object(b.call)(N,e,a))})),d.next=15,Object(b.all)(s);case 15:return o=d.sent,d.abrupt("return",o);case 19:return d.prev=19,u="rating_cards",a.ids="[".concat(n.join(","),"]"),d.next=24,Object(b.call)(O.fetch,{resource:u,params:a});case 24:return i=d.sent,d.abrupt("return",i[u]||[]);case 28:return d.prev=28,d.t0=d.catch(19),d.abrupt("return",[]);case 31:case"end":return d.stop()}}),D,null,[[19,28]])}var F=Object(f.a)(c()({},v.a.EVALUATION_REQUESTED,(function(e){var t=e.id,r=e.shopId,n=e.grade,a=e.reason;return{id:t,shopId:r,grade:n,reason:void 0===a?[]:a}}))).evaluationRequested;function L(e){var t,r,n,a,c,s,o,u;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.id,n=t.shopId,a=t.grade,c=t.reason,i.prev=1,s={grade:a,reason:c},n&&(s.shop_id=n),i.next=6,Object(b.call)(O.fetch,{method:"PUT",parent:"rating_cards",parentId:r,resource:"evaluate",payload:JSON.stringify(s)});case 6:return i.next=8,Object(b.put)(Object(O.updateRecord)({name:"rateCards",id:r,record:{grade:a,status:h.EvaluationStatus.RATED}}));case 8:i.next=18;break;case 10:return i.prev=10,i.t0=i.catch(1),o=Date.now(),i.t0.message&&i.t0.message.error_code&&((u=i.t0.message.error_code)===h.EvaluationErrorCode.RATED&&(o=h.EvaluationStatus.RATED),u===h.EvaluationErrorCode.EXPIRED&&(o=h.EvaluationStatus.EXPIRED)),i.next=16,Object(b.put)(Object(O.updateRecord)({name:"rateCards",id:r,record:{status:o}}));case 16:return i.next=18,Object(b.call)(O.setToastInformationSaga,Object(O.setToastInformation)({error:i.t0}));case 18:case"end":return i.stop()}}),P,null,[[1,10]])}function q(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeLatest)(F,L);case 2:case"end":return e.stop()}}),A)}var G=r("SmG+");function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=p.a.mark(Y),Q=p.a.mark(J),K=p.a.mark(z),B=Object(f.a)(c()({},v.a.POPULATE_MESSAGE_REQUESTED,(function(e){return{message:e.message}}))).populateMessageRequested;function Y(e,t){var r,n,a,c,s,o,u,i;return p.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:a=(n=t).id,c=n.shopId,s=n.creatorId,o=n.cartItems,u=n.faqMessageIds,d.t0=e,d.next="product"===d.t0?4:"order"===d.t0?8:"offer"===d.t0?12:"shop"===d.t0?16:"shops"===d.t0?20:d.t0===h.MessageTypes.MSG_TYPE_RATE_CARDS?24:d.t0===h.MessageTypes.MSG_TYPE_VOUCHER_WEB?28:d.t0===h.MessageTypes.MSG_TYPE_FEED_STORY?32:d.t0===h.MessageTypes.MSG_TYPE_VOUCHER?36:d.t0===h.MessageTypes.MSG_TYPE_SHOPPING_CART?41:d.t0===h.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER?45:d.t0===h.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE?49:53;break;case 4:return d.next=6,Object(b.call)(O.showProduct,{payload:{productId:a,shopId:c}});case 6:return r=d.sent,d.abrupt("break",54);case 8:return d.next=10,Object(b.call)(O.showOrder,{payload:{orderId:a,shopId:c}});case 10:return r=d.sent,d.abrupt("break",54);case 12:return d.next=14,Object(b.call)(O.showOffer,{payload:{offerId:a,shopId:c}});case 14:return r=d.sent,d.abrupt("break",54);case 16:return d.next=18,Object(b.call)(O.showShop,{payload:{shopId:c}});case 18:return r=d.sent,d.abrupt("break",54);case 20:return d.next=22,Object(b.call)(O.showShop,{payload:{shopId:t}});case 22:return r=d.sent,d.abrupt("break",54);case 24:return d.next=26,Object(b.call)(U,{shopId:c,ids:a});case 26:return r=d.sent,d.abrupt("break",54);case 28:return d.next=30,Object(b.call)(O.showVoucher,{shopId:c,ids:a});case 30:return r=d.sent,d.abrupt("break",54);case 32:return d.next=34,Object(b.call)(O.showFeedStory,{payload:{id:a,creatorId:s}});case 34:return r=d.sent,d.abrupt("break",54);case 36:return d.next=38,Object(b.call)(O.showVoucher,{shopId:c,ids:Array.isArray(a)?a:[a]});case 38:return i=d.sent,r=i[0],d.abrupt("break",54);case 41:return d.next=43,Object(b.call)(O.showCartReminder,{id:a,cartItems:o});case 43:return r=d.sent,d.abrupt("break",54);case 45:return d.next=47,Object(b.call)(O.showUnrateOrder,{payload:{orderId:a,shopId:c}});case 47:return r=d.sent,d.abrupt("break",54);case 49:return d.next=51,Object(b.call)(O.showFaqHistory,{payload:{ids:u.slice(0,3),id:a}});case 51:return r=d.sent,d.abrupt("break",54);case 53:r={};case 54:return d.abrupt("return",{type:e,content:r});case 55:case"end":return d.stop()}}),V)}function J(e){var t,r,n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.message,a.next=3,Object(b.put)(Object(O.updateRecord)({name:"messages",id:t.id,record:{fetchStatus:""}}));case 3:return a.next=5,Object(b.select)(O.isSubAccountSelector);case 5:return r=a.sent,a.next=8,Object(b.select)(O.currentUserShopIdSelector);case 8:return n=a.sent,a.next=11,Object(b.call)(G.g,[t],n,r);case 11:return a.next=13,Object(b.put)(Object(O.updateRecord)({name:"messages",id:t.id,record:W({},t)}));case 13:case"end":return a.stop()}}),Q)}function z(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(B,J);case 2:case"end":return e.stop()}}),K)}var X=r("5mRn"),Z=r("Ogvq"),$=p.a.mark(re),ee=p.a.mark(ne),te=Object(f.a)(c()({},v.a.HANDLE_SENSITIVE_URL,(function(e){return{href:e.href}}))).handleSensitiveUrl;function re(e){var t;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.href,r.next=3,Object(b.put)(Object(O.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){Z.store.dispatch(Object(O.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){Z.store.dispatch(Object(O.closeModal)());var e=window.open();e.opener=null,e.location=t}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 3:case"end":return r.stop()}}),$)}function ne(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(te,re);case 2:case"end":return e.stop()}}),ee)}var ae,ce,se=r("iV3A");r("Btvt"),r("VRzm"),r("Vd3H"),r("HEwt"),r("XfO3"),r("yt8O"),r("rGqo"),r("T39b");function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie=p.a.mark(Ee),de=p.a.mark(Se),le=Object(f.a)((ae={},c()(ae,v.a.FETCH_FAQ_MESSAGES_REQUESTED,(function(e){var t=e.sourceId,r=e.shopId,n=e.reset;return{sourceId:t,shopId:r,reset:void 0!==n&&n}})),c()(ae,v.a.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e){var t=e.messageIds,r=e.sourceId,n=e.faqHistoryStatus,a=e.offset,c=e.hasMore;return{messageIds:t,sourceId:r,faqHistoryStatus:n,offset:a,hasMore:void 0===c||c}})),c()(ae,v.a.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e){return{status:e.status}})),c()(ae,v.a.UPDATE_CURRENT_FAQ_ID,(function(e){return{id:e.id}})),c()(ae,v.a.SHOW_FAQ_HISTORY_MODAL,(function(e){return{sourceId:e.sourceId,shopId:e.shopId}})),ae)),pe=le.fetchFaqMessagesRequested,fe=le.fetchFaqMessagesSucceeded,be=le.updateFetchFaqMessagesRequestedStatus,he=le.updateCurrentFaqId,Oe=le.showFaqHistoryModal,ve=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return new Promise((function(a,c){Object(O.fetch)({parent:"conversation",resource:"bundle_message",params:{shop_id:t,offset:r,limit:n,source_id:e}}).then((function(e){var t=e.bundle_message,r=e.total;a({messages:t,total:r})})).catch((function(e){c(e)}))}))};function Ee(e){var t,r,n,a,c,s,o,u,i,d,l,f,v,E,S,m,g;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.sourceId,n=t.shopId,a=t.reset,p.prev=1,p.next=4,Object(b.put)(he({id:r}));case 4:return p.next=6,Object(b.select)(O.currentFaqHistorySeletor);case 6:if(c=p.sent,s=c.offset,o=void 0===s?0:s,u=c.hasMore,!(!(void 0===u||u)||a&&o)){p.next=13;break}return p.abrupt("return",null);case 13:return p.next=15,Object(b.select)(O.isSubAccountSelector);case 15:return i=p.sent,p.next=18,Object(b.select)(O.currentUserShopIdSelector);case 18:return d=p.sent,p.next=21,Object(b.put)(be({status:a?h.DataFetchStatus.INIT_PENDING:h.DataFetchStatus.PENDING}));case 21:return p.next=23,ve(r,n,o);case 23:return l=p.sent,f=l.messages,v=l.total,E=o+f.length,f.sort((function(e,t){return Object(G.b)(e.id,t.id)})),f=f.filter((function(e){return"webview"!==e.type})),S=Object(O.normalize)("messages",f),m=S.result,g=S.entities,p.next=32,Object(b.put)(Object(O.updateEntities)({entities:g}));case 32:return p.next=34,Object(b.call)(G.g,f,d,i);case 34:return p.next=36,Object(b.put)(fe({sourceId:r,offset:E,hasMore:E<v,faqHistoryStatus:h.DataFetchStatus.SUCCEED,messageIds:m}));case 36:p.next=42;break;case 38:return p.prev=38,p.t0=p.catch(1),p.next=42,Object(b.put)(be({status:a?h.DataFetchStatus.INIT_FAILED:h.DataFetchStatus.FAILED}));case 42:case"end":return p.stop()}}),ie,null,[[1,38]])}function Se(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(pe,Ee);case 2:case"end":return e.stop()}}),de)}var me=(ce={},c()(ce,v.a.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e,t){var r=t.payload,n=r.messageIds,a=r.sourceId,s=r.faqHistoryStatus,o=r.offset,u=r.hasMore,i=e.faqHistoryHash,d=(i[a]||{all:[]}).all,l=Array.from(new Set(d.concat(n)));return ue(ue({},e),{},{faqHistoryHash:ue(ue({},i),{},c()({},a,{all:l,offset:o,hasMore:u})),faqHistoryStatus:s})})),c()(ce,v.a.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e,t){var r=t.payload.status;return ue(ue({},e),{},{faqHistoryStatus:r})})),c()(ce,v.a.UPDATE_CURRENT_FAQ_ID,(function(e,t){var r=t.payload.id;return ue(ue({},e),{},{faqId:r})})),ce);r("f3/d"),r("h7Nl"),r("a1Th"),r("bWfx"),r("dRSK"),r("INYr"),r("L9s1"),r("Z2Ku");function ge(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw c}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var je=p.a.mark(Qe),ye=p.a.mark(Ke),Ie=p.a.mark(Be),we=p.a.mark(Ye),ke=p.a.mark(ze),xe=p.a.mark(Xe);function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Te=h.MessageTypes.MSG_TYPE_OFFER,Me=h.MessageTypes.MSG_TYPE_VIDEO,De=Object(f.a)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),Pe=De.receiveMessageRequested,Ae=De.receiveMessageSucceeded,Ne=De.resetNewConversationQueue,Ue=De.resetOldConversationQueue,Fe=De.resetConversationQueue,Le=2e3,qe=8e3,Ge=Le,He=Le,We=[],Ve=[];function Qe(e){var t,r,n,a,c,s,o,u;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.content,e.from_id,e.send_by_yourself,r=e.conversation_id,a=(n=t||{}).offer_id,c=n.model_id,n.shop_id,s=n.product_id,o=[],u={},i.next=6,Object(b.select)(Object(O.relatedOfferIdsSelector)(r,c,a,s));case 6:return i.sent.forEach((function(e){var t=e.id;u[t]=Re(Re({},e),{},{status:h.OfferStatus.CANCELLED})})),o.push(Object(b.put)(Object(O.batchUpdateRecord)({name:"offers",records:u}))),i.next=11,Object(b.all)(o);case 11:case"end":return i.stop()}}),je)}function Ke(e){var t,r,n,a,c,s,o,i,d,l,f,h,v,E,S,m,g,_,j,y,I,w,k,x,C,R,T,M,D,P,A,N,U,F,L,q;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload.message,r=t.id,n=t.type,a=t.request_id,t.from_shop_id,t.to_shop_id,c=t.conversation_id,s=t.send_by_yourself,o=t.content,i=t.created_at,p.next=4,Object(b.select)(O.isSubAccountSelector);case 4:return d=p.sent,p.next=7,Object(b.select)((function(e){return e.conversationReducer}));case 7:return l=p.sent,f=l.conversationIdsMap,h=l.currentConversationId,v=l.currentConversationCanRead,p.next=13,Object(b.select)(Object(O.getConversation)(c));case 13:if(E=p.sent,S=E.id&&E.faking,!!(f&&f[c.toString()]||S)){p.next=20;break}We.push(t),p.next=110;break;case 20:if(!(n===Te)){p.next=24;break}return p.next=24,Object(b.call)(Qe,t);case 24:if(m=h===c,g=Object(G.c)(t,{updateMaxGeneralOptionHideTime:s}),_=Object(G.d)(t),!m){p.next=109;break}if(!s){p.next=77;break}return p.next=31,Object(b.select)(O.messagesWithSourceSelector);case 31:j=p.sent,y=!1,I=!1,w=!1,k=ge(j),p.prev=36,k.s();case 38:if((x=k.n()).done){p.next=48;break}if(C=x.value,R=C.id,T=C.retryRequestId,I=R===a,w=T===a,!((y=R===r)||I||w)){p.next=46;break}return p.abrupt("break",48);case 46:p.next=38;break;case 48:p.next=53;break;case 50:p.prev=50,p.t0=p.catch(36),k.e(p.t0);case 53:return p.prev=53,k.f(),p.finish(53);case 56:if(y){p.next=75;break}if(!I&&!w){p.next=62;break}return p.next=60,Object(b.call)(u.e,[t],c);case 60:p.next=75;break;case 62:return p.next=64,Object(b.select)(O.currentUserSelector)||{};case 64:return M=p.sent,D=M.shop_id,p.next=68,Object(b.call)(G.g,[t],D,d,!0);case 68:return P=Object(O.normalize)("messages",t),p.next=71,Object(b.put)(Object(O.updateEntities)({entities:P.entities}));case 71:return p.next=73,Object(b.put)(Object(O.updateRecord)({name:"conversations",id:c,record:Re(Re({latest_message_id:r,latest_message_type:n,latest_message_content:o,last_message_time:i},g),_)}));case 73:return p.next=75,Object(b.put)(Ae({conversationId:c,message:t}));case 75:p.next=101;break;case 77:if(n!==Me){p.next=80;break}return p.next=80,Object(b.put)(Object(se.d)({id:a,info:{shouldPreload:!0}}));case 80:return p.next=82,Object(b.select)(O.currentUserSelector)||{};case 82:return A=p.sent,N=A.shop_id,p.next=86,Object(b.select)(O.currentConversationSelector);case 86:return U=p.sent,p.next=89,Object(b.call)(G.g,[t],N,d,!0);case 89:return F=Object(O.normalize)("messages",t),p.next=92,Object(b.put)(Object(O.updateEntities)({entities:F.entities}));case 92:if(L=U.unread_count,q=v?L:L+1,0!==L||v){p.next=97;break}return p.next=97,Object(b.spawn)(O.handleUnreadCountChangeAction,Object(O.updateUnreadCount)({type:O.unreadCountActions.RECEIVE_UNREADABLE_MESSAGE,conversation:U}));case 97:return p.next=99,Object(b.put)(Object(O.updateRecord)({name:"conversations",id:c,record:Re(Re({latest_message_id:r,latest_message_type:n,latest_message_content:o,last_message_time:i,unread_count:q},g),_)}));case 99:return p.next=101,Object(b.put)(Ae({conversationId:c,message:t}));case 101:if(!S){p.next=104;break}return p.next=104,Object(b.call)(O.fetchConversationsRequestedSaga,Object(O.fetchConversationsRequested)({direction:"latest"}));case 104:if(s||!v){p.next=107;break}return p.next=107,Object(b.call)(O.markMessagesRequestedSaga,Object(O.markMessagesRequested)({conversationId:c,isRead:!0,latestMessageId:r,shopId:E.shop_id}));case 107:p.next=110;break;case 109:Ve.push(t);case 110:case"end":return p.stop()}}),ye,null,[[36,50,53,56]])}function Be(){var e,t,r,n,a,c;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,Object(b.delay)(Ge);case 3:if(e=We.length){s.next=8;break}Ge=Ge===qe?Ge:2*Ge,s.next=24;break;case 8:return t=We.splice(0,e).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),Ge=Le,s.next=12,Object(b.select)(O.isSubAccountSelector);case 12:return r=s.sent,s.next=15,Object(b.select)((function(e){return e.conversationReducer}));case 15:if(n=s.sent,a=n.maxLatestTimestampNano,c=n.maxLatestReceivedMessageId,!(r?Object(h.greaterThan)(t[0].id,c):a<=t[0].created_timestamp*Math.pow(10,9))){s.next=24;break}return s.next=22,Object(b.call)(O.fetchConversationsRequestedSaga,Object(O.fetchConversationsRequested)({direction:"latest"}));case 22:return s.next=24,Object(b.spawn)(O.handleUnreadCountChangeAction,Object(O.updateUnreadCount)({type:O.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 24:s.next=0;break;case 26:case"end":return s.stop()}}),Ie)}function Ye(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(b.delay)(He);case 3:if(e=Ve.length){t.next=8;break}He=He===qe?He:2*He,t.next=9;break;case 8:return t.delegateYield(p.a.mark((function t(){var r,n,a,c,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.put)(Object(O.updateFetchConversationsDirection)({direction:"latest"}));case 2:return r=Ve.splice(0,e),He=Le,n=Array.from(new Set(r.map((function(e){return e.conversation_id})))),t.next=7,Object(b.select)(Object(O.getConversations)(n));case 7:return a=t.sent,c={},s=0,r.forEach((function(e){var t=e.id,r=e.type,n=e.content,o=e.created_at,u=e.conversation_id,i=e.send_by_yourself,d=Object(G.c)(e,{updateMaxGeneralOptionHideTime:i}),l=Object(G.d)(e),p=Re(Re({latest_message_id:t,latest_message_type:r,latest_message_content:n,last_message_time:o},d),l),f=c[u];if(f)t>f.latest_message_id?c[u]=Re(Re(Re({},f),p),{},{unread_count:i?f.unread_count:f.unread_count+1}):c[u]=Re(Re({},f),{},{unread_count:i?f.unread_count:f.unread_count+1});else{var b=a.find((function(e){return e.id===u}))||{},h=b.unread_count,O=void 0===h?0:h;b.shop_id;c[u]=Re(Re({},p),{},{unread_count:i?O:O+1}),i||0!==O||(s+=1)}})),t.next=13,Object(b.put)(Object(O.batchUpdateRecord)({name:"conversations",records:c,checkProp:"latest_message_id"}));case 13:return t.next=15,Object(b.spawn)(O.handleUnreadCountChangeAction,Object(O.updateUnreadCount)({type:O.unreadCountActions.MESSAGE_QUEUE_UPDATE,messageQueueUpdate:{totalIncrease:s}}));case 15:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:t.next=0;break;case 11:case"end":return t.stop()}}),we)}function Je(){var e=We.length,t=Ve.length;e&&We.splice(0,e),t&&Ve.splice(0,t)}function ze(e){var t,r,n,a,c,s,o,u,i,d,l;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(!(t=Ve.filter((function(t){return t.conversation_id===e}))).length){p.next=12;break}return t.forEach((function(e){var t=Ve.findIndex((function(t){return t.id===e.id}));Ve.splice(t,1)})),r=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),n=r[0],a=n.id,c=n.type,s=n.content,o=n.created_at,u=n.send_by_yourself,i=Object(G.c)(n,{updateMaxGeneralOptionHideTime:u}),d=Object(G.d)(n),l=Re(Re({latest_message_id:a,latest_message_type:c,latest_message_content:s,last_message_time:o},i),d),p.next=11,Object(b.put)(Object(O.updateRecord)({name:"conversations",id:e,record:l}));case 11:return p.abrupt("return",a);case 12:return p.abrupt("return",null);case 13:case"end":return p.stop()}}),ke)}function Xe(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(Pe,Ke);case 2:return e.next=4,Object(b.takeEvery)(Fe,Je);case 4:case"end":return e.stop()}}),xe)}var Ze,$e=c()({},Ae,(function(e,t){var r=t.payload,n=r.conversationId,a=r.message,s=a.id,o=a.request_id,u=e.messageIdsHash,i=u[n]||{},d=i.all||[],l=i.sending||[],p=[];return p=d.includes(s)?d:[s].concat(d).filter((function(e){return e!==o})),Re(Re({},e),{},{messageIdsHash:Re(Re({},u),{},c()({},n,Re(Re({},i),{},{all:p,sending:l.filter((function(e){return!l.includes(o)}))})))})})),et=p.a.mark(vt);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nt,at=Object(f.a)({SET_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId}},RESET_REPLY_TO_MESSAGE:function(){return{}},SCROLL_TO_MESSAGE:function(e){return{messageId:e.messageId}},SET_SCROLL_TO_MESSAGE_ID:function(e){return{messageId:e.messageId}},RESET_SCROLL_TO_MESSAGE_ID:function(){},SET_IN_SCROLL_TO_MESSAGE:function(e){return{inScrollToMessage:e.inScrollToMessage}},SET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId,currentConversationId:e.currentConversationId}},RESET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{currentConversationId:e.currentConversationId}}}),ct=at.setReplyToMessage,st=at.resetReplyToMessage,ot=at.scrollToMessage,ut=at.setScrollToMessageId,it=at.resetScrollToMessageId,dt=at.setInScrollToMessage,lt=at.setCurrentConversationReplyToMessage,pt=at.resetCurrentConversationReplyToMessage,ft=p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload.messageId,e.next=3,Object(b.select)(O.messageIdsSelector);case 3:if(e.sent.all.includes(r)){e.next=14;break}return e.next=7,Object(b.select)(O.currentConversationSelector);case 7:return n=e.sent,e.next=10,Object(b.call)(o.d,{payload:{conversation:n,direction:"around",reset:!0,messageId:r,isPopulateSync:!0}});case 10:return e.next=12,Object(b.put)(dt({inScrollToMessage:!0}));case 12:e.next=15;break;case 14:O.EventBus.emit("scrollToMessage",r);case 15:return e.next=17,Object(b.put)(ut({messageId:r}));case 17:return e.next=19,Object(b.delay)(1500);case 19:return e.next=21,Object(b.select)(O.scrollToMessageIdSelector);case 21:if(e.sent!==r){e.next=25;break}return e.next=25,Object(b.put)(it());case 25:case"end":return e.stop()}}),e)})),bt=p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload.messageId,e.next=3,Object(b.select)(O.currentConversationIdSelector);case 3:return n=e.sent,e.next=6,Object(b.put)(lt({currentConversationId:n,messageId:r}));case 6:case"end":return e.stop()}}),e)})),ht=p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.select)(O.currentConversationIdSelector);case 2:return t=e.sent,e.next=5,Object(b.put)(pt({currentConversationId:t}));case 5:case"end":return e.stop()}}),e)})),Ot=(Ze={},c()(Ze,lt,(function(e,t){var r=t.payload,n=r.currentConversationId,a=void 0===n?"":n,s=r.messageId,o=void 0===s?"":s;return a&&o?rt(rt({},e),{},{reply:rt(rt({},e.reply),{},{toMessageId:rt(rt({},e.reply.toMessageId),{},c()({},a,o))})}):e})),c()(Ze,pt,(function(e,t){var r=t.payload.currentConversationId,n=void 0===r?"":r;return n?rt(rt({},e),{},{reply:rt(rt({},e.reply),{},{toMessageId:rt(rt({},e.reply.toMessageId),{},c()({},n,""))})}):e})),c()(Ze,ut,(function(e,t){return rt(rt({},e),{},{reply:rt(rt({},e.reply),{},{scrollToMessageId:t.payload.messageId})})})),c()(Ze,it,(function(e){return rt(rt({},e),{},{reply:rt(rt({},e.reply),{},{scrollToMessageId:""})})})),c()(Ze,dt,(function(e,t){return rt(rt({},e),{},{reply:rt(rt({},e.reply),{},{inScrollToMessage:t.payload.inScrollToMessage})})})),Ze);function vt(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(ot,ft);case 2:return e.next=4,Object(b.takeEvery)(st,ht);case 4:return e.next=6,Object(b.takeEvery)(ct,bt);case 6:case"end":return e.stop()}}),et)}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mt=p.a.mark(It),gt=p.a.mark(wt),_t=Object(f.a)((nt={},c()(nt,v.a.MESSAGE_SYNC_UPDATE,(function(e){return{conversation:e.conversation}})),c()(nt,v.a.MESSAGE_UPDATE_TIME_NOW,(function(e){return{conversationId:e.conversationId,timeNow:e.timeNow}})),nt)),jt=_t.messageSyncUpdate,yt=_t.messageUpdateTimeNow;function It(e){var t,r,n,a,c,s,u,i,d,l,f,h,v,E,S,m,g,_,j;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload.conversation,r=t.id,n=t.shop_id,p.next=4,Object(b.select)(Object(O.messageUpdateTimeNowSelector)(r));case 4:return a=p.sent,p.prev=5,p.next=8,Object(b.select)(Object(O.createMessageIdsHashSelector)({isAgentConversation:!1}));case 8:if(s=p.sent,u=s[r]||{},i=u.all,0!==(void 0===i?[]:i).length){p.next=13;break}return p.abrupt("return");case 13:return p.next=15,Object(b.call)(O.fetch,{subServer:"coreapi",parent:"conversation",resource:"updated_message_list",params:{conversation_id:r,shop_id:n,last_update_time:a||"0"}});case 15:if(d=p.sent,console.log("updated_message_list",d),l=d.messages,f=void 0===l?[]:l,h=d.page_result,f.sort((function(e,t){return t.id-e.id})),!(f.length>0)){p.next=23;break}return v=Object(O.normalize)("messages",f),E=v.entities,p.next=23,Object(b.put)(Object(O.updateEntities)({entities:E}));case 23:if(S=u.oldestMessageId,m=null===(c=f[0])||void 0===c?void 0:c.id,_=(g=h||{}).has_more,!(j=g.next_last_update_time)){p.next=29;break}return p.next=29,Object(b.put)(yt({conversationId:r,timeNow:j}));case 29:if(console.log("oldestMessageId vs updateLatestMessageId",S,m),!(_&&S<m)){p.next=33;break}return p.next=33,Object(b.call)(It,{payload:{conversation:t}});case 33:p.next=43;break;case 35:if(p.prev=35,p.t0=p.catch(5),!(p.t0 instanceof O.CustomError)){p.next=42;break}return p.next=40,Object(b.put)(yt({conversationId:r,timeNow:"0"}));case 40:return p.next=42,Object(b.put)(Object(o.c)({conversation:t,reset:!0}));case 42:console.log("sync message error",p.t0);case 43:case"end":return p.stop()}}),mt,null,[[5,35]])}function wt(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.takeEvery)(jt,It);case 2:case"end":return e.stop()}}),gt)}var kt=c()({},v.a.MESSAGE_UPDATE_TIME_NOW,(function(e,t){var r=t.payload,n=r.conversationId,a=r.timeNow,s=e.messageUpdateTimeMap;return St(St({},e),{},{messageUpdateTimeMap:St(St({},s),{},c()({},n,a))})}));function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rt=Object(f.a)(c()({},v.a.SET_ENTRY_POINT,(function(e){return{type:e.type,conversationId:e.conversationId}}))).setEntryPoint,Tt=c()({},v.a.SET_ENTRY_POINT,(function(e,t){var r=t.payload;return Ct(Ct({},e),{},{entryPoint:r})}));function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.d(t,"Y",(function(){return N})),r.d(t,"Z",(function(){return U})),r.d(t,"i",(function(){return F})),r.d(t,"lb",(function(){return q})),r.d(t,"M",(function(){return X.e})),r.d(t,"D",(function(){return X.d})),r.d(t,"z",(function(){return X.b})),r.d(t,"A",(function(){return X.c})),r.d(t,"fb",(function(){return X.f})),r.d(t,"pb",(function(){return X.g})),r.d(t,"y",(function(){return i.a})),r.d(t,"ub",(function(){return i.b})),r.d(t,"N",(function(){return u.h})),r.d(t,"O",(function(){return u.i})),r.d(t,"R",(function(){return u.l})),r.d(t,"P",(function(){return u.j})),r.d(t,"L",(function(){return u.g})),r.d(t,"a",(function(){return u.a})),r.d(t,"b",(function(){return u.b})),r.d(t,"c",(function(){return u.c})),r.d(t,"Q",(function(){return u.k})),r.d(t,"K",(function(){return u.f})),r.d(t,"r",(function(){return u.e})),r.d(t,"wb",(function(){return u.n})),r.d(t,"vb",(function(){return u.m})),r.d(t,"u",(function(){return B})),r.d(t,"p",(function(){return Y})),r.d(t,"rb",(function(){return z})),r.d(t,"l",(function(){return o.c})),r.d(t,"o",(function(){return o.f})),r.d(t,"db",(function(){return o.g})),r.d(t,"eb",(function(){return o.h})),r.d(t,"g",(function(){return o.b})),r.d(t,"n",(function(){return o.e})),r.d(t,"m",(function(){return o.d})),r.d(t,"nb",(function(){return o.i})),r.d(t,"v",(function(){return Pe})),r.d(t,"w",(function(){return Ae})),r.d(t,"E",(function(){return Ne})),r.d(t,"F",(function(){return Ue})),r.d(t,"B",(function(){return Fe})),r.d(t,"ob",(function(){return Be})),r.d(t,"qb",(function(){return Ye})),r.d(t,"q",(function(){return ze})),r.d(t,"sb",(function(){return Xe})),r.d(t,"ab",(function(){return I})),r.d(t,"d",(function(){return w})),r.d(t,"xb",(function(){return T})),r.d(t,"x",(function(){return se.c})),r.d(t,"gb",(function(){return se.d})),r.d(t,"h",(function(){return se.b})),r.d(t,"hb",(function(){return se.e})),r.d(t,"kb",(function(){return se.h})),r.d(t,"ib",(function(){return se.f})),r.d(t,"jb",(function(){return se.g})),r.d(t,"j",(function(){return pe})),r.d(t,"k",(function(){return fe})),r.d(t,"cb",(function(){return be})),r.d(t,"bb",(function(){return he})),r.d(t,"X",(function(){return Oe})),r.d(t,"mb",(function(){return Se})),r.d(t,"V",(function(){return ct})),r.d(t,"G",(function(){return st})),r.d(t,"I",(function(){return ot})),r.d(t,"W",(function(){return ut})),r.d(t,"H",(function(){return it})),r.d(t,"U",(function(){return dt})),r.d(t,"S",(function(){return lt})),r.d(t,"C",(function(){return pt})),r.d(t,"J",(function(){return ft})),r.d(t,"tb",(function(){return vt})),r.d(t,"s",(function(){return te})),r.d(t,"f",(function(){return d.b})),r.d(t,"t",(function(){return jt})),r.d(t,"T",(function(){return Rt}));t.e={watcher:[o.i,u.m,i.b,Xe,ne,T,z,X.g,q,u.n,Se,Ye,Be,vt,wt],reducer:Object(s.a)(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt({},o.a),u.d),$e),d.a),X.a),se.a),me),Tt),Ot),kt),{status:"pendingInit",messageIdsHash:{},videoMap:{1234:{percentage:"10",size:"1300"}},offlineMessages:{},entryPoint:{},faqHistoryHash:{},faqId:null,faqHistoryStatus:"",reply:{toMessageId:{},inScrollToMessage:!1,scrollToMessageId:""},messageUpdateTimeMap:{}})}},VLYj:function(e,t,r){"use strict";(function(e){r("I5cv");var n=r("lwsE"),a=r.n(n),c=r("W8MJ"),s=r.n(c),o=r("PJYZ"),u=r.n(o),i=r("7W2i"),d=r.n(i),l=r("a1gu"),p=r.n(l),f=r("Nsbk"),b=r.n(f),h=(r("2Spj"),r("Z2Ku"),r("91GP"),r("q1tI")),O=r.n(h),v=r("17x9"),E=r.n(v),S=r("SdKD"),m=r("SUBy"),g=r("MQp2"),_=r("tvxL"),j=r("XnKn"),y=r("4iwc"),I=r.n(y),w=r("0zYX"),k=r.n(w),x=r("xNaz"),C=r.n(x),R=r("0D0a"),T=r.n(R),M=r("3rmy"),D=r.n(M),P=r("4+Ig"),A=r.n(P),N=r("UZrK"),U=r.n(N),F=r("zMki"),L=r.n(F),q=r("AlKw"),G=r.n(q);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var W={pin:k.a,unpin:k.a,mark_as_read:T.a,mark_as_unread:T.a,delete:A.a,close:D.a,restart:U.a},V={pin:"markAsPinned",unpin:"markAsUnpinned",mark_as_read:"markAsRead",mark_as_unread:"markAsUnread",delete:"markAsDelete",close:"markAsClose",restart:"markAsRestart"},Q=function(t){d()(n,t);var r=H(n);function n(e){var t;return a()(this,n),(t=r.call(this,e)).state={hover:!1,opened:!1},t.rootNode=null,t.sendClickTracker=t.sendClickTracker.bind(u()(t)),t.handleMouseEvent=t.handleMouseEvent.bind(u()(t)),t.getConversationMenuOptions=t.getConversationMenuOptions.bind(u()(t)),t.handleConversationMenuOpen=t.handleConversationMenuOpen.bind(u()(t)),t.handleConversationMenuClose=t.handleConversationMenuClose.bind(u()(t)),t.getConversationStatus=t.getConversationStatus.bind(u()(t)),t.getOperationItem=t.getOperationItem.bind(u()(t)),t.getCommonOptions=t.getCommonOptions.bind(u()(t)),t.getSubAccountMenuOptions=t.getSubAccountMenuOptions.bind(u()(t)),t.handleClickConversation=t.handleClickConversation.bind(u()(t)),t}return s()(n,[{key:"sendClickTracker",value:function(e){var t=this.props.conversation;Object(_.clickTracker)({trackerName:e,data:{conversation_id:t.id}})}},{key:"handleConversationMenuOpen",value:function(){this.sendClickTracker("clickChatMore");var e=this.props;(0,e.updateOpenedMenu)(e.conversation.id),this.setState({opened:!0})}},{key:"handleConversationMenuClose",value:function(){var e=this.props,t=e.conversation,r=e.openedMenu,n=this.state.hover;t.id!==r&&n&&(n=!1),this.setState({hover:n,opened:!1})}},{key:"getOperationItem",value:function(t,r){var n=this,a=this.props,c=a.operationRequest,s=a.showModal,o=a.closeModal;return{iconComp:O.a.createElement(g.Icon,{svg:W[t],className:G.a.optionsIcon}),icon:t,name:e("common.".concat("delete"===t?"delete_chat":t)),handleSelect:function(){"delete"===t?s({type:"CONFIRM_MODAL",title:{key:"conversation_list.conversation_cell.menu.delete_chat_title"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){o()}},confirm:{label:{key:"common.ok"},handler:function(){c({type:t,extra:r}),o()}}},additions:{content:e("conversation_list.conversation_cell.menu.delete_chat_content")}}):c({type:t,extra:r}),n.sendClickTracker(V[t])}}}},{key:"getCommonOptions",value:function(e,t,r,n,a){return[this.getOperationItem(r?"unpin":"pin",{conversationId:t,shopId:e,isPinned:r}),this.getOperationItem(n?"mark_as_read":"mark_as_unread",{conversationId:t,shopId:e,isRead:n,latestMessageId:a}),this.getOperationItem("delete",{conversationId:t,shopId:e})]}},{key:"getSubAccountMenuOptions",value:function(e,t,r){return e?[this.getOperationItem("close",{conversationId:r,shopId:t,status:"closed"})]:[this.getOperationItem("restart",{conversationId:r,shopId:t,status:"activated"})]}},{key:"getConversationMenuOptions",value:function(){var e=this.props,t=e.conversation,r=e.isSubAccount,n=t.status,a=t.pinned,c=t.id,s=t.shop_id,o=t.unread_count,u=void 0===o?0:o,i=t.latest_message_id,d=!!u,l=this.getCommonOptions(s,c,a,d,i);if(r){var p="activated"===n,f=this.getSubAccountMenuOptions(p,s,c).concat(l);return p||f.splice(2,1),f}return l}},{key:"getConversationStatus",value:function(t,r,n){var a=this.props.isSubAccount;return"closed"===t?O.a.createElement("div",{className:G.a.closed},e("common.closed")):["banned"].includes(r)?O.a.createElement("div",{className:G.a.banned},e("common.".concat(r))):!Object(j.isVisitingCNSC)()&&a||!n?null:O.a.createElement("div",{className:G.a.banned},e("common.blocked"))}},{key:"handleMouseEvent",value:function(e){this.setState({hover:e})}},{key:"handleClickConversation",value:function(){var e=this.props,t=e.onClick,r=e.conversation,n=e.updateLocationMode;t(r),n({inlocation:!1})}},{key:"render",value:function(){var t=this,r=this.props,n=r.style,a=r.isScChat,c=r.draftHash,s=r.openedMenu,o=r.conversation,u=r.currentConversationId,i=r.lastMessage,d=r.inlocation,l=o.status,p=o.pinned,f=o.id,b=o.to_name,h=o.to_avatar,v=o.to_avatar_hash,E=o.unread_count,_=o.flag,y=o.to_status,w=o.is_blocked,k=o.crm_message_preview,x=void 0===k?{}:k,R=o.entry_point,T=i.send_status,M=1===T?"sending":2===T?"failed":"",D=this.state,P=D.hover,A=D.opened,N=this.getConversationStatus(l,y,w),U=f===u,F=E>=1e3?"999+":E,q=this.getConversationMenuOptions(),H=c[f],W=!U&&H,V="failed"===M,Q="sending"===M,K=i,B=Object.assign({},K,{crm_message_preview:x}),Y=Object(j.previewMessage)(B),J=K.created_at||1e3*K.created_timestamp,z=Object(j.customizeTime)(J,{noTodayFlag:!0,noTimeFlag:!0}),X=O.a.createElement("div",{className:G.a.username,title:b},b),Z="closed"!==l&&"feed_story"===R;return O.a.createElement("div",{style:n,ref:function(e){return t.rootNode=e},onClick:this.handleClickConversation,className:"".concat(G.a.root," ").concat(U&&!d?G.a.highlighted:""),onMouseEnter:function(){return t.handleMouseEvent(!0)},onMouseLeave:function(){return t.handleMouseEvent(!1)}},p&&O.a.createElement(g.Icon,{svg:I.a,className:G.a.pinned}),O.a.createElement("div",{className:G.a.avatar},O.a.createElement(m.a,{avatar:h,avatarHash:v})),O.a.createElement("div",{className:G.a.container},O.a.createElement("div",{className:G.a.upper},Z?O.a.createElement("div",{className:G.a.usernameFeedContainer},X,O.a.createElement("div",{className:G.a.feed},e("conversation_detail.feed_badge"))):X,N||E>0&&O.a.createElement("div",{className:G.a[a?"unread":"mallUnread"]},F)),O.a.createElement("div",{className:G.a.lower},O.a.createElement("div",{className:G.a.message},W?O.a.createElement(O.a.Fragment,null,O.a.createElement("span",{className:G.a.draft},"[",e("label.draft"),"]"),O.a.createElement("span",{title:W},W)):O.a.createElement(O.a.Fragment,null,V?O.a.createElement(g.Icon,{svg:L.a,className:G.a[M]}):Q&&!U?O.a.createElement("span",{className:G.a[M]}):"move"===_&&O.a.createElement("span",{className:G.a.forward},"[",e("label.forward"),"]"),O.a.createElement("span",{title:Y},Y))),P||A?O.a.createElement(S.a,{placement:"bottom-end",menuKey:f,openedMenu:s,options:q,onOpen:this.handleConversationMenuOpen,onClose:this.handleConversationMenuClose,label:O.a.createElement("div",{id:f,className:G.a.threeDots},O.a.createElement(g.Icon,{svg:C.a,className:"".concat(G.a.threeDotsIcon," ").concat(A?G.a.active:"")}))}):O.a.createElement("div",{className:G.a.timestamp},z))))}}]),n}(O.a.Component);Q.propTypes={style:E.a.object,onClick:E.a.func,isScChat:E.a.bool,draftHash:E.a.object,openedMenu:E.a.string,isSubAccount:E.a.bool,conversation:E.a.object,operationRequest:E.a.func,updateOpenedMenu:E.a.func,currentConversationId:E.a.string,lastMessage:E.a.object,showModal:E.a.func,closeModal:E.a.func,inlocation:E.a.bool,updateLocationMode:E.a.func},t.a=Q}).call(this,r("iMMW").t)},W2jc:function(e,t,r){"use strict";(function(e){var n=r("lSNA"),a=r.n(n),c=r("J4zp"),s=r.n(c),o=(r("eM6i"),r("Z2Ku"),r("RW0V"),r("ioFf"),r("0l/t"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/"),r("q1tI")),u=r.n(o),i=r("17x9"),d=r.n(i),l=r("pQ8y"),p=r("MQp2"),f=r("XnKn"),b=r("tvxL"),h=r("XmQJ"),O=r.n(h),v=r("Ji9V"),E=r.n(v),S=r("yTWb"),m=r.n(S),g=r("TelQ"),_=r.n(g),j=r("Hdln"),y=r("OW4m"),I=r("f48l"),w=r.n(I);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(t){var r=t.newbie,n=t.isScChat,a=t.showEntry,c=t.currentUser,i=t.isSubAccount,d=t.loginSuccess,h=t.socketSuccess,v=t.showChatWindow,S=t.totalUnreadCount,g=t.updateGuideRequested,I=t.showConversationDetail,k=t.updateChatWindowStatus,C=Object(o.useState)(!0),R=s()(C,2),T=R[0],M=R[1];Object(o.useEffect)((function(){v&&M(!1)}),[v]),Object(o.useEffect)((function(){if(a){var e=Date.now()-window.__START_MINICHAT__;Object(b.collectComponentTask)(b.ReportComponent.APP,{duration:e,id:b.ReportPoint.SHOW_WEBCHAT})}}),[a]);var D=c.distribution_status,P=c.locale,A=["tw","cn"].includes(Object(f.getServiceLocale)(P)),N=Object(f.checkEntryGuide)(r),U=S>0,F=S>99?"99+":S,L="\n    ".concat(w.a.root,"\n    ").concat(n?w.a.scEntry:"","\n    ").concat(U?w.a.hasUnread:"","\n  "),q=Object(o.useMemo)((function(){var e={enter:w.a.windowEnter,enterActive:w.a.windowEnterActive,exit:w.a.windowExit,exitActive:w.a.windowExitActive};return n||(e.exitActive=w.a.mallWindowExitActive),I||(e=x(x({},e),{},{enter:w.a.halfWindowEnter,enterActive:w.a.halfWindowEnterActive,exitActive:n?w.a.halfWindowExitActive:w.a.halfMallWindowExitActive})),e}),[n,I]);return a?u.a.createElement(u.a.Fragment,null,T&&u.a.createElement("div",{className:L},u.a.createElement("div",{className:w.a.logoWrapper,onClick:function(){d&&h&&Object(b.clickTracker)({trackerName:"clickChatIcon",data:{has_unread_convo:!!S,unread_convo_cnt:S,ctx_url:window.location.href},page:n?"seller_center_chat":"minichat_page"}),k({shouldShowWindow:!0})}},S>0&&u.a.createElement("div",{className:w.a.counts},F),i&&D&&n&&u.a.createElement("div",{className:"".concat(w.a.statusDot," ").concat(w.a[D])}),u.a.createElement(p.Icon,{svg:m.a,className:w.a.chat}),u.a.createElement(p.Icon,{svg:A?_.a:O.a,className:w.a.logo})),n&&u.a.createElement("div",{className:w.a.jumpbar,onClick:function(){Object(b.clickTracker)({trackerName:"clickToWebchatButton"}),Object(y.a)({currentConversation:{},webChatUrl:Object(f.getWebChatUrl)()})}},u.a.createElement(p.Tooltip,{placement:"right",content:e("header.tooltip.see_all")},u.a.createElement(p.Icon,{svg:E.a,className:w.a.jump}))),n&&N&&u.a.createElement("div",{className:w.a.portal},u.a.createElement("div",{className:w.a.guideContent},u.a.createElement("div",{className:w.a.guideItem},u.a.createElement(p.Icon,{svg:m.a,className:"".concat(w.a.guideIcon," ").concat(w.a.chatLogo)}),u.a.createElement("span",{className:w.a.guideTip},e("newbie.tips.chat_icon"))),u.a.createElement("div",{className:w.a.guideItem},u.a.createElement(p.Icon,{svg:E.a,className:"".concat(w.a.guideIcon," ").concat(w.a.jump)}),u.a.createElement("span",{className:w.a.guideTip},e("newbie.tips.open_webchat_icon")))),u.a.createElement("div",{className:w.a.guideBtn,onClick:function(){var e=Object(f.checkEntryGuide)(r);g({newbieId:e.id})}},e("settings.message_shortcuts.import.confirm")))),u.a.createElement(l.a,{unmountOnExit:!0,in:v,timeout:I?300:225,classNames:q,onEnter:null,onExited:function(){return M(!0)}},u.a.createElement(j.a,t))):null};C.propTypes={newbie:d.a.array,isScChat:d.a.bool,showEntry:d.a.bool,currentUser:d.a.object,isSubAccount:d.a.bool,loginSuccess:d.a.bool,socketSuccess:d.a.bool,showChatWindow:d.a.bool,totalUnreadCount:d.a.number,updateGuideRequested:d.a.func,showConversationDetail:d.a.bool,updateChatWindowStatus:d.a.func},t.a=C}).call(this,r("iMMW").t)},W7uR:function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));r("RW0V"),r("ioFf"),r("0l/t"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/");var n=r("lSNA"),a=r.n(n),c=r("FH7K"),s=r("4l3w");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=Object(c.a)(a()({},s.a.DELETE_CONVERSATION_MESSAGE_HASH,(function(e){return{conversationId:e.conversationId}}))).deleteConversationMessageHash;t.a=a()({},s.a.DELETE_CONVERSATION_MESSAGE_HASH,(function(e,t){var r=t.payload.conversationId,n=e.messageIdsHash;return delete n[r],u(u({},e),{},{messageIdsHash:u({},n)})}))},b7p5:function(e,t,r){"use strict";(function(e){r("I5cv");var n=r("pVnL"),a=r.n(n),c=r("lwsE"),s=r.n(c),o=r("W8MJ"),u=r.n(o),i=r("PJYZ"),d=r.n(i),l=r("7W2i"),p=r.n(l),f=r("a1gu"),b=r.n(f),h=r("Nsbk"),O=r.n(h),v=(r("2Spj"),r("0l/t"),r("Z2Ku"),r("q1tI")),E=r.n(v),S=r("17x9"),m=r.n(S),g=r("Hxv6"),_=r.n(g),j=r("2r9f"),y=r.n(j),I=r("O8oF"),w=r("FL2V"),k=r("MQp2"),x=r("S7/o"),C=r("tvxL"),R=r("AlKw"),T=r.n(R);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var a=O()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return b()(this,r)}}var D=["Unread","All","Pinned","Unreplied"],P=["Unread","Unreplied"],A=function(t){p()(n,t);var r=M(n);function n(e){var t;return s()(this,n),(t=r.call(this,e)).state={resetRowsMap:!1},t.listNode=null,t.scrollTop=0,t.needScrollToRow=!1,t.getListRef=t.getListRef.bind(d()(t)),t.onListScroll=t.onListScroll.bind(d()(t)),t.makeRenderedCell=t.makeRenderedCell.bind(d()(t)),t.onRowRendered=t.onRowRendered.bind(d()(t)),t.loadMoreRowsRequested=t.loadMoreRowsRequested.bind(d()(t)),t.handleClickConversation=t.handleClickConversation.bind(d()(t)),t.handleResetCacheMap=t.handleResetCacheMap.bind(d()(t)),t}return u()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.sortedConversations,r=e.sortedConversations.length,n=t.length;r<n&&(this.stopIndex=this.stopIndex+n-r,this.needScrollToRow=!0);var a=this.props,c=a.filter,s=a.conversationDirection;if(this.needScrollToRow&&P.includes(c)&&"latest"===s){var o=this.stopIndex<0||this.scrollTop<60?0:this.stopIndex;this.listNode&&this.listNode.scrollToRow(o)}this.needScrollToRow=!1}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"onListScroll",value:function(e){this.scrollTop=e}},{key:"onRowRendered",value:function(e){this.needScrollToRow||(this.stopIndex=e)}},{key:"loadMoreRowsRequested",value:function(){(0,this.props.fetchConversationsRequested)({direction:"older"})}},{key:"makeRenderedCell",value:function(e,t){var r=this.props,n=r.keyword,a=r.currentUser,c=r.isSubAccount,s=r.updateOpenedMenu,o=r.currentConversation,u=r.openedMenu,i=r.draftHash,d=r.isInSearch,l=r.isScChat;return d?E.a.createElement(I.a,{currentUser:a,style:t,keyword:n,conversation:e,isSubAccount:c,onClick:this.handleClickConversation}):E.a.createElement(w.a,{style:t,isScChat:l,draftHash:i,openedMenu:u,currentUser:a,conversation:e,isSubAccount:c,updateOpenedMenu:s,onClick:this.handleClickConversation,currentConversationId:o.id})}},{key:"handleClickConversation",value:function(e){var t=this.props,r=t.isInSearch,n=t.currentConversation,a=t.showConversationRequested,c=t.searchConversationsRequested,s=t.updateConversationDetailStatus,o=t.setInScrollToMessage,u=e.id,i=e.unread_count;if(r)return c({}),void a({conversation:e});n?u!==n.id&&(Object(C.clickTracker)({trackerName:"clickChatUser",data:{rebbot:i,conversation_id:u}}),a({conversation:e}),o({inScrollToMessage:!1})):(Object(C.clickTracker)({trackerName:"clickChatUser",data:{rebbot:i,conversation_id:u}}),a({conversation:e}));s({shouldShowConversationDetail:!0})}},{key:"handleResetCacheMap",value:function(){this.setState({resetRowsMap:!1})}},{key:"render",value:function(){var t=this.props,r=t.results,n=t.keyword,c=t.listsHash,s=t.isInSearch,o=t.sortedConversations,u=t.currentConversation,i=t.openedMenu,d=t.conversationHttpStatus,l=t.searchConversationHttpStatus,p={};if(s)p={status:l,isInfinite:!1,listItems:r,extraProps:{keyword:n}};else{var f={openedMenu:i,listsHash:c,currentConversation:u};p={status:d,listItems:o,resetRowsMap:this.state.resetRowsMap,loadMoreRowsRequested:this.loadMoreRowsRequested,extraProps:f}}return 0===p.listItems.length&&"succeed"===p.status?E.a.createElement(k.Empty,{classname:T.a.empty,image:s?_.a:y.a,text:e("conversation_list.no_search_result")}):E.a.createElement(x.a,a()({},p,{needPaddingBottom:!0,getListRef:this.getListRef,handleListScroll:this.onListScroll,makeRenderedCell:this.makeRenderedCell,handleRowRendered:this.onRowRendered,onResetCacheMap:this.handleResetCacheMap}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.resetRowsMap,n=t.filter,a=e.filter,c=null;if(a!==n){c={filter:a};var s=D.includes(n)&&D.includes(a)&&n!==a;r!==s&&(c.resetRowsMap=s)}return c}}]),n}(E.a.PureComponent);A.propTypes={filter:m.a.string,results:m.a.array,keyword:m.a.string,isScChat:m.a.bool,listsHash:m.a.string,draftHash:m.a.object,isInSearch:m.a.bool,openedMenu:m.a.string,currentUser:m.a.object,isSubAccount:m.a.bool,currentUserId:m.a.number,updateOpenedMenu:m.a.func,sortedConversations:m.a.array,currentConversation:m.a.object,conversationDirection:m.a.string,conversationHttpStatus:m.a.string,showConversationRequested:m.a.func,fetchConversationsRequested:m.a.func,searchConversationsRequested:m.a.func,searchConversationHttpStatus:m.a.string,updateConversationDetailStatus:m.a.func,setInScrollToMessage:m.a.func},t.a=A}).call(this,r("iMMW").t)},gSTE:function(e,t,r){"use strict";(function(e){r("I5cv"),r("RW0V"),r("ioFf"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/");var n=r("lSNA"),a=r.n(n),c=r("lwsE"),s=r.n(c),o=r("W8MJ"),u=r.n(o),i=r("PJYZ"),d=r.n(i),l=r("7W2i"),p=r.n(l),f=r("a1gu"),b=r.n(f),h=r("Nsbk"),O=r.n(h),v=(r("2Spj"),r("0l/t"),r("L9s1"),r("Z2Ku"),r("bWfx"),r("OG14"),r("q1tI")),E=r.n(v),S=r("17x9"),m=r.n(S),g=r("SdKD"),_=r("tvxL"),j=r("XnKn"),y=r("MQp2"),I=r("4i+F"),w=r.n(I),k=r("+DaP"),x=r.n(k),C=r("bByp"),R=r.n(C);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var a=O()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return b()(this,r)}}var D=function(t){p()(n,t);var r=M(n);function n(e){var t;return s()(this,n),(t=r.call(this,e)).state={focus:!1},t.handleFocus=t.handleFocus.bind(d()(t)),t.handleCancelSearch=t.handleCancelSearch.bind(d()(t)),t.handleKeyDown=t.handleKeyDown.bind(d()(t)),t.handleSearch=Object(j.debounce)(t.handleChange.bind(d()(t))),t.handleFilterMenuOpen=t.handleFilterMenuOpen.bind(d()(t)),t}return u()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.keyword;t===e.keyword||t||(this.input.value="")}},{key:"handleFocus",value:function(e){this.setState({focus:e}),e&&Object(_.clickTracker)({trackerName:"clickSearchName"})}},{key:"handleCancelSearch",value:function(){this.input.value="",this.handleChange()}},{key:"handleChange",value:function(e){this.input&&this.props.searchConversationsRequested({keyword:this.input.value})}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case 27:this.handleCancelSearch(),e.preventDefault()}}},{key:"filter",value:function(e){var t=this.props,r=t.filter,n=t.updateConversationFilter,a=t.resetConversationRequested,c=t.fetchConversationsRequested;if(e!==r){n({filter:e});var s=[e,r];a(),Object(_.clickTracker)({trackerName:"clickFilter".concat(e)});var o=s.includes("Unread"),u=s.includes("Pinned"),i=s.includes("Unreplied");(o||u||i)&&c({direction:"reset"})}}},{key:"getFilterOptions",value:function(t){var r=this,n=t.isSubAccount,c=t.totalUnreadConversationsCount,s=t.isScChat,o=["All","Unread","Pinned"];!n&&s&&o.splice(o.length-1,0,"Unreplied");var u=o.map((function(t){var n={};return c>0&&"Unread"===t&&(n.icon="reddotIcon"),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:e("conversation_list.filter.".concat(t.toLowerCase())),handleSelect:function(){r.filter(t)}},n)}));return n&&u.push({name:e("common.closed"),handleSelect:function(){r.filter("Closed")}}),u}},{key:"handleFilterMenuOpen",value:function(){var e=this.props.updateOpenedMenu;Object(_.clickTracker)({trackerName:"clickFilter"}),e("conversions_filter")}},{key:"render",value:function(){var t=this,r=this.state.focus,n=this.props,a=n.keyword,c=void 0===a?"":a,s=n.filter,o=n.openedMenu,u=n.isSubAccount,i=n.totalUnreadConversationsCount,d=n.isScChat,l=function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t="Closed"===r?"common.closed":"conversation_list.filter.".concat(r.toLowerCase()),e(t)}(s),p=this.getFilterOptions({isSubAccount:u,totalUnreadConversationsCount:i,isScChat:d}),f=e("conversation_list.search.placehoder");return E.a.createElement("div",{className:R.a.root},E.a.createElement("div",{className:R.a.search},E.a.createElement("input",{defaultValue:c,className:R.a.input,onChange:this.handleSearch,onKeyDown:this.handleKeyDown,placeholder:f,ref:function(e){return t.input=e},onBlur:function(){return t.handleFocus(!1)},onFocus:function(){return t.handleFocus(!0)}}),E.a.createElement("div",{className:"".concat(R.a.wrapper," ").concat(r||c?R.a.focus:"")},E.a.createElement(y.Icon,{svg:x.a,className:R.a.icon})),c&&E.a.createElement("div",{className:R.a.cancel,onClick:this.handleCancelSearch})),!c&&!r&&E.a.createElement("div",{className:"".concat(R.a.filter," ").concat(R.a.reddotFilter)},i>0&&E.a.createElement("div",{className:R.a.reddot}),E.a.createElement(g.a,{menuKey:"conversions_filter",options:p,openedMenu:o,onOpen:this.handleFilterMenuOpen,placement:"bottom-end",label:E.a.createElement("div",{className:R.a.selected},l,E.a.createElement(y.Icon,{svg:w.a,className:R.a.arrowDown}))})))}}]),n}(E.a.PureComponent);D.propTypes={filter:m.a.string,keyword:m.a.string,openedMenu:m.a.string,isSubAccount:m.a.bool,updateOpenedMenu:m.a.func,updateConversationFilter:m.a.func,resetConversationRequested:m.a.func,fetchConversationsRequested:m.a.func,searchConversationsRequested:m.a.func,isScChat:m.a.bool,totalUnreadConversationsCount:m.a.number},t.a=D}).call(this,r("iMMW").t)},iMMW:function(e,t,r){"use strict";r.r(t),r.d(t,"t",(function(){return a}));r("2Spj");var n=r("XzT5"),a=n.default.t.bind(n.default)},iV3A:function(e,t,r){"use strict";r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return y})),r.d(t,"b",(function(){return I})),r.d(t,"e",(function(){return k})),r.d(t,"h",(function(){return x})),r.d(t,"f",(function(){return T})),r.d(t,"g",(function(){return D}));var n,a,c=r("lSNA"),s=r.n(c),o=r("o0o1"),u=r.n(o),i=(r("9VmF"),r("pIFo"),r("dRSK"),r("RW0V"),r("ioFf"),r("0l/t"),r("mYba"),r("8+KV"),r("jm62"),r("WLL4"),r("HAE/"),r("5rFJ")),d=r("FH7K"),l=r("tvxL"),p=r("4l3w");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=u.a.mark(x),O=u.a.mark(C),v=u.a.mark(R),E=u.a.mark(T),S=u.a.mark(D),m=180,g=function(e){return e?e/3*1e3:8e3},_=function(e){return e.startsWith("http:")?e.replace("http:","https:"):e},j=Object(d.a)((n={},s()(n,p.a.UPDATE_VIDEO_INFO,(function(e){var t=e.id,r=e.info;return{id:t,info:void 0===r?{}:r}})),s()(n,p.a.DELETE_VIDEO_INFO,(function(e){return{id:e.id}})),n)),y=j.updateVideoInfo,I=j.deleteVideoInfo,w={GET_CONFIG_ERROR:"get_config_error",UPLOAD_ERROR:"upload_error",REPORT_UPLOAD_ERROR:"report_upload_error",PUSH_TIMEOUT:"push_timeout",QUERY_RESULT_ERROR:"query_result_error"};function k(e,t){Object(l.fetch)({method:"POST",subServer:"coreapi",parent:"video",resource:"monitor",payload:JSON.stringify({step:e,reason:t})}).catch((function(){return{}}))}function x(e,t){var r,n,a,c;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(i.call)(l.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"preupload",payload:JSON.stringify({conversation_id:e,shop_id:t})});case 3:if(r=s.sent,n=r.is_allowed,a=r.data,c=void 0===a?{}:a,n){s.next=11;break}return s.next=10,Object(i.call)(k,w.GET_CONFIG_ERROR,"Not Allowed");case 10:return s.abrupt("return",null);case 11:return s.abrupt("return",c);case 14:return s.prev=14,s.t0=s.catch(0),s.next=18,Object(i.call)(k,w.GET_CONFIG_ERROR);case 18:return s.abrupt("return",!1);case 19:case"end":return s.stop()}}),h,null,[[0,14]])}function C(e){var t,n,a,c,s,o,i,d,p,f,b,h,v,E,S,m;return u.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=performance.now(),n=e.file,a=e.uploadId,c=e.onProgress,s=e.serviceId,o=e.token,i=e.domain,d=e.uploadDomain,p=e.sliceSize,f=e.bucket,u.next=4,Promise.all([r.e(1),r.e(2),r.e(0),r.e(10),r.e(11)]).then(r.t.bind(null,"lQul",7));case 4:return b=u.sent,h=b.default,v=b.UploaderEvents,E=b.MediaType,S=new h({authorization:o,serviceID:s,uploadDomain:_(d),domain:_(i),vid:a,sliceSize:p,bucket:f}),u.next=11,S.upload({mediaFile:n,mediaType:E.video});case 11:return(m=u.sent).on(v.mediaProgress,(function(e){return c(.95*e.percent*100)})),u.next=15,m.done().then((function(e){var r=performance.now();return Object(l.collectAsyncTask)(l.ReportPoint.VIDEO_UPLOAD,r-t),{error:!1,data:e}})).catch((function(){return k(w.UPLOAD_ERROR),!1}));case 15:return u.abrupt("return",u.sent);case 16:case"end":return u.stop()}}),O)}function R(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.call)(l.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"report_upload",payload:JSON.stringify(e)});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,Object(i.call)(k,w.REPORT_UPLOAD_ERROR);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),v,null,[[0,6]])}function T(e){var t;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(i.call)(l.fetch,{subServer:"coreapi",parent:"video",resource:"upload_status",params:{vid:e}});case 3:return t=r.sent,r.abrupt("return",t);case 7:return r.prev=7,r.t0=r.catch(0),r.next=11,Object(i.call)(k,w.QUERY_RESULT_ERROR);case 11:return r.abrupt("return",{});case 12:case"end":return r.stop()}}),E,null,[[0,7]])}var M=function(e){var t=e.video,r=e.thumbnail,n=e.duration;return{video_url:t,thumb_url:r,thumb_width:e.width,thumb_height:e.height,duration_seconds:Math.ceil(n/1e3)}};function D(e){var t,r,n,a,c,s,o,d,p,f,b,h,O,v,E,_,j,I,x,D,P,A,N,U,F,L,q,G;return u.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Error("upload fail"),r=e.id,n=e.file,a=e.duration,c=e.onProgress,s=void 0===c?function(){return{}}:c,u.next=4,Object(i.select)(Object(l.selectVideoInfoByKey)(r));case 4:return o=u.sent,p=(d=o||{}).vid,f=d.services,b=f.find((function(e){return"txcloud"===e.service_id}))||f[0],h=b.service_id,O=b.token,v=b.upload_domain,E=b.domain,_=b.bucket,j=b.slice_size,u.next=10,Object(i.call)(C,{file:n,uploadId:p,serviceId:h,token:O,domain:E,bucket:_,sliceSize:j,uploadDomain:v,onProgress:s});case 10:if(I=u.sent){u.next=13;break}throw t;case 13:if(x="txcloud"===h,D=I.data.video,P=D.md5,A=D.extendId,N=D.url,!x||N){u.next=17;break}throw t;case 17:return u.next=19,Object(i.call)(R,{vid:p,md5:P,service_id:h,extend_id:A,file_size:n.size,video_url:N||"".concat(E,"/").concat(p,".ori.mp4")});case 19:if(u.sent){u.next=22;break}throw t;case 22:return u.next=24,Object(i.delay)(g(a));case 24:U=m;case 25:if(!(U>0)){u.next=58;break}return u.next=28,Object(i.select)(Object(l.selectVideoInfoByKey)(r));case 28:if("successful"!==(o=u.sent).status){u.next=31;break}return u.abrupt("return",M(o.uploadResult));case 31:if("failed"!==o.status){u.next=35;break}return u.next=34,Object(i.call)(k,w.QUERY_RESULT_ERROR,"failed");case 34:throw t;case 35:return u.next=37,Object(i.call)(T,p);case 37:if(F=u.sent,(L=F.status)&&"reported"!==L){u.next=45;break}return u.next=42,Object(i.delay)(3e3);case 42:U-=3,u.next=56;break;case 45:return u.next=47,Object(i.put)(y({id:r,info:{status:L}}));case 47:if("successful"!==L){u.next=53;break}return(q=performance.getEntriesByName("REPORT_UPLOAD_".concat(p),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(p)),G=performance.getEntriesByName("SERVICE_DONE_".concat(p))[0].startTime-q.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(p)),performance.clearMarks("SERVICE_DONE_".concat(p)),Object(l.collectAsyncTask)(l.ReportPoint.SERVICE_DONE,G)),u.abrupt("return",M(F));case 53:return u.next=55,Object(i.call)(k,w.QUERY_RESULT_ERROR,L);case 55:throw t;case 56:u.next=25;break;case 58:return u.next=60,Object(i.call)(k,w.PUSH_TIMEOUT,status);case 60:throw t;case 61:case"end":return u.stop()}}),S)}t.a=(a={},s()(a,p.a.UPDATE_VIDEO_INFO,(function(e,t){var r=t.payload,n=r.id,a=r.info,c=e.videoMap[n]||{};return b(b({},e),{},{videoMap:b(b({},e.videoMap),{},s()({},n,b(b({},c),a)))})})),s()(a,p.a.DELETE_VIDEO_INFO,(function(e,t){var r=t.payload.id,n=e.videoMap;return delete n[r],b(b({},e),{},{videoMap:b({},n)})})),a)},imT4:function(e,t,r){"use strict";(function(e){var n=r("J4zp"),a=r.n(n),c=(r("0l/t"),r("bWfx"),r("Z2Ku"),r("q1tI")),s=r.n(c),o=r("17x9"),u=r.n(o),i=r("tvxL"),d=r("MQp2"),l=r("XnKn"),p=r("OW4m"),f=r("gXTF"),b=r("SdKD"),h=r("OTLN"),O=r("l4Er"),v=r("fe4J"),E=r("PWQ0"),S=r.n(E),m=r("XmQJ"),g=r.n(m),_=r("4Ntn"),j=r.n(_),y=r("YnXV"),I=r.n(y),w=r("vd8H"),k=r.n(w),x=r("aCn2"),C=r.n(x),R=r("TelQ"),T=r.n(R),M=r("5deg"),D=r.n(M),P=r("DIuY"),A=r.n(P),N=r("RK9Y"),U=r.n(N),F=r("oWPI"),L=r.n(F),q=r("S4Or"),G=r.n(q),H=r("VTii"),W=r.n(H),V=r("FK2i"),Q=r.n(V),K=Object(c.lazy)((function(){return Promise.all([r.e(4),r.e(3),r.e(1),r.e(2),r.e(0),r.e(5),r.e(6)]).then(r.bind(null,"Lzd8"))})),B=Object(v.a)(K),Y={seeAll:U.a,minimize:S.a,hideDialog:A.a,showDialog:D.a},J=function(t){var r=t.newbie,n=t.isScChat,o=t.openedMenu,u=t.currentUser,v=t.isSubAccount,E=t.currentBuyer,S=t.loginSuccess,m=t.socketSuccess,_=t.totalUnreadCount,y=t.showConversationDetail,w=t.currentConversation,x=t.updateGuideRequested,R=t.updateUserRequested,M=t.updateOpenedMenu,D=t.setToastInformation,P=t.toast,N=t.connectSocket,U=t.updateChatWindowStatus,F=t.changeConversationStatusRequested,q=t.updateConversationDetailStatus,H=t.filter,V=Object(c.useState)(!1),K=a()(V,2),J=K[0],z=K[1],X=Object(c.useState)(!1),Z=a()(X,2),$=Z[0],ee=Z[1];Object(c.useEffect)((function(){Object(i.viewTracker)({trackerName:"viewPage",data:{tab_name:H.toLowerCase()}})}),[H]);var te,re,ne={key:"seeAll",tip:"header.tooltip.see_all",customProps:{position:"right",edgeDistance:12},icon:"seeAll",handler:function(e){Object(i.clickTracker)({trackerName:"clickToWebchatButton"}),Object(p.a)({currentConversation:w,webChatUrl:Object(l.getWebChatUrl)()})}},ae={key:"minimize",tip:"header.tooltip.minimize",icon:"minimize",handler:function(e){U({shouldShowWindow:!1}),Object(i.clickTracker)({trackerName:"clickCloseButton"})}},ce=u.distribution_status,se=u.locale,oe=["tw","cn"].includes(Object(l.getServiceLocale)(se)),ue="working"===ce,ie=function(t){return[{name:s.a.createElement("div",{className:Q.a.statusOption},s.a.createElement("div",{className:Q.a.selected},t&&s.a.createElement(d.Icon,{svg:j.a,className:Q.a.currentStatus})),s.a.createElement("div",{className:"".concat(Q.a.status," ").concat(Q.a.working)}),s.a.createElement("div",{className:t?Q.a.active:""},e("common.online"))),handleSelect:function(){!t&&R({status:"working"}),!t&&Object(i.clickTracker)({trackerName:"clickStatusOnlineButton"})},meta:{noBorder:!0}},{name:s.a.createElement("div",{className:Q.a.statusOption},s.a.createElement("div",{className:Q.a.selected},!t&&s.a.createElement(d.Icon,{svg:j.a,className:Q.a.currentStatus})),s.a.createElement("div",{className:"".concat(Q.a.status," ").concat(Q.a.hangup)}),s.a.createElement("div",{className:t?"":Q.a.active},e("common.offline"))),handleSelect:function(){t&&R({status:"hang_up"}),t&&Object(i.clickTracker)({trackerName:"clickStatusHangup"})}}]}(ue),de=Object(l.checkHeaderGuide)(r),le="".concat(Q.a.userStatus," ").concat(Q.a.hoverStyle," ").concat(ue?Q.a.working:Q.a.hangup);return s.a.createElement("div",{style:n?{borderRadius:"4px"}:{},className:y?Q.a.container:Q.a.halfContainer},s.a.createElement("div",{className:Q.a.header},s.a.createElement("div",{className:Q.a.logoWrapper},v&&n&&s.a.createElement("div",{className:Q.a.customMenu},s.a.createElement(b.a,{options:ie,menuKey:"user_status",openedMenu:o,placement:"bottom-start",onOpen:function(){Object(i.clickTracker)({trackerName:"clickShopHeadStatus"}),M("user_status"),ee(!0)},onClose:function(){return ee(!1)},label:s.a.createElement(d.Tooltip,{content:e("common.".concat(ue?"online":"offline"))},s.a.createElement("div",{className:le,onMouseEnter:function(){return z(!0)},onMouseLeave:function(){return z(!1)}},($||J)&&s.a.createElement(d.Icon,{svg:I.a,className:Q.a.arrow})))})),s.a.createElement(d.Icon,{svg:oe?T.a:g.a,className:Q.a.logo}),!!_&&s.a.createElement("div",{className:Q.a.unread},s.a.createElement(d.Icon,{svg:k.a,className:Q.a.unreadOpen}),_,s.a.createElement(d.Icon,{svg:C.a,className:Q.a.unreadClose}))),(re=[],y?re.push({key:"hideDialog",tip:"header.tooltip.close_dialog",icon:"hideDialog",handler:function(e){q({shouldShowConversationDetail:!1}),Object(i.clickTracker)({trackerName:"clickFoldButton"})}}):re.push({key:"showDialog",tip:"header.tooltip.open_dialog",icon:"showDialog",handler:function(e){q({shouldShowConversationDetail:!0,needMark:!0}),Object(i.clickTracker)({trackerName:"clickUnFoldButton"})}}),re.push(ae),n&&re.push(ne),s.a.createElement("div",{className:Q.a.operatorWrapper},re.map((function(t){return s.a.createElement("div",{key:t.key,className:Q.a.operatorItemWrapper},s.a.createElement(d.Tooltip,{content:e(t.tip)},s.a.createElement(d.Icon,{svg:Y[t.icon],className:Q.a[t.icon],onClick:t.handler})))}))))),s.a.createElement("div",{className:Q.a.windows},(te={isScChat:n,openedMenu:o,currentUser:u,isSubAccount:v,currentBuyer:E,loginSuccess:S,socketSuccess:m,updateOpenedMenu:M,setToastInformation:D,currentConversation:w,showConversationDetail:y,changeConversationStatusRequested:F,currentUserId:(u||{}).id},S?m?s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{toast:P,isScChat:n,setToastInformation:D}),s.a.createElement("div",{className:Q.a.details},w.id?s.a.createElement(B,te):s.a.createElement("div",{className:Q.a.blank},s.a.createElement("img",{src:L.a,className:Q.a.image}),s.a.createElement("div",{className:Q.a.title},e("blank_page.".concat(n?"":"mall_","title"))),n&&s.a.createElement("div",{className:Q.a.subtitle},e("blank_page.tip")))),s.a.createElement(O.a,te),s.a.createElement(f.a,null)):s.a.createElement("div",{className:Q.a.maxBlank},s.a.createElement("img",{src:G.a,className:Q.a.errorImage}),s.a.createElement("div",{className:Q.a.title},e("socket_error.title")),s.a.createElement("div",{className:Q.a.reload,onClick:N},e("common.error.reload"))):s.a.createElement("div",{className:Q.a.maxBlank},s.a.createElement("img",{src:W.a,className:Q.a.errorImage}),s.a.createElement("div",{className:Q.a.title},e("common.error.hint_text")),s.a.createElement("div",{className:Q.a.subtitle},e("login_error.tips"))))),n&&de&&s.a.createElement("div",{className:Q.a.portal},s.a.createElement("div",{className:Q.a.guideContent},s.a.createElement("div",{className:Q.a.guideItem},s.a.createElement(d.Icon,{svg:A.a,className:"".concat(Q.a.guideIcon," ").concat(Q.a.hideDialog)}),s.a.createElement("span",{className:Q.a.guideTip},e("newbie.tips.hide_conversation")))),s.a.createElement("div",{className:Q.a.guideBtn,onClick:function(){var e=Object(l.checkHeaderGuide)(r);x({newbieId:e.id})}},e("settings.message_shortcuts.import.confirm"))))};J.propTypes={newbie:u.a.array,toast:u.a.object,isScChat:u.a.bool,openedMenu:u.a.string,currentUser:u.a.object,isSubAccount:u.a.bool,loginSuccess:u.a.bool,currentBuyer:u.a.object,socketSuccess:u.a.bool,connectSocket:u.a.func,updateChatParams:u.a.func,updateOpenedMenu:u.a.func,totalUnreadCount:u.a.number,updateUserRequested:u.a.func,setToastInformation:u.a.func,currentConversation:u.a.object,updateGuideRequested:u.a.func,updateChatWindowStatus:u.a.func,showConversationDetail:u.a.bool,resetConversationRequested:u.a.func,updateConversationDetailStatus:u.a.func,changeConversationStatusRequested:u.a.func,filter:u.a.string},t.a=J}).call(this,r("iMMW").t)},l4Er:function(e,t,r){"use strict";(function(e){r("I5cv");var n=r("lwsE"),a=r.n(n),c=r("W8MJ"),s=r.n(c),o=r("PJYZ"),u=r.n(o),i=r("7W2i"),d=r.n(i),l=r("a1gu"),p=r.n(l),f=r("Nsbk"),b=r.n(f),h=(r("2Spj"),r("q1tI")),O=r.n(h),v=r("/MKj"),E=r("LI8N"),S=r.n(E),m=r("tvxL"),g=r("XnKn"),_=r("FZfk"),j=r("N20w"),y=r("S4Or"),I=r.n(y);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var k=function(t){d()(n,t);var r=w(n);function n(e){var t;return a()(this,n),(t=r.call(this,e)).errorRef=O.a.createRef(),t.handleRedirection=t.handleRedirection.bind(u()(t)),t}return s()(n,[{key:"handleRedirection",value:function(){window.open(Object(g.getWebChatUrl)())}},{key:"componentDidMount",value:function(){if(this.errorRef&&this.errorRef.current){var e=this.errorRef.current.firstElementChild;e&&e.addEventListener("click",this.handleRedirection)}}},{key:"componentWillUnmount",value:function(){if(this.errorRef&&this.errorRef.current){var e=this.errorRef.current.firstElementChild;e&&e.removeEventListener("click",this.handleRedirection)}}},{key:"render",value:function(){return this.props.conversationHttpStatus===g.DataFetchStatus.TEMPORY_ERROR?O.a.createElement("div",{className:S.a.error},O.a.createElement("img",{className:S.a.img,src:I.a}),O.a.createElement("div",{className:S.a.tips},e("common.tempory_error.tip1")),O.a.createElement("div",{ref:this.errorRef,className:S.a.tips,dangerouslySetInnerHTML:{__html:e("common.tempory_error.tip2")}})):O.a.createElement(_.a,this.props)}}]),n}(O.a.PureComponent),x={markMessagesRequested:m.markMessagesRequested,updateConversationFilter:m.updateConversationFilter,showConversationRequested:m.showConversationRequested,resetConversationRequested:m.resetConversationRequested,deleteConversationRequested:m.deleteConversationRequested,fetchConversationsRequested:m.fetchConversationsRequested,searchConversationsRequested:m.searchConversationsRequested,redirectConversationRequested:m.redirectConversationRequested,updateConversationDetailStatus:m.updateConversationDetailStatus,fetchDegradeConversationsDetail:m.fetchDegradeConversationsDetail,setInScrollToMessage:j.setInScrollToMessage};t.a=Object(v.connect)((function(e){return{filter:Object(m.filterSelector)(e),keyword:Object(m.keywordSelector)(e),results:Object(m.resultsSelector)(e),listsHash:Object(m.listsHashSelector)(e),draftHash:Object(m.draftHashSelector)(e),socketFeedback:Object(m.feedbackSelector)(e),networkStatus:Object(m.networkStatusSelector)(e),totalUnreadConversationsCount:Object(m.totalUnreadConversationsCountSelector)(e),sortedConversations:Object(m.sortedConversationsSelector)(e),conversationDirection:Object(m.conversationDirectionSelector)(e),conversationHttpStatus:Object(m.conversationHttpStatusSelector)(e),searchConversationHttpStatus:Object(m.searchConversationHttpStatusSelector)(e)}}),x)(k)}).call(this,r("iMMW").t)},oIQF:function(e,t,r){"use strict";(function(e){r.d(t,"h",(function(){return X})),r.d(t,"i",(function(){return Z})),r.d(t,"l",(function(){return $})),r.d(t,"j",(function(){return ee})),r.d(t,"g",(function(){return te})),r.d(t,"a",(function(){return re})),r.d(t,"b",(function(){return ne})),r.d(t,"c",(function(){return ae})),r.d(t,"k",(function(){return ce})),r.d(t,"f",(function(){return ie})),r.d(t,"e",(function(){return he})),r.d(t,"n",(function(){return Ee})),r.d(t,"m",(function(){return Se}));r("RW0V"),r("ioFf"),r("mYba"),r("jm62"),r("WLL4"),r("HAE/");var n,a=r("J4zp"),c=r.n(a),s=r("RIqP"),o=r.n(s),u=r("lSNA"),i=r.n(u),d=(r("Btvt"),r("h7Nl"),r("a1Th"),r("bWfx"),r("Z2Ku"),r("dRSK"),r("f3/d"),r("0l/t"),r("8+KV"),r("L9s1"),r("KKXr"),r("eM6i"),r("DNiP"),r("Vd3H"),r("/8Fb"),r("o0o1")),l=r.n(d),p=r("xk4V"),f=r.n(p),b=r("Ogvq"),h=r("lPiR"),O=r.n(h),v=r("Qf4c"),E=r.n(v),S=r("FH7K"),m=r("5rFJ"),g=r("tvxL"),_=r("r9ex"),j=r("1o5h"),y=r("5mRn"),I=r("iV3A"),w=r("SmG+"),k=r("XnKn"),x=r("W7uR"),C=l.a.mark(se),R=l.a.mark(oe),T=l.a.mark(ue),M=l.a.mark(ie),D=l.a.mark(de),P=l.a.mark(pe),A=l.a.mark(he),N=l.a.mark(Oe),U=l.a.mark(ve),F=l.a.mark(Ee),L=l.a.mark(Se);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H=k.MessageTypes.MSG_TYPE_IMAGE,W=k.MessageTypes.MSG_TYPE_TEXT,V=k.MessageTypes.MSG_TYPE_VOUCHER,Q=k.MessageTypes.MSG_TYPE_VOUCHER_WEB,K=k.MessageTypes.MSG_TYPE_WEBVIEW,B=k.MessageTypes.MSG_TYPE_VIDEO,Y=(k.MessageTypes.MSG_TYPE_ITEM_LIST,k.MessageTypes.MSG_TYPE_RATE_CARDS),J=null;J="mini-sc_redirect";var z=Object(S.a)({SEND_MESSAGES_REQUESTED:function(e){var t=e.id,r=e.conversationId,n=e.conversationUserId,a=e.messages,c=e.more;return{id:t,conversationId:r,conversationUserId:n,messages:a,more:void 0===c?{}:c}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){var t=e.conversationId,r=e.requestIds,n=e.isCancelable;return{conversationId:t,requestIds:r,isCancelable:void 0!==n&&n}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}},CANCEL_SENDING_MESSAGE_REQUESTED:function(e){return{id:e.id,conversationId:e.conversationId}},CANCEL_SENDING_MESSAGE_SUCCEEDED:function(e){return{id:e.id,conversationId:e.conversationId}},SEND_VIDEO_MESSAGE_REQUESTED:function(e){var t=e.conversationId,r=e.conversationUserId,n=e.message,a=e.isResend;return{conversationId:t,conversationUserId:r,message:n,isResend:void 0!==a&&a}}}),X=z.sendMessagesRequested,Z=z.sendMessagesSucceeded,$=z.sendingMessages,ee=z.sendMessagesToPending,te=z.sendMessagesFailed,re=z.abortAllSendingMessages,ne=z.cancelSendingMessageRequested,ae=z.cancelSendingMessageSucceeded,ce=z.sendVideoMessageRequested;function se(t){var r,n,a,c,s,o,u,i;return l.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return r=t.payload,n=r.conversationId,a=r.conversationUserId,c=r.message,s=r.isResend,d.next=3,Object(m.call)(I.h,n,c.shopId||c.shop_id);case 3:if(null!==(o=d.sent)){d.next=8;break}return d.next=7,Object(m.call)(g.setToastInformationSaga,Object(g.setToastInformation)({toast:{show:!0,type:"fail",message:e("toast.chat_bot_limit")}}));case 7:return d.abrupt("return");case 8:if(!1!==o){d.next=12;break}return d.next=11,Object(m.call)(g.setToastInformationSaga,Object(g.setToastInformation)({error:null}));case 11:return d.abrupt("return");case 12:return u=s?c.id:f()(),i=G({},o),s&&(i.precent=0),d.next=17,Object(m.put)(Object(I.d)({id:u,info:i}));case 17:return d.next=19,Object(m.put)(X({id:u,conversationId:n,conversationUserId:a,messages:[G(G({},c),{},{type:B})],more:{isResend:s}}));case 19:case"end":return d.stop()}}),C)}function oe(e){var t,r,n,a,c,s,o,u,i,d,p,f,b,h,O,v,E,S,_,y,I,C,T,M,D;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.conversationId,a=t.conversationUserId,c=t.messages,s=t.more,l.next=3,Object(m.select)(g.isScChatSelector);case 3:if(!l.sent){l.next=7;break}return l.next=7,Object(m.put)(Object(g.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 7:if(o=s.isResend,u=s.isFakingSource,!o){l.next=12;break}return l.next=11,ie({conversationId:n,messages:c,requestIds:[c[0].request_id],more:{isCancelable:!!r}});case 11:return l.abrupt("return");case 12:return l.next=14,Object(m.select)(g.inlocationSelector);case 14:if(!l.sent){l.next=25;break}return l.next=18,Object(m.select)(g.currentConversationSelector);case 18:return i=l.sent,l.next=21,Object(m.put)(Object(g.updateLocationMode)({inlocation:!1}));case 21:return l.next=23,Object(m.put)(Object(x.b)({conversationId:i.id}));case 23:return l.next=25,Object(m.call)(j.d,{payload:{conversation:i,reset:!0,source:k.MessageSource.send}});case 25:return l.next=27,Object(m.select)(g.isSubAccountSelector);case 27:return d=l.sent,l.next=30,Object(m.select)(g.entryPointSelector);case 30:return p=l.sent,l.next=33,Object(m.select)(g.messagesWithSourceSelector);case 33:return f=l.sent,l.next=36,Object(m.call)(k.getItem,J);case 36:return b=l.sent,h=c.map((function(e){var t;return Object(w.f)({id:r,recipientID:a,message:e,isSubAccount:d,redirectInfo:b,conversationId:n,replyToMessageId:null==e?void 0:null===(t=e.replyToMessage)||void 0===t?void 0:t.id,entryPoint:p})})),l.next=40,Object(m.select)(g.currentUserIdSelector);case 40:return O=l.sent,l.next=43,Object(m.select)(g.currentUserShopIdSelector);case 43:return v=l.sent,l.next=46,Object(m.select)(g.currentUserSelector);case 46:if(E=l.sent,S=h.map((function(e,t){var r,n=G({},e);n.from_id=O;var a,s=n.type,o=n.content;if(["product","order","voucher"].includes(s)){var u="".concat(s,"_id"),i=o[u];n.fetchStatus="done";var d=c.find((function(e){return e.content[u]===i}));d&&(n.textContent=d.textContent)}else s===W&&(n.translateStatus=k.TranslationStatus.PENDING);null!==(r=c[t])&&void 0!==r&&r.replyToMessage&&(n.quoted_msg=null===(a=c[t])||void 0===a?void 0:a.replyToMessage);return n.from_user_name=E.username||E.name,n})),_=f.filter((function(e){return e.hasMessageSource&&!e.isFaking})),y=f.filter((function(e){return e.hasMessageSource&&e.isFaking})),I=y[y.length-1],!y.length){l.next=57;break}return C=[],u||(S[0].sourceContent=I.sourceContent),y.forEach((function(e){C.push(Object(m.put)(Object(g.deleteRecord)({name:"messages",id:e.id})))})),l.next=57,Object(m.all)(C);case 57:if(!u){l.next=65;break}if(T=S[0]||{},M=T.source_content||{},!_.filter((function(e){var t=e.source_content||{};return M.shop_id===t.shop_id&&M.product_id===t.product_id&&M.order_id===t.order_id})).length){l.next=63;break}return l.abrupt("return");case 63:return l.next=65,Object(m.call)(w.g,S,v,d,!0);case 65:return D=Object(g.normalize)("messages",S),l.next=68,Object(m.put)(Object(g.updateEntities)({entities:D.entities}));case 68:return l.next=70,ie({conversationId:n,messages:h,requestIds:D.result,more:{isFakingSource:u,isRedirect:!!b,isCancelable:!!r}});case 70:case"end":return l.stop()}}),R)}function ue(e,t){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(m.delay)(1e3);case 2:return r.next=4,Object(m.put)(ee({conversationId:e,requestIds:t}));case 4:case"end":return r.stop()}}),T)}function ie(t){var r,n,a,c,s,u,i,d,p,h,O,v,E,S,j,I,w,x,C,R,T,D,P,A,N,U,F,L,q,V,Q,J,z,X;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(r=t.conversationId,n=t.requestIds,a=t.messages,c=t.more,u=(s=void 0===c?{}:c).isRedirect,i=s.isFakingSource,d=s.isCancelable,a[0].content.type===Y){l.next=5;break}return l.next=5,Object(m.put)($({conversationId:r,requestIds:n,isCancelable:d}));case 5:if(!i){l.next=7;break}return l.abrupt("return");case 7:if(p=a.length,l.t0=!d,!l.t0){l.next=12;break}return l.next=12,Object(m.spawn)(ue,r,n);case 12:return h=0,O=[],v=[],E=[],l.next=18,Object(m.select)(g.networkStatusSelector);case 18:return S=l.sent,l.next=21,Object(m.call)(k.getItem,"device_id");case 21:if(j=l.sent,"offline"!==S){l.next=28;break}I=a.map((function(e){return G(G({},e),{},{requestId:e.request_id})})),E.push.apply(E,o()(I)),v.push.apply(v,o()(I)),l.next=60;break;case 28:if(!(h<p)){l.next=60;break}return w=a[h],l.next=32,Object(m.call)(de,w,r);case 32:if(x=l.sent,C=void 0,x){l.next=39;break}C=G(G({},w),{},{requestId:w.request_id}),v.push(C),l.next=57;break;case 39:return l.next=41,Object(m.select)(g.isScChatSelector);case 41:return R=l.sent,l.next=44,Object(m.call)(pe,w,u,R,j);case 44:if(!(C=l.sent).errorCode){l.next=55;break}if(T=w.type,D=w.content,T!==K||!D||D.type!==Y){l.next=52;break}return l.next=50,Object(m.call)(g.setToastInformationSaga,Object(g.setToastInformation)({error:C.error}));case 50:l.next=53;break;case 52:v.push(C);case 53:l.next=56;break;case 55:O.push(C);case 56:C.error&&C.error.offlineError&&E.push(C);case 57:h++,l.next=28;break;case 60:if(!O.length){l.next=64;break}return O.forEach((function(e){e.send_status=k.MessageSendStatus.SUCCEED})),l.next=64,Object(m.call)(he,O,r);case 64:if(!v.length){l.next=104;break}return l.next=67,Object(m.select)(Object(g.getConversation)(r));case 67:if(!(P=l.sent)||!P.faking){l.next=74;break}if(A=v.find((function(e){return[-1,42].includes(e.errorCode)})),l.t1=A,!l.t1){l.next=74;break}return l.next=74,Object(m.call)(g.setToastInformationSaga,Object(g.setToastInformation)({error:A.error}));case 74:return N=[],v.forEach((function(e){var t=e.errorCode,r=e.error,n=e.request_id,a=e.type,c=e.content,s=e.from_id,o=e.to_id,u=e.conversation_id;t===k.MessageErrorCode.LIMITING&&N.push(Object(m.call)(g.setToastInformationSaga,Object(g.setToastInformation)({error:r})));var i={errorCode:t,translateStatus:k.TranslationStatus.FAILED,retryRequestId:f()()};a===B&&Object(g.impressionTracker)({trackerName:"impressionResendVideo",data:{message_id:0,conversation_id:u,is_sender:!0,from_user_id:s,to_user_id:o,video_original_duration:c.duration_seconds},shopId:P.shop_id}),(a===W&&t===k.MessageErrorCode.BLACKLIST||[B,H].includes(a))&&(i.content=c),N.push(Object(m.put)(Object(g.updateRecord)({name:"messages",id:n,record:i})))})),l.next=78,Object(m.all)(N);case 78:return U=v.map((function(e){return e.requestId})),l.next=81,Object(m.put)(te({conversationId:r,requestIds:U}));case 81:if(F=v.find((function(e){return e.errorCode===k.MessageErrorCode.CANCEL_ORDER})),L=v.find((function(e){return e.errorCode===k.MessageErrorCode.UNTRUSTED_NETWORK})),!F&&!L){l.next=100;break}return l.next=86,Object(m.select)(g.currentConversationShopSelectors);case 86:if(q=l.sent,V=(q||{}).country,Q=V&&V.toLowerCase(),!F){l.next=97;break}return l.next=92,Object(m.select)(Object(g.getMessageSelector)(F.request_id));case 92:return J=l.sent,l.next=95,Object(m.put)(Object(g.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:Q||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){b.store.dispatch(Object(g.closeModal)());var e=fe(J,!0);b.store.dispatch(Object(_.a)({conversationId:r,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){b.store.dispatch(Object(g.closeModal)());var e=fe(J,!1);b.store.dispatch(Object(_.a)({conversationId:r,message:e}))}}}}));case 95:l.next=100;break;case 97:return z='<a style="color: #395692" target="blank" href="'.concat(Object(k.getShopeeCustomerService)(Q),'">').concat(e("text.shopee_cs"),"</a>"),l.next=100,Object(m.put)(Object(g.showModal)({type:"CONFIRM_MODAL",title:{key:"modal.title.untrusted_network"},additions:{withCloseIcon:!0,renderContentAsHtml:!0,content:e("modal.content.untrusted_network",{someone:z})},actions:{confirm:{label:{key:"common.ok"}}}}));case 100:if(!v.find((function(e){return e.errorCode===k.MessageErrorCode.EXCEED_DAILY_LIMIT}))){l.next=104;break}return l.next=104,Object(m.put)(Object(g.showModal)({type:"CONFIRM_MODAL",additions:{content:{key:"label.exceed.daily.limit.warning"}},actions:{confirm:{label:{key:"label.modal.confirm"},handler:function(){b.store.dispatch(Object(g.closeModal)())}}}}));case 104:if(!E.length){l.next=109;break}return X=E.map((function(e){return e.requestId})),l.next=108,Object(m.put)(Object(y.e)({conversationId:r,requestIds:X}));case 108:Object(g.networkJudge)();case 109:case"end":return l.stop()}}),M)}function de(t,r){var n,a,c,s,o,u,i,d,p,f,h,O,v,E,S,_;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=t.type,a=t.request_id,c=t.content,s=c.url,o=c.file,u=c.duration_seconds,i=c.video_url,d=n===B,l.prev=2,n!==H||s){l.next=24;break}return(p=new window.FormData).append("file",o),p.append("conversation_id",r),l.next=9,Object(m.call)(g.fetch,{method:"POST",subServer:"coreapi",resource:"images",payload:p});case 9:f=l.sent,h=f.url,O=f.thumbnail,v=f.thumb_width,E=f.thumb_height,S=f.file_server_id,t.content.url_hash=h.split("/").pop(),t.content.url=h,t.content.thumb_url=O,t.content.thumb_width=v,t.content.thumb_height=E,t.content.file_server_id=S,delete t.content.file,l.next=30;break;case 24:if(!d||i){l.next=30;break}return l.next=27,Object(m.call)(I.g,{id:a,file:o,duration:u,onProgress:function(e){b.store.dispatch(Object(I.d)({id:a,info:{percent:e}}))}});case 27:_=l.sent,t.content=G(G({},t.content),_),delete t.content.file;case 30:return l.abrupt("return",!0);case 33:if(l.prev=33,l.t0=l.catch(2),!(l.t0 instanceof g.FileReaderError)){l.next=40;break}return l.next=38,Object(m.call)(g.setToastInformationSaga,Object(g.setToastInformation)({toast:{show:!0,type:"fail",message:e("toast.error.file_expired")}}));case 38:return l.next=40,Object(m.call)(ve,{payload:{id:a,conversationId:r}});case 40:if(l.t1=d,!l.t1){l.next=44;break}return l.next=44,Object(m.put)(Object(I.d)({id:a,info:{percent:void 0}}));case 44:return l.abrupt("return",!1);case 45:case"end":return l.stop()}}),D,null,[[2,33]])}var le=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type","entry_point"];function pe(t,r,n,a){var c,s,o,u,i,d,p,f;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return c="",s={},le.forEach((function(e){t[e]&&(s[e]=t[e]),s[e]&&s[e].localUrl&&(c=s[e].localUrl,delete s[e].localUrl)})),t.retryRequestId&&(s.request_id=t.retryRequestId),o=JSON.stringify(G(G({},s),{},{device_id:a,source:n?"minichat":"pc_mall"})),u=""+Date.parse(new Date)/1e3,i={},l.prev=7,d=O()(o).toString(),l.next=11,E.a.x(d,u,1,"VN".toUpperCase());case 11:i=l.sent,l.next=17;break;case 14:l.prev=14,l.t0=l.catch(7),i={"X-Sap-Access-S":o.request_id,"X-Sap-Access-T":u,"X-Sap-Access-F":"error"};case 17:return l.prev=17,l.next=20,Object(m.call)(g.fetch,{method:"POST",resource:"messages",payload:o,headers:G({},i)});case 20:return p=l.sent,c&&(p.content.localUrl=c),r&&Object(k.removeItem)(J),l.abrupt("return",p);case 26:l.prev=26,l.t1=l.catch(17),t.created_timestamp=Math.floor(Date.now()/1e3),l.t2=!0,l.next=l.t2===l.t1 instanceof g.UntrustedNetwork?32:l.t2===l.t1 instanceof g.Forbidden?34:l.t2===l.t1 instanceof g.Limiting?36:l.t2===l.t1 instanceof g.CustomError?38:l.t2===l.t1 instanceof g.Blacklist?40:l.t2===l.t1 instanceof g.CancelOrderWarning?43:l.t2===l.t1 instanceof g.UnverifiedPhoneNumber?45:l.t2===("message_exceed_daily_limit"===l.t1.message)?47:49;break;case 32:return f=k.MessageErrorCode.UNTRUSTED_NETWORK,l.abrupt("break",50);case 34:return f=k.MessageErrorCode.FORBIDDEN,l.abrupt("break",50);case 36:return f=k.MessageErrorCode.LIMITING,l.abrupt("break",50);case 38:return f=k.MessageErrorCode.CUSTOM_ERROR,l.abrupt("break",50);case 40:return f=k.MessageErrorCode.BLACKLIST,t.content={text:e("common.blacklist.replaced_text")},l.abrupt("break",50);case 43:return f=k.MessageErrorCode.CANCEL_ORDER,l.abrupt("break",50);case 45:return f=k.MessageErrorCode.UNVERIFIED_PHONE_NUMBER,l.abrupt("break",50);case 47:return f=k.MessageErrorCode.EXCEED_DAILY_LIMIT,l.abrupt("break",50);case 49:f=k.MessageErrorCode.DEFAULT;case 50:return c&&(t.content.localUrl=c),l.abrupt("return",G(G({},t),{},{requestId:t.request_id,errorCode:f,error:l.t1}));case 52:case"end":return l.stop()}}),P,null,[[7,14],[17,26]])}function fe(e,t){return delete e.errorCode,delete e.error,G(G({},e),{},{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}var be=function(e){return e.content&&e.content.translation&&e.content.translation.text};function he(e,t){var r,n,a,c,s,o,u,d,p,f,b,h,O,v;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return r=[],n=[],l.next=4,Object(m.select)(g.currentConversationIdSelector);case 4:if((a=l.sent)===t){l.next=12;break}return l.next=8,Object(m.select)(Object(g.conversationMessageIdsSelector)(t));case 8:return r=l.sent,l.next=11,Object(m.select)(Object(g.getMessagesSelector)(r.all));case 11:n=l.sent;case 12:return l.next=14,Object(m.select)(g.messagesWithSourceSelector);case 14:if(c=l.sent,s=Object(g.normalize)("messages",c).entities.messages||{},o=[],(u=e.map((function(e){var r=e.request_id,u=e.id,i=e.content,d=e.type;if(d===K&&i&&i.type===V&&(i.type=Q),s[r]){d===B&&o.push(Object(m.put)(Object(I.b)({id:r}))),o.push(Object(m.put)(Object(g.deleteRecord)({name:"messages",id:r})));var l=G(G({},s[r]),{},{translateStatus:be(e)?k.TranslationStatus.SHOW:k.TranslationStatus.FAILED});return s[u]?null:Object(k.deepMerge)(l,e)}var p=null;if((p=a!==t?n.filter((function(e){return e&&e.retryRequestId===r})):c.filter((function(e){return e.retryRequestId===r}))).length){var f=p[0].request_id;o.push(Object(m.put)(Object(g.deleteRecord)({name:"messages",id:f})));var b=G(G({},s[f]),{},{translateStatus:be(e)?k.TranslationStatus.SHOW:k.TranslationStatus.FAILED}),h=s[u]?null:Object(k.deepMerge)(b,e);return h&&h.retryRequestId&&(h.original_request_id=f),h}return null})).filter(Boolean)).length){l.next=20;break}return l.abrupt("return");case 20:return l.next=22,Object(m.call)(g.updateOrReplaceAction,s,u,"messages");case 22:return l.next=24,Object(m.put)(Z({conversationId:t,requestIdToMessageId:u.reduce((function(e,t){return t.original_request_id?G(G({},e),{},i()({},t.original_request_id,t.id)):G(G({},e),{},i()({},t.request_id,t.id))}),{})}));case 24:return u.sort((function(e,t){return t.id-e.id})),l.next=27,Object(m.all)(o);case 27:return d=u[0],p=d.id,f=d.content,b=d.created_at,h=d.created_timestamp,O=d.type,v=d.message_option,l.next=30,Object(m.put)(Object(g.updateRecord)({name:"conversations",id:t,record:{latest_message_id:p,latest_message_type:O,latest_message_content:f,last_message_time:b,last_message_option:v,max_general_option_hide_time:h,crm_message_preview:{},unread_count:0,flag:"normal"}}));case 30:case"end":return l.stop()}}),A)}function Oe(){var e,t;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(m.select)(g.messageIdsHashSelector);case 2:return e=r.sent,t=[],Object.entries(e).forEach((function(e){var r=c()(e,2),n=r[0],a=r[1].sending||[];a.length&&t.push(Object(m.put)(te({conversationId:n,requestIds:a})))})),r.next=7,Object(m.all)(t);case 7:case"end":return r.stop()}}),N)}function ve(e){var t,r,n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.id,n=t.conversationId,a.next=3,Object(m.put)(ae({id:r,conversationId:n}));case 3:return a.next=5,Object(m.put)(Object(g.deleteRecord)({name:"messages",id:r}));case 5:case"end":return a.stop()}}),U)}function Ee(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.takeEveryWithCancel)(X,oe,ae);case 2:case"end":return e.stop()}}),F)}function Se(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.takeEvery)(ne,ve);case 2:return e.next=4,Object(m.takeEvery)(ce,se);case 4:return e.next=6,Object(m.takeLatest)(re,Oe);case 6:case"end":return e.stop()}}),L)}t.d=(n={},i()(n,$,(function(e,t){var r=t.payload,n=r.conversationId,a=r.requestIds,c=r.isCancelable,s=e.messageIdsHash,o=s[n]||{},u=o.sending||[];u=c?u.concat(a):u;var d=o.all||[],l=o.failed||[];return G(G({},e),{},{messageIdsHash:G(G({},s),{},i()({},n,G(G({},o),{},{all:a.reverse().filter((function(e){return!d.includes(e)})).concat(d),failed:l.filter((function(e){return!a.includes(e)})),sending:u})))})})),i()(n,ee,(function(e,t){var r=t.payload,n=r.conversationId,a=r.requestIds,c=e.messageIdsHash,s=c[n]||{},o=s.sending||[],u=s.all||[],d=s.failed||[],l=a.filter((function(e){return u.includes(e)&&!d.includes(e)}));return G(G({},e),{},{messageIdsHash:G(G({},c),{},i()({},n,G(G({},s),{},{sending:o.concat(l)})))})})),i()(n,Z,(function(e,t){var r=t.payload,n=r.conversationId,a=r.requestIdToMessageId,c=e.messageIdsHash,s=c[n]||{},o=(s.all||[]).map((function(e){return a[e]?a[e]:e})),u=s.sending||[];return G(G({},e),{},{messageIdsHash:G(G({},c),{},i()({},n,G(G({},s),{},{all:o,offset:o[o.length-1],sending:u.filter((function(e){return!a.hasOwnProperty(e)}))})))})})),i()(n,te,(function(e,t){var r=t.payload,n=r.conversationId,a=r.requestIds,c=e.messageIdsHash,s=c[n]||{},o=s.failed||[],u=s.sending||[];return G(G({},e),{},{messageIdsHash:G(G({},c),{},i()({},n,G(G({},s),{},{sending:u.filter((function(e){return!a.includes(e)})),failed:o.concat(a)})))})})),i()(n,ae,(function(e,t){var r=t.payload,n=r.id,a=r.conversationId,c=e.messageIdsHash,s=c[a]||{},o=s.all||[],u=s.sending||[];return G(G({},e),{},{messageIdsHash:G(G({},c),{},i()({},a,G(G({},s),{},{all:o.filter((function(e){return e!==n})),sending:u.filter((function(e){return e!==n}))})))})})),n)}).call(this,r("iMMW").t)},r9ex:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return v}));var n=r("lSNA"),a=r.n(n),c=r("o0o1"),s=r.n(c),o=r("FH7K"),u=r("5rFJ"),i=r("XnKn"),d=r("tvxL"),l=r("oIQF"),p=r("4l3w"),f=s.a.mark(O),b=s.a.mark(v),h=Object(o.a)(a()({},p.a.RESEND_MESSAGE_REQUESTED,(function(e){var t=e.conversationId,r=e.conversationStatus;return{conversationId:t,conversationStatus:void 0===r?"":r,message:e.message}}))).resendMessageRequested;function O(e){var t,r,n,a,c,o,p;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.payload,r=t.conversationId,n=t.conversationStatus,a=t.message,"closed"!==n){s.next=5;break}return s.next=4,Object(u.call)(d.setToastInformationSaga,Object(d.setToastInformation)({type:"conversation-closed-tip"}));case 4:return s.abrupt("return");case 5:if(c=a.type,o=a.content,p=a.to_id,c!==i.MessageTypes.MSG_TYPE_VIDEO||o.video_url){s.next=10;break}return s.next=9,Object(u.put)(Object(l.k)({conversationId:r,conversationUserId:p,message:a,isResend:!0}));case 9:return s.abrupt("return");case 10:return s.next=12,Object(u.put)(Object(l.h)({conversationId:r,conversationUserId:p,messages:[a],more:{isResend:!0}}));case 12:case"end":return s.stop()}}),f)}function v(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.takeEvery)(h,O);case 2:case"end":return e.stop()}}),b)}}});
//# sourceMappingURL=app.970f9218.01e55c6c7ac3ae46c6cf.js.map