/*!
 * Project: 'pcmall';
 * Module: 'voucher';
 * Tag: 'pc-v4.109.0';
 * Branch: 'heads/pc-v4.109.0';
 * Last commit: '[RELEASE] pc-v4.109.0' (7ed37443877a46d40e50c6090a4c25e49152b0ed);
 * Updated: '2022-02-17T03:01:14.625Z';
 */
(self.mfeModules=self.mfeModules||[]).push(["pcmall-productshopvouchers",["React","Redux","ReactRedux","PlatformApi","ReactRouter","WithInjectReducer","Account","ReactDom","FeatureToggles","Platform","NebulaCore"],function(e,r,t,o,n,i,c,u,s,a,p){return(self["mfeStartuppcmall-pcpagevoucherdetail"]||function(){})(556),["pcmall-pcpagevoucherdetail",(self.wpJsonpPcmallPcpagevoucherdetail=self.wpJsonpPcmallPcpagevoucherdetail||[]).push([[556,951],{6781:function(e,r,t){"use strict";var o=t(3804),n=t(6704),i=t(5735);function c(){return(c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}r.Z=function(e){var r=o.forwardRef((function(r,t){return o.createElement(i.Z,{onTrack:n.Tracking.onTrack},o.createElement(e,c({},r,{ref:t})))})),t=function(e){return e.displayName||e.name||"Component"}(r);return r.displayName="WithFlashSaleWrap("+t+")",r}},9169:function(e,r,t){"use strict";t.d(r,{Z:function(){return L}});var o=t(3804),n=t.n(o),i=t(2815),c={voucher:"_1HW0fp",voucherLeftInfo:"_3bSUDv",voucherRightContainer:"J5KS9N",btnContainer:"_1kvm2E",voucherLeft:"_3ovy3V",logo:"X8Xhsq",header:"_2_kJZD",expiry:"U0cGFA",specificProduct:"v-9gpT",voucherClaimFieldSolid:"_3HPrsD",officialHeader:"_3lBBw8",preferredHeader:"dVDdyf",sMartHeader:"P_rj0N",useLaterBtn:"_1qFSLl",applyBtn:"_1-Inc9"},u=t(36),s=t.n(u),a=t(8672),p=t(1053),l=t(4742),h=t(429),f=t(6775),v=t(6704),d=t(9607),g=t(5377),m=t(5325),_=t(351),y=t(119),S=t(6866),O=t(2738),E=t(6781),w={progress:y.Z.INIT};var L=(0,E.Z)((0,v.withI18nCollections)([i.L])((function(e){var r=e.voucher,t=e.voucherLocation,o=e.className,i=e.isShopeeMart,u=r.is_shop_official,E=r.shop_id,L=r.promotionid,N=r.voucher_code,I=r.percentage_used,P=(0,f.useHistory)(),C=(0,m.useSelector)((function(e){return(0,d.Au)(e.featureToggles,g.v_0)})),x=(0,S.oW)(),b=function(){var e=(0,_.D)(r,{useVLP:C,enableEncodeUrl:x});(0,O.np)(r)&&(e=(0,O.Xz)(r,e)),e&&P.push(e)},D=(0,m.useSelector)((function(e){return r&&r.voucher_code&&e.voucher.claimProgress[r.voucher_code]||w})),T=r.is_claimed_before||D.progress===y.Z.OK?(0,O.np)(r)?2:1:0,R={location:t,shopid:E,promotion_id:L,status:T,voucher_code:N,usage_progress:I},V=(0,l.Z)("ShopVoucherSmall.ProductPageSellerVoucherBody",R,[T]);return n().createElement(h.ZP,{targetType:"ShopVoucherSmall",targetData:{voucher:r,voucherLocation:t}},n().createElement("div",{ref:V,className:o},n().createElement(a.rO,{className:c.voucher,voucher:r,type:p.wK.FLAT_WITH_SHADOW,usePreferredShopColorScheme:!0,isOfficial:u,isShopeeMart:i},n().createElement(a.Tg,{className:c.voucherLeft,sawtoothClassName:c.voucherLeftSawtooth,voucher:r,voucherLocation:t,onClick:b},n().createElement("div",{className:c.voucherLeftInfo},n().createElement(a.PU,{sizeStyle:"small",className:c.header}),n().createElement(a.s_,{isOfs:u,className:c.specificProduct,voucher:r,isShopeeMart:i}),n().createElement(a.EU,{className:c.expiry,voucher:r,upcomingGrayText:!0}))),n().createElement(a.Ec,{className:c.voucherRightContainer},n().createElement(a.ve,{voucher:r,className:c.voucherClaimFieldSolid,containerClassName:c.btnContainer,applyBtnClassName:s()(c.applyBtn,(0,O.np)(r)&&c.useLaterBtn),afterClaim:b,applyText:(0,v.t)("label_voucher_seller_voucher_use"),shouldExpandButtonClickArea:!0})),n().createElement(a.Vp,{onTop:!0}))))})))},1470:function(e,r,t){"use strict";t.d(r,{Z:function(){return k}});var o=t(3804),n=t.n(o),i=t(36),c=t.n(i),u=t(5325),s=t(6775),a=t(8993),p=t(8851),l=t(5886);var h=t(6231);function f(){return(f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function v(e,r){return(v=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var d,g,m,_,y,S,O,E,w,L,N,I,P,C,x=t(6704),b=t(2815),D=t(9169),T="_3v4TxM",R=t(6781),V=372/16+"rem",k=(0,R.Z)((0,x.withI18nCollections)([b.L])((d=function(e){var r=e.vouchers,t=e.isShopeeMart;return r&&0!==r.length?n().createElement("div",{className:c()("product-shop-vouchers",e.className)},n().createElement("div",{className:"product-shop-vouchers__header"},(0,x.t)("label_shop_voucher")),n().createElement("div",{className:"product-shop-vouchers__list",style:{maxHeight:""+V},tabIndex:-1},!!r&&r.slice(0,50).map((function(e,r){return n().createElement(D.Z,{className:T,key:"product-detail-page-seller-voucher-"+r,voucher:e,voucherLocation:r,isShopeeMart:t})})))):null},m=(g={selector:function(e){return e.voucher},autoFetch:!1}).selector,_=g.autoFetch,y=void 0===_||_,S=g.fetchStatus,O=void 0!==S&&S,E=g.forceRender,w=void 0!==E&&E,L=g.isLite,N=void 0!==L&&L,I=g.needPriorityVoucher,P=void 0!==I&&I,C=function(e){var r,t;function n(r){var t;return(t=e.call(this,r)||this).universalDataFetch=function(){var e,r,o=t.props,n=o.shopId,i=o.itemId,c=o.requestCallback,u=o.isRequesting,s=o.vouchers,a=o.priorityVoucherList;if(n){var p=t.getPriorityVoucherParams(),l=p?[{promotionid:p.priorityPromotionId,signature:p.prioritySignature,signature_source:p.prioritySignatureSource}]:void 0,h=!!s,f=(r=a,!(!(e=l)&&!r||Array.isArray(e)&&Array.isArray(r)&&e[0]&&r[0]&&e[0].promotionid===r[0].promotionid&&e[0].signature===r[0].signature&&e[0].signature_source===r[0].signature_source));if((i||!h||f)&&!u&&y)return N?t.props.fetchShopVouchersLite({shopId:n,withClaimingStatus:O,priorityVoucherList:l,requestCallback:c}):t.props.fetchShopVouchers({shopId:n,itemId:i,withClaimingStatus:O,priorityVoucherList:l,requestCallback:c})}},t}t=e,(r=n).prototype=Object.create(t.prototype),r.prototype.constructor=r,v(r,t);var i=n.prototype;return i.componentDidMount=function(){!this.props.isRequesting&&y&&this.universalDataFetch()},i.componentDidUpdate=function(e){e.shopId===this.props.shopId&&e.itemId===this.props.itemId||this.universalDataFetch()},i.getPriorityVoucherParams=function(){if(P){var e=this.props,r=e.location,t=e.shopId,o=(0,h.AW)(r.search);return o.priorityPromotionId&&o.prioritySignature&&o.prioritySignatureSource?{priorityPromotionId:parseInt(o.priorityPromotionId,10),prioritySignature:o.prioritySignature,prioritySignatureSource:o.prioritySignatureSource}:function(e){return(l.y.getItem("SHOP_PRIORITY_VOUCHER_STORAGE")||{})[e]}(t)}},i.render=function(){var e=this.props.vouchers;return!y||e&&e.length||w?o.createElement(d,f({loadVouchers:this.universalDataFetch},this.props)):null},n}(o.Component),(0,u.connect)((function(e,r){return{vouchers:(0,a.oL)(m(e),r.shopId,r.itemId),priorityVoucherList:(0,a.zM)(m(e),r.shopId),isRequesting:(0,a.Sz)(m(e),r.shopId,r.itemId)}}),{fetchShopVouchers:p.Rd,fetchShopVouchersLite:p._8})((0,s.withRouter)(C)))))},8993:function(e,r,t){"use strict";function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function n(e,r,t){var o=e&&e.shop&&e.shop[r];if(t){var n=o&&o[t];return n?n.vouchers:null}return o?o.vouchers:null}function i(e,r){var t=e&&e.shop&&e.shop[r];return t?t.priorityVoucherList:null}function c(e,r){return e&&e.recommendedShopVouchers&&e.recommendedShopVouchers[r]||[]}function u(e){return Object.entries(e.claimProgress||[]).reduce((function(e,r){var t,n=r[0],i=r[1];return o({},e,((t={})[n]=i.progress,t))}),{})}function s(e,r){if(!r)return 0;var t=e.claimProgress[r];return t?t.progress:0}function a(e,r,t){var o=e&&e.shop&&e.shop[r];return t?-100===(o&&o[t]||{}).error:o&&-100===o.error}function p(e,r,t){if(!t)return{};var o=e&&e.voucherDetail&&e.voucherDetail[r||"0"];return o&&o[t]||{}}t.d(r,{oL:function(){return n},zM:function(){return i},zq:function(){return c},HL:function(){return u},KT:function(){return s},Sz:function(){return a},hy:function(){return p}})},5321:function(e,r,t){var o=t(6704).FetchUtils;e.exports=o},4612:function(e,r,t){"use strict";t.d(r,{v:function(){return o.config}});var o=t(6704)},2420:function(e,r,t){var o={"./ar.png":1803,"./br.png":1031,"./cl.png":7914,"./co.png":2710,"./es.png":4130,"./fr.png":8841,"./id.png":59,"./in.png":7236,"./mx.png":185,"./my.png":9913,"./ph.png":633,"./pl.png":2127,"./sg.png":4816,"./th.png":2219,"./tw.png":9669,"./vn.png":4400};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=2420},6967:function(e,r,t){var o={"./ar.png":8729,"./br.png":8559,"./cl.png":9170,"./co.png":2550,"./es.png":5781,"./fr.png":4232,"./id.png":4307,"./in.png":592,"./mx.png":1913,"./my.png":5630,"./ph.png":468,"./pl.png":5581,"./sg.png":2040,"./th.png":5639,"./tw.png":483,"./vn.png":3007};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=6967},9748:function(e,r,t){var o={"./ar.png":8282,"./br.png":5230,"./cl.png":9933,"./co.png":4121,"./es.png":9714,"./fr.png":3563,"./id.png":5193,"./in.png":770,"./mx.png":2266,"./my.png":2147,"./ph.png":4836,"./pl.png":5493,"./sg.png":569,"./th.png":1076,"./tw.png":5634,"./vn.png":1596};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=9748},8602:function(e,r,t){var o={"./popup_apponly@2x.png":5514,"./popup_mall_apponly@2x.png":4506};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=8602},1906:function(e,r,t){var o={"./popup_apponly_tw@2x.png":6504,"./popup_mall_apponly_tw@2x.png":7172};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=1906},6686:function(e){"use strict";e.exports=c},1437:function(e){"use strict";e.exports=s},6161:function(e){"use strict";e.exports=a},6704:function(e){"use strict";e.exports=o},3804:function(r){"use strict";r.exports=e},7274:function(e){"use strict";e.exports=u},5325:function(e){"use strict";e.exports=t},6775:function(e){"use strict";e.exports=n},4857:function(e){"use strict";e.exports=r}},0,[[1470,666,458]]]),"Z",null]},1]),function(){if(window&&window.__DECKER_HOOK__){var e=window.__DECKER_HOOK__;function r(){e.sendToDevtools("MFE_LOAD_SLOT",{slotName:"pcmall-productshopvouchers",tag:"pc-v4.109.0",branch:"heads/pc-v4.109.0",lastCommit:"[RELEASE] pc-v4.109.0",lastCommitHash:"7ed37443877a46d40e50c6090a4c25e49152b0ed",updated:"2022-02-17T03:01:14.610Z"})}e.on("MFE_RETRIEVE_SLOTS",r),r()}}();